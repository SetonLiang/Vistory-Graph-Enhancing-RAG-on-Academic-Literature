<html lang="en">
<head>
    <meta charset="UTF-8" content="no-cache">
    <title>Index</title>
    <link rel="stylesheet" href="/static/css/for_index.css">
    <link rel="stylesheet" href="/static/css/for_chart.css">
    <link rel="stylesheet" href="/static/css/for_graph.css">
</head>
<body>
    <script src="/static/js/jquery-3.7.1.js"></script>
    <script src="/static/plugins/d3/d3.v7.js"></script>
    <script src="/static/plugins/d3/d3.layout.cloud.js"></script>
    
    
    <div class="Self_container">
        <div class="header">
            <div id="title" class="clearfix">
                <h1>AcademiaEyes</h1>
            </div>
        </div>
        <div class="main">
    
            <div class="left-container">
                <div class="title-box">Chart</div>
                <div class="content-box hidden" id="chart">
    
    
    
    
        <meta charset="UTF-8">
        <title>Chart</title>
        <link rel="stylesheet" href="/static/css/for_chart.css">
        <style>
        </style>
    
    
    
    <!-- Create a div where the graph will take place -->
    <div id="dataVis" class="chart_container">
        <div class="chart">
            <svg id="chart2" viewBox="0,0,505.7395935058594,306.3333435058594" style="width: 100%; height: 100%;"><g class="bars"><rect fill="#247485" x="84.79289335363055" y="121.53818592418325" height="164.7951575816761" width="82.18934003044576"></rect><rect fill="#64a4af" x="221.7751267377068" y="11.004848521839495" height="275.32849498401987" width="82.18934003044576"></rect><rect fill="#22465b" x="358.7573601217831" y="75.31515391956675" height="211.01818958629264" width="82.18934003044576"></rect></g><g class="x-axis" transform="translate(0,286.3333435058594)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="currentColor" d="M30,0H495.7395935058594"></path><g class="tick" opacity="1" transform="translate(125.88756336885342,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">AI</text></g><g class="tick" opacity="1" transform="translate(262.8697967529297,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">CMA</text></g><g class="tick" opacity="1" transform="translate(399.852030137006,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">DSA</text></g></g><g class="y-axis" transform="translate(30,0)" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,286.3333435058594)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">0.0</text></g><g class="tick" opacity="1" transform="translate(0,261.2121304598722)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">50</text></g><g class="tick" opacity="1" transform="translate(0,236.0909174138849)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">100</text></g><g class="tick" opacity="1" transform="translate(0,210.96970436789772)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">150</text></g><g class="tick" opacity="1" transform="translate(0,185.8484913219105)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">200</text></g><g class="tick" opacity="1" transform="translate(0,160.72727827592328)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">250</text></g><g class="tick" opacity="1" transform="translate(0,135.6060652299361)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">300</text></g><g class="tick" opacity="1" transform="translate(0,110.48485218394886)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">350</text></g><g class="tick" opacity="1" transform="translate(0,85.36363913796166)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">400</text></g><g class="tick" opacity="1" transform="translate(0,60.242426091974416)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">450</text></g><g class="tick" opacity="1" transform="translate(0,35.12121304598722)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">500</text></g><g class="tick" opacity="1" transform="translate(0,10)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">550</text></g></g></svg>
        </div>
        <div class="chart">
            <svg id="chart3" viewBox="0,0,505.7395935058594,306.3333435058594" style="width: 100%; height: 100%;"><g class="bars"><g fill="#22788a"><rect x="39.13214889227174" y="266.9900094604492" height="19.343334045410188" width="82.18934003044578"></rect><rect x="130.45363781498926" y="244.19250862121584" height="42.14083488464354" width="82.18934003044578" fill="#22788a"></rect><rect x="221.77512673770678" y="244.88334197998046" height="41.45000152587892" width="82.18934003044578"></rect><rect x="313.0966156604243" y="217.94084098815915" height="68.39250251770022" width="82.18934003044578"></rect><rect x="404.4181045831418" y="231.06667480468752" height="55.26666870117185" width="82.18934003044578"></rect></g><g fill="#68aab6"><rect x="39.13214889227174" y="192.38000671386717" height="74.61000274658201" width="82.18934003044578"></rect><rect x="130.45363781498926" y="175.8000061035156" height="68.39250251770022" width="82.18934003044578" fill="#68aab6"></rect><rect x="221.77512673770678" y="168.89167251586912" height="75.99166946411134" width="82.18934003044578"></rect><rect x="313.0966156604243" y="119.15167068481446" height="98.78917030334469" width="82.18934003044578"></rect><rect x="404.4181045831418" y="170.27333923339845" height="60.79333557128908" width="82.18934003044578"></rect></g><g fill="#22475d"><rect x="39.13214889227174" y="137.80417137145997" height="54.5758353424072" width="82.18934003044578"></rect><rect x="130.45363781498926" y="120.53333740234376" height="55.26666870117185" width="82.18934003044578"></rect><rect x="221.77512673770678" y="122.60583747863768" height="46.285835037231436" width="82.18934003044578"></rect><rect x="313.0966156604243" y="26.580000610351576" height="92.57167007446289" width="82.18934003044578"></rect><rect x="404.4181045831418" y="128.82333770751953" height="41.45000152587892" width="82.18934003044578"></rect></g></g><g class="x-axis" transform="translate(0,286.3333435058594)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="currentColor" d="M30,0H495.7395935058594"></path><g class="tick" opacity="1" transform="translate(80.22681890749463,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2020</text></g><g class="tick" opacity="1" transform="translate(171.54830783021214,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2021</text></g><g class="tick" opacity="1" transform="translate(262.8697967529297,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2022</text></g><g class="tick" opacity="1" transform="translate(354.1912856756472,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2023</text></g><g class="tick" opacity="1" transform="translate(445.51277459836473,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2024</text></g></g><g class="y-axis" transform="translate(30,0)" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,286.3333435058594)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">0.0</text></g><g class="tick" opacity="1" transform="translate(0,251.79167556762695)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">50</text></g><g class="tick" opacity="1" transform="translate(0,217.25000762939453)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">100</text></g><g class="tick" opacity="1" transform="translate(0,182.7083396911621)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">150</text></g><g class="tick" opacity="1" transform="translate(0,148.1666717529297)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">200</text></g><g class="tick" opacity="1" transform="translate(0,113.62500381469727)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">250</text></g><g class="tick" opacity="1" transform="translate(0,79.08333587646484)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">300</text></g><g class="tick" opacity="1" transform="translate(0,44.54166793823242)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">350</text></g><g class="tick" opacity="1" transform="translate(0,10)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">400</text></g></g></svg>
        </div>
        <div class="chart">
            <svg id="chart1" viewBox="0,0,505.7395935058594,306.3333435058594" style="width: 100%; height: 100%;"><g class="bars"><rect x="39.13214889227174" y="124.4809565952846" height="161.85238691057478" width="82.18934003044578" fill="rgb(230, 177, 190)"></rect><rect x="130.45363781498926" y="104.74286063058035" height="181.590482875279" width="82.18934003044578" fill="rgb(226, 149, 167)"></rect><rect x="221.77512673770678" y="106.32190830775669" height="180.01143519810267" width="82.18934003044578" fill="rgb(220, 121, 145)"></rect><rect x="313.0966156604243" y="10.78952383858818" height="275.5438196672712" width="82.18934003044578" fill="rgb(214, 93, 122)"></rect><rect x="404.4181045831418" y="129.2180996268136" height="157.11524387904578" width="82.18934003044578" fill="rgb(209, 64, 100)"></rect></g><g class="x-axis" transform="translate(0,286.3333435058594)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="currentColor" d="M30,0H495.7395935058594"></path><g class="tick" opacity="1" transform="translate(80.22681890749463,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2020</text></g><g class="tick" opacity="1" transform="translate(171.54830783021214,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2021</text></g><g class="tick" opacity="1" transform="translate(262.8697967529297,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2022</text></g><g class="tick" opacity="1" transform="translate(354.1912856756472,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2023</text></g><g class="tick" opacity="1" transform="translate(445.51277459836473,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2024</text></g></g><g class="y-axis" transform="translate(30,0)" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,286.3333435058594)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">0.0</text></g><g class="tick" opacity="1" transform="translate(0,246.8571515764509)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">50</text></g><g class="tick" opacity="1" transform="translate(0,207.38095964704243)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">100</text></g><g class="tick" opacity="1" transform="translate(0,167.90476771763392)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">150</text></g><g class="tick" opacity="1" transform="translate(0,128.42857578822546)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">200</text></g><g class="tick" opacity="1" transform="translate(0,88.95238385881696)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">250</text></g><g class="tick" opacity="1" transform="translate(0,49.47619192940849)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">300</text></g><g class="tick" opacity="1" transform="translate(0,10)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">350</text></g></g></svg>
        </div>
        <div class="chart">
            <svg id="chart4" viewBox="0,0,505.7395935058594,306.3333435058594" style="width: 100%; height: 100%;"><g class="bars"><rect fill="rgb(0, 126, 94)" x="39.13214889227174" y="20.628205519456124" height="265.70513798640326" width="82.18934003044578"></rect><rect fill="rgb(120, 189, 166)" x="130.45363781498926" y="152.4179539607121" height="133.91538954514726" width="82.18934003044578"></rect><rect fill="rgb(150, 206, 186)" x="221.77512673770678" y="187.49103217491734" height="98.84231133094204" width="82.18934003044578"></rect><rect fill="rgb(173, 216, 199)" x="313.0966156604243" y="211.93590486966647" height="74.3974386361929" width="82.18934003044578"></rect><rect fill="rgb(184, 222, 206)" x="404.4181045831418" y="223.62693094106822" height="62.70641256479115" width="82.18934003044578"></rect></g><g class="x-axis" transform="translate(0,286.3333435058594)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="currentColor" d="M30,0H495.7395935058594"></path><g class="tick" opacity="1" transform="translate(80.22681890749463,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em" font-size="10px" style="text-anchor: middle;">Hui</text></g><g class="tick" opacity="1" transform="translate(171.54830783021214,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em" font-size="10px" style="text-anchor: middle;">Qu</text></g><g class="tick" opacity="1" transform="translate(262.8697967529297,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em" font-size="10px" style="text-anchor: middle;">Chu</text></g><g class="tick" opacity="1" transform="translate(354.1912856756472,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em" font-size="10px" style="text-anchor: middle;">Fan</text></g><g class="tick" opacity="1" transform="translate(445.51277459836473,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em" font-size="10px" style="text-anchor: middle;">Liu</text></g></g><g class="y-axis" transform="translate(30,0)" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,286.3333435058594)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">0.0</text></g><g class="tick" opacity="1" transform="translate(0,265.07693246694714)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">20</text></g><g class="tick" opacity="1" transform="translate(0,243.82052142803485)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">40</text></g><g class="tick" opacity="1" transform="translate(0,222.5641103891226)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">60</text></g><g class="tick" opacity="1" transform="translate(0,201.30769935021033)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">80</text></g><g class="tick" opacity="1" transform="translate(0,180.05128831129807)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">100</text></g><g class="tick" opacity="1" transform="translate(0,158.7948772723858)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">120</text></g><g class="tick" opacity="1" transform="translate(0,137.53846623347357)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">140</text></g><g class="tick" opacity="1" transform="translate(0,116.2820551945613)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">160</text></g><g class="tick" opacity="1" transform="translate(0,95.02564415564903)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">180</text></g><g class="tick" opacity="1" transform="translate(0,73.76923311673677)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">200</text></g><g class="tick" opacity="1" transform="translate(0,52.51282207782452)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">220</text></g><g class="tick" opacity="1" transform="translate(0,31.256411038912248)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">240</text></g><g class="tick" opacity="1" transform="translate(0,10)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">260</text></g></g></svg>
        </div>
    </div>
    
    <script>
        const containerWidth = d3.select('.chart_container').node().getBoundingClientRect().width;
        const containerHeight = d3.select('.chart_container').node().getBoundingClientRect().height;
        const chartWidth = containerWidth; // 每个图表宽度占容器的25%
        const chartHeight = containerHeight/4;
        const marginTop = 10;
        const marginRight = 10;
        const marginBottom = 20;
        const marginLeft = 30;
    
        // 通用的缩放功能
        function zoom_chart(svg, x, chartWidth, chartHeight) {
            const extent = [[marginLeft, marginTop], [chartWidth - marginRight, chartHeight - marginTop]];
    
            svg.call(d3.zoom()
                .scaleExtent([1, 8])
                .translateExtent(extent)
                .extent(extent)
                .on("zoom", zoomed));
    
            function zoomed(event) {
                const scale = event.transform.k;
                x.range([marginLeft, chartWidth - marginRight].map(d => event.transform.applyX(d)));
                svg.selectAll(".bars rect")
                    .attr("x", d => x(d.author))
                    .attr("width", x.bandwidth());
                const xAxisGroup = svg.selectAll(".x-axis");
                xAxisGroup.call(d3.axisBottom(x).tickFormat(scale < 3 ? '...' : d => d.split(' ')[1]));
                xAxisGroup.selectAll("text")
                    .style("text-anchor", "middle");
            }
        }
    
        // 单独的图表1绘制函数
        function createChart1(svg, data) {
            const colorScale_chart = d3.scaleLinear()
                .domain([2020, 2024])
            .range(["#e6b1be", "#d14163"]);
    
    
            const x = d3.scaleBand()
                .domain(data.map(d => d.year))
                .range([marginLeft, chartWidth - marginRight])
                .padding(0.1);
    
            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.papers)]).nice()
                .range([chartHeight - marginBottom, marginTop]);
    
            svg.attr("viewBox", [0, 0, chartWidth, chartHeight])
                .attr("style", "width: 100%; height: 100%;");
    
            svg.append("g")
                .attr("class", "bars")
                .selectAll("rect")
                .data(data)
                .join("rect")
                .attr("x", d => x(d.year))
                .attr("y", d => y(d.papers))
                .attr("height", d => y(0) - y(d.papers))
                .attr("width", x.bandwidth())
                .attr("fill", d => colorScale_chart(d.year))
                .on('click', function (e, d) {
                    highlightPapersByYear(d.year)
                })
                .on("mouseover", function (event, d) {
                    const currentColor = d3.select(this).attr("fill");
                    d3.select(this)
                        .attr("fill", d3.rgb(currentColor).darker(1.2));
                    tooltip.transition().duration(200).style("opacity", .9);
                    tooltip.html(
                        () => {
                            return d.papers
                        })
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY - 28) + "px");
                })
                .on("mouseout", function () {
                    const originalColor = d3.select(this).attr("fill");
                    d3.select(this).attr("fill", d3.rgb(originalColor).brighter(1.2));
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            svg.append("g")
                .attr("class", "x-axis")
                .attr("transform", `translate(0,${chartHeight - marginBottom})`)
                .call(d3.axisBottom(x).tickSizeOuter(0));
    
            svg.append("g")
                .attr("class", "y-axis")
                .attr("transform", `translate(${marginLeft},0)`)
                .call(d3.axisLeft(y).tickFormat(d3.format(".2s")))
                .call(g => g.select(".domain").remove());
    
            if (data.length > 10) {
                svg.selectAll(".x-axis text")
                    .text('...');
            }
        }
    
        // 单独的图表2绘制函数
        function createChart2(svg, data) {
    
            const x = d3.scaleBand()
                .domain(data.map(d => d.department))
                .range([marginLeft, chartWidth - marginRight])
                .padding(0.4);
    
            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.papers)]).nice()
                .range([chartHeight - marginBottom, marginTop]);
    
            svg.attr("viewBox", [0, 0, chartWidth, chartHeight])
                .attr("style", "width: 100%; height: 100%;");
    
            svg.append("g")
                .attr("class", "bars")
                .selectAll("rect")
                .data(data)
                .join("rect")
                .attr("fill", function (d) {
                    if (d.department === 'AI') {
                        return '#247485'
                    } else if (d.department === 'CMA') {
                        return '#64a4af'
                    } else if (d.department === 'DSA') {
                        return '#22465b'
                    }
                })
                .attr("x", d => x(d.department))
                .attr("y", d => y(d.papers))
                .attr("height", d => y(0) - y(d.papers))
                .attr("width", x.bandwidth())
                .on('click', function (e, d) {
                    const sNode = {'name': d.department}
                    highlightNeighborhood_2(sNode)
                })
                .on("mouseover", function (event, d) {
                    // 获取当前颜色并在鼠标悬浮时加深
                    const currentColor = d3.select(this).attr("fill");
                    d3.select(this)
                        .attr("fill", d3.rgb(currentColor).darker(1.2));
                    tooltip.transition().duration(200).style("opacity", .9);
                    tooltip.html(`${d.department}<br>${d.papers}`)
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY - 28) + "px");
                })
                .on("mouseout", function () {
                    // 恢复原来的颜色
                    const originalColor = d3.select(this).attr("fill");
                    d3.select(this).attr("fill", d3.rgb(originalColor).brighter(1.2));
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            svg.append("g")
                .attr("class", "x-axis")
                .attr("transform", `translate(0,${chartHeight - marginBottom})`)
                .call(d3.axisBottom(x).tickSizeOuter(0));
    
            svg.append("g")
                .attr("class", "y-axis")
                .attr("transform", `translate(${marginLeft},0)`)
                .call(d3.axisLeft(y).tickFormat(d3.format(".2s")))
                .call(g => g.select(".domain").remove());
    
        }
    
        // 单独的图表3绘制函数
        function createChart3(svg, data) {
    
            const keys = ["AI", "CMA", "DSA"];
    
            const x = d3.scaleBand()
                .domain(data.map(d => d.year))
                .range([marginLeft, chartWidth - marginRight])
                .padding(0.1);
    
            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.AI + d.CMA + d.DSA)]).nice()
                .range([chartHeight - marginBottom, marginTop]);
    
            const color = d3.scaleOrdinal()
                .domain(keys)
                .range(["#22788a", "#68aab6", "#22475d"]);
    
            const stack = d3.stack()
                .keys(keys)
                .order(d3.stackOrderNone)
                .offset(d3.stackOffsetNone);
    
            const series = stack(data);
    
            svg.attr("viewBox", [0, 0, chartWidth, chartHeight])
                .attr("style", "width: 100%; height: 100%;");
    
            svg.append("g")
                .attr("class", "bars")
                .selectAll("g")
                .data(series)
                .join("g")
                .attr("fill", d => color(d.key))
                .selectAll("rect")
                .data(d => d)
                .join("rect")
                .attr("x", d => x(d.data.year))
                .attr("y", d => y(d[1]))
                .attr("height", d => y(d[0]) - y(d[1]))
                .attr("width", x.bandwidth())
                .on('click', function (e, d) {
    
                    highlightByDepartmentAndYear(d3.select(this.parentNode).datum().key, String(d.data.year))
                })
                .on("mouseover", function (event, d) {
                    const key = d3.select(this.parentNode).datum().key;
                    const value = d[1] - d[0];
                    d3.select(this)
                        .attr("fill", d3.rgb(color(key)).darker(1.2));
                    tooltip.transition().duration(200).style("opacity", .9);
                    tooltip.html(`${key}<br>${value}`)
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY - 28) + "px");
                })
                .on("mouseout", function (event, d) {
                    const key = d3.select(this.parentNode).datum().key;
                    d3.select(this)
                        .attr("fill", color(key));
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            svg.append("g")
                .attr("class", "x-axis")
                .attr("transform", `translate(0,${chartHeight - marginBottom})`)
                .call(d3.axisBottom(x).tickSizeOuter(0));
    
            svg.append("g")
                .attr("class", "y-axis")
                .attr("transform", `translate(${marginLeft},0)`)
                .call(d3.axisLeft(y).tickFormat(d3.format(".2s")))
                .call(g => g.select(".domain").remove());
        }
    
        // 单独的图表4绘制函数
        function createChart4(svg, data) {
            const colorScale_auther_chart = d3.scaleLinear()
                .domain([18, 249])
                .range(["#e0f3e5", "#007f5f"]);
    
            const x = d3.scaleBand()
                .domain(data.map(d => d.author))
                .range([marginLeft, chartWidth - marginRight])
                .padding(0.1);
    
            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.papers)]).nice()
                .range([chartHeight - marginBottom, marginTop]);
    
            svg.attr("viewBox", [0, 0, chartWidth, chartHeight])
                .attr("style", "width: 100%; height: 100%;");
    
            svg.append("g")
                .attr("class", "bars")
                .selectAll("rect")
                .data(data)
                .join("rect")
                .attr("fill", d => colorScale_auther_chart(d.papers))
                .attr("x", d => x(d.author))
                .attr("y", d => y(d.papers))
                .attr("height", d => y(0) - y(d.papers))
                .attr("width", x.bandwidth())
                .on('click', function(e, d) {
                    const sNode = {'name': d.author}
                    highlightNeighborhood(sNode)
                })
                .on("mouseover", function (e, d) {
                    // 获取当前颜色并在鼠标悬浮时加深
                    const currentColor = d3.select(this).attr("fill");
                    d3.select(this)
                        .attr("fill", d3.rgb(currentColor).darker(1.2));
                    tooltip.transition().duration(200).style("opacity", .9);
                    tooltip.html(
                        () => {
                            return d.author + '<br>' + d.papers
                        })
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY - 28) + "px");
                })
                .on("mouseout", function () {
                    // 恢复原来的颜色
                    const originalColor = d3.select(this).attr("fill");
                    d3.select(this).attr("fill", d3.rgb(originalColor).brighter(1.2));
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            svg.append("g")
                .attr("class", "x-axis")
                .attr("transform", `translate(0,${chartHeight - marginBottom})`)
                .call(d3.axisBottom(x).tickSizeOuter(0).tickFormat(d => data.length > 20 ? '...' : d.split(' ')[1]))
                .selectAll("text")
                .style("text-anchor", "middle")
                .attr("font-size", "10px");
    
            svg.append("g")
                .attr("class", "y-axis")
                .attr("transform", `translate(${marginLeft},0)`)
                .call(d3.axisLeft(y).tickFormat(d3.format(".2s")))
                .call(g => g.select(".domain").remove());
    
            if (data.length > 10) {
                svg.selectAll(".x-axis text")
                    .text('...');
            }
    
            if (data.length > 10) {
                zoom_chart(svg, x, chartWidth, chartHeight);
            }
        }
    
    
    </script>
    
    <script>
        $(document).ready(function () {
            // 分别调用每个图表的绘制函数
            
            
            
            
            loadDataForChart()
        });
    
        function loadDataForChart() {
            $.ajax({
                url: 'http://127.0.0.1:8000/data_neo4j/forChart',
                type: 'get',
                data: {},
                success: function (res) {
                    let request = JSON.parse(res)
                    createChart1(d3.select("#chart1"), request['chart1'])
                    createChart2(d3.select("#chart2"), request['chart2'])
                    createChart3(d3.select("#chart3"), request['chart3'])
                    createChart4(d3.select("#chart4"), request['chart4'])
                }
            });
        }
    </script>
    
    
    
    </div>
            </div>
    
            <div class="middle-container">
                <div class="title-box">Knowledge Graph
                    <div class="dropdown-container">
                        <span id="min_citation" class="local-label">Min_citation:</span>
                        <button id="dropdownButton" class="dropdown-button">20</button>
                        <div id="dropdownMenu" class="dropdown-menu">
                            <a href="#" onclick="selectOption(0)" class="">0</a>
                            <a href="#" onclick="selectOption(20)" class="">20</a>
                            <a href="#" onclick="selectOption(40)" class="">40</a>
                            <a href="#" onclick="selectOption(60)" class="">60</a>
                            <a href="#" onclick="selectOption(80)" class="">80</a>
                            <a href="#" onclick="selectOption(100)" class="">100</a>
                            <script>
                                let min_citation = 20;
                                const dropdownButton = document.getElementById('dropdownButton');
                                const dropdownMenu = document.getElementById('dropdownMenu');
    
                                dropdownButton.addEventListener('click', toggleDropdown);
    
                                function toggleDropdown() {
                                    dropdownMenu.classList.toggle('show');
                                }
    
                                function selectOption(option) {
                                    min_citation = option;
                                    filterNode(entity_data);
                                    
                                    dropdownButton.textContent = option;
                                    dropdownMenu.classList.remove('show');
                                }
    
                                function disableComponent() {
                                    dropdownButton.classList.add('disabled');
                                    dropdownButton.disabled = true;
    
                                    const links = dropdownMenu.querySelectorAll('a');
                                    links.forEach(link => {
                                        link.classList.add('disabled');
                                    });
    
                                    // Remove event listeners to prevent interaction
                                    dropdownButton.removeEventListener('click', toggleDropdown);
                                }
    
                                function enableComponent() {
                                    dropdownButton.classList.remove('disabled');
                                    dropdownButton.disabled = false;
    
                                    const links = dropdownMenu.querySelectorAll('a');
                                    links.forEach(link => {
                                        link.classList.remove('disabled');
                                    });
    
                                    // Re-add event listeners
                                    dropdownButton.addEventListener('click', toggleDropdown);
                                }
    
                                // Close dropdown if clicked outside
                                window.addEventListener('click', (event) => {
                                    if (!dropdownButton.contains(event.target) && !dropdownMenu.contains(event.target)) {
                                        dropdownMenu.classList.remove('show');
                                    }
                                });
                            </script>
                        </div>
                        <button class="refresh-btn" onclick="removeGraphNode()">
                            <!-- 嵌入SVG图标 -->
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                                <path d="M12 4V1L8 5l4 4V6c3.3 0 6 2.7 6 6 0 3.3-2.7 6-6 6s-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
    
                <div class="content-box hidden" id="knowledgeGraph" style="height: calc(100% - 30px)">
    
    
    
        <meta charset="UTF-8">
        <title>KG</title>
        <link rel="stylesheet" href="/static/css/for_graph.css">
    
    
    
    <div id="container_kg" class="kg_container" style="height: 100%;width: 100%">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    <svg id="graph_svg" viewBox="-1782.9986607276683 -1763.515799269151 5752.275248995874 4637.554376721206" style="width: 100%; height: auto;"><marker id="positiveMarker" orient="auto" stroke-width="2" markerUnits="userSpaceOnUse" viewBox="0 -5 10 10" refX="0" refY="0" markerWidth="12" markerHeight="12"><path d="M 0 -5 L 10 0 L 0 5" fill="grey" stroke-opacity="0.1"></path></marker><marker id="negativeMarker" orient="auto" stroke-width="2" markerUnits="userSpaceOnUse" viewBox="0 -5 10 10" refX="0" refY="0" markerWidth="12" markerHeight="12"><path d="M 10 -5 L 0 0 L 10 5" fill="grey" stroke-opacity="0.1"></path></marker><g id="graph_svg_g" transform="translate(-391.0019220890572,-2196.5936624743304) scale(2.6390158215457906)"><g stroke="grey"><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2048.253625513246 1547.1801910820186 L 2196.896865499676 1566.1060591578757" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 1158.7156079656627 2446.7195000121746" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2923.707290494584 249.47615785684576 L 3005.168050481504 117.32812078908913" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 1060.7586409298563 2426.131590381179" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1934.257268741037 78.83124329232912" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2989.3902175194858 1116.9932050864973 L 3355.061821989302 1266.3624625212121" stroke="#ddd"></path><path stroke-opacity="0.6" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 461.77944649165795 1193.9035928974542" stroke="grey"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 138.09265258131305 490.22079480952857 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -54.873179739975335 -1500.9344958276236 L 248.71336707157278 -1478.7826110397248" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -672.2589605510454 -606.8321003623864 L -581.3401636521537 -723.8341727261005" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 288.79503872412806 512.5383387135905" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 969.3732685410777 1335.2848803348281 L 1002.3642897567679 1712.104595015264" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 488.5790403595405 1003.1046986354646" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2923.707290494584 249.47615785684576 L 3282.5216268990284 34.43707607049739" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1581.1372985475623 38.84101616958933 L 1741.5480921288424 380.6304333685223" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 593.7232936698894 -193.0943959936327 L 917.5137027481912 -350.79064308419595" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -104.9561416670817 1214.7885558363475 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1739.5308724258923 152.62328933563109" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 917.5137027481912 -350.79064308419595 L 1339.5388107925971 -309.30344364061096" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 920.2866790899424 -1031.9471538083078 L 1187.4061520154512 -1236.2206150198404" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2603.1409995199197 1504.2956686132907 L 2848.5913973471525 1329.5240807095283" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 847.9811457859173 2051.4275610966392" stroke="#ddd"></path><path stroke-opacity="0.6" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -220.7930922788009 885.2469024856002 L 199.3276464924289 848.3058901942002" stroke="grey"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 511.9441666251061 -1435.8897754130812 L 795.2878280326294 -1759.5780129658017" stroke="#ddd"></path><path stroke-opacity="0.6" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 40.063328544261424 1120.5861212370924 L 199.3276464924289 848.3058901942002" stroke="grey"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1778.0302681314438 -41.360704693573176" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2603.1409995199197 1504.2956686132907 L 2938.2406574611473 1426.7710199152584" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 751.0150139367863 2846.536852962378" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1163.8022774596848 -44.846557440910786 L 1581.1372985475623 38.84101616958933" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 153.98344131163773 1763.0283236913515 L 1002.3642897567679 1712.104595015264" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1916.1922082188198 177.71993751716886" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1856.659810375236 19.60659553225977" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1581.1372985475623 38.84101616958933 L 1845.8603180840714 -189.9511638300889" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 380.919199700297 1254.305585119856" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -966.7442543624286 2082.643749810686 L -740.7934034946849 1717.5977789295562" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 566.611069761536 941.1780514284817" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2989.3902175194858 1116.9932050864973 L 3404.479470795938 1101.066867742836" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 2021.022915711912 494.67058228630003" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -534.5498792588605 -1189.1234752310581 L -277.44339970295056 -1290.2774602284615" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -1007.2965462755541 -208.58072008395783 L -589.5843003674073 -170.38729662903813" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -589.5843003674073 -170.38729662903813 L -250.99074884477196 -407.37176020436345" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -54.873179739975335 -1500.9344958276236 L 335.50512842359586 -1627.8585728995254" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1732.0339374811235 284.5953011806358" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1581.1372985475623 38.84101616958933 L 1638.8855867376446 309.2205555878848" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 151.22002893745403 -696.6574967475754 L 917.5137027481912 -350.79064308419595" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -760.0888463648521 2127.4792596544667 L -740.7934034946849 1717.5977789295562" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 480.9042168174192 61.59094512067531 L 650.0907378106963 415.2315207955285" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1007.8629383236038 -782.1184511209423 L 1184.9035185760251 -955.3419249431153" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 290.8621770871128 1211.5720170800944" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -863.1749674501184 2117.3612260736895 L -740.7934034946849 1717.5977789295562" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2923.707290494584 249.47615785684576 L 3102.469615859188 140.60070483933947" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1495.2540954629296 -89.66066816284288 L 1581.1372985475623 38.84101616958933" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -672.2589605510454 -606.8321003623864 L -389.1507936882505 -920.5577673104762" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 1109.0081183212376 2638.755945337581" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -16.291027312192917 1038.8267298528767 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 1448.648572476159 644.5233818254201 L 2245.7024901691675 747.7863664739338" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -534.5498792588605 -1189.1234752310581 L -145.97830296242446 -1113.4710134011855" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 1077.4089068091516 2327.6490802836033" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -589.2734037235664 -1408.0777612106624 L -534.5498792588605 -1189.1234752310581" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -163.25191125606767 1136.6675385444335 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M -534.5498792588605 -1189.1234752310581 L 151.22002893745403 -696.6574967475754" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 2080.102422107353 337.57828703101603" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1002.3642897567679 1712.104595015264 L 1162.0948816591435 1338.3642574471885" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -740.7934034946849 1717.5977789295562 L -562.947530980472 2070.1130256914203" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -740.7934034946849 1717.5977789295562 L -398.8810436812321 1832.7738103065917" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 920.2866790899424 -1031.9471538083078 L 972.3879497060406 -1175.19734476006" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 479.428848933397 2139.641839404959 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -169.07489029821235 963.3419916193023 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 920.2866790899424 -1031.9471538083078 L 1155.5057822212084 -1336.9631999483513" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 36.57900363760882 899.083014581157 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 561.9538505731799 2503.9764652878903 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1810.6633148509122 222.1031149116158" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1925.918960503188 459.24556679817795" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -899.0984874466527 -396.2350938702419 L -589.5843003674073 -170.38729662903813" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1007.8629383236038 -782.1184511209423 L 1331.4377165414305 -542.8937556827202" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -241.89107307277675 715.9232154859657 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2989.3902175194858 1116.9932050864973 L 3285.6573026780407 1028.6788824466714" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -92.29682826608037 67.7893623839605 L 71.46972316782316 -253.72989610806556" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -271.0854730885869 969.1150111476446 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 38.931785256358275 638.0281766505583 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1895.5745193378402 268.5700670844268" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 887.2094106831164 2336.1514883144355" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 301.1925673431892 658.4498387158574" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 589.604310301009 762.2034937414494" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 1002.3642897567679 1712.104595015264 L 2245.7024901691675 747.7863664739338" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -216.3332150466662 1051.1359196181495 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 313.52149354637174 2501.000879991067 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -534.5498792588605 -1189.1234752310581 L -474.8931780827981 -1051.8654216834502" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -589.5843003674073 -170.38729662903813 L -206.1849738490393 -141.93067510267994" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 410.45025930558904 1064.459090689024" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 407.89737545409713 596.6653270890247" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1665.6935596566595 214.7855729987107" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 480.9042168174192 61.59094512067531 L 673.4990658908898 300.6449441695511" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 547.2923278713502 -403.66232712846437 L 917.5137027481912 -350.79064308419595" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 952.7645586997572 1558.518514207754 L 1002.3642897567679 1712.104595015264" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 752.2978002298548 2297.8844421051654" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 433.0457760634204 2629.575736063753 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -761.8375402697609 -112.33636474745931 L -589.5843003674073 -170.38729662903813" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 221.76009630442877 438.4585114703805" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -58.579969776129694 1127.3077873220257 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1623.5996681334889 1254.4372217592813 L 1942.6956491745884 1316.243547258722" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2603.1409995199197 1504.2956686132907 L 2860.5259640578984 1830.05886734207" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -54.873179739975335 -1500.9344958276236 L 139.63268077698126 -1834.9361244605425" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1986.9410010052263 297.9628418270147" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 954.4341761389975 2598.0811299406873" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2048.253625513246 1547.1801910820186 L 2383.222843012085 1281.8116682440616" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2603.1409995199197 1504.2956686132907 L 2754.0907443288165 1502.3897510650797" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 96.75207019908889 978.1456661902037 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1581.1372985475623 38.84101616958933 L 1720.3191993271637 475.5073674289615" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -589.5843003674073 -170.38729662903813 L -239.64314038340106 -281.8611843234601" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -534.5498792588605 -1189.1234752310581 L -369.17455920099775 -1483.4824587337591" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2048.253625513246 1547.1801910820186 L 2355.5166121203206 1743.2864450704153" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2603.1409995199197 1504.2956686132907 L 2745.417362801572 1251.1219360780835" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 920.2866790899424 -1031.9471538083078 L 1318.4880655815189 -1200.4623342703796" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -534.5498792588605 -1189.1234752310581 L -428.46628819582344 -1374.5206187173828" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -589.5843003674073 -170.38729662903813 L -342.5859352775476 -210.97463422414987" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 1598.417970955727 144.62316887382227 L 2245.7024901691675 747.7863664739338" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -1048.033285210805 1997.9899789334793 L -740.7934034946849 1717.5977789295562" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M -92.29682826608037 67.7893623839605 L 151.22002893745403 -696.6574967475754" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -115.30731231085089 1047.7395464535955 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 950.1431139065238 2498.3587758904637" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1820.5159655759542 322.2078103896379" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1598.417970955727 144.62316887382227 L 1918.0713734756487 -121.51114186507867" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 451.93001898927446 2322.6148372784683 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.6" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 511.9441666251061 -1435.8897754130812 L 651.841207729654 -1763.7949790682535" stroke="grey"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 435.7488781796656 870.7423773492396" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 154.2194602445921 625.8763098124441 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2048.253625513246 1547.1801910820186 L 2270.1163111677047 1286.6424486661545" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -54.873179739975335 -1500.9344958276236 L 89.30054005832869 -1253.8292292919293" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -534.5498792588605 -1189.1234752310581 L -169.39158552476584 -988.1328985529125" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -672.2589605510454 -606.8321003623864 L -667.7548498705711 -949.8550748920389" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1346.1151055624857 396.8908726466175 L 1581.1372985475623 38.84101616958933" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1570.1110897884164 239.97241459300852 L 1648.2604531708505 408.84978873402196" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 47.67482131883942 1294.9719218846603 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -42.97434603317128 549.2911486774304 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 254.2038185133275 1077.8685498807133" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 480.9042168174192 61.59094512067531 L 775.9027446851047 286.49168701853654" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -141.18183608398996 711.9706670924581 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -740.7934034946849 1717.5977789295562 L -430.90161713712644 1998.7212415949396" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 511.9441666251061 -1435.8897754130812 L 875.3399122414288 -1665.2617594737824" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 595.8636699055396 2063.770676839093 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 990.1579262904208 2260.799053446895" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -54.873179739975335 -1500.9344958276236 L 260.778237695258 -1251.5940449416503" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2.67776965277496 730.0330229591659 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 1089.0801224503848 2228.290732333723" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -54.873179739975335 -1500.9344958276236 L 214.3071221768354 -1697.51499530993" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1581.1372985475623 38.84101616958933 L 1777.922302575867 -263.3676427255727" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 2030.868250594575 59.98877452597288" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -68.11659084851489 956.2331215250691 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2048.253625513246 1547.1801910820186 L 2411.407512581139 1564.1332843410876" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M -589.5843003674073 -170.38729662903813 L 151.22002893745403 -696.6574967475754" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1623.5996681334889 1254.4372217592813 L 1875.8052929766557 922.012283426507" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -92.29682826608037 67.7893623839605 L 156.66043778185158 -114.50462251502049" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 917.5137027481912 -350.79064308419595 L 1258.9284656669822 -114.28822850737207" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -1060.0345050062801 1876.467824008285 L -740.7934034946849 1717.5977789295562" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -927.6758488857629 61.418025266080534 L -589.5843003674073 -170.38729662903813" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -939.2674542402477 -1079.8549934494783 L -534.5498792588605 -1189.1234752310581" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1394.4074407851695 783.5681894889398 L 1448.648572476159 644.5233818254201" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1808.8731103745706 519.0437210941676" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 917.5137027481912 -350.79064308419595 L 1107.5919616848414 -653.1419430766363" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2989.3902175194858 1116.9932050864973 L 3282.874769363731 882.8387393284327" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2603.1409995199197 1504.2956686132907 L 2743.767108881195 1643.491069905305" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 2245.7024901691675 747.7863664739338 L 2923.707290494584 249.47615785684576" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 474.67536792987926 2794.2725370153544 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 748.3438432567987 2046.6598764571497" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -50.94556014470042 1295.7194947922387 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 244.35224245921296 1298.156883691671" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1581.1372985475623 38.84101616958933 L 1587.5511842086958 -290.07046412720337" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -589.5843003674073 -170.38729662903813 L -261.0681204113299 72.19098712192248" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 570.9002040842693 664.0670510767218" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 506.82109060337825 581.7035668101901" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1448.648572476159 644.5233818254201 L 1473.67895098095 258.4600243868364" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1448.648572476159 644.5233818254201 L 1534.6272797870383 781.4516540883128" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 151.22002893745403 -696.6574967475754 L 1007.8629383236038 -782.1184511209423" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -249.56323833145436 2495.0796487717553 L 115.49098985340522 2338.749679128511" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -29.910894127531268 824.6366732139935 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -283.274712229886 808.2576623363267 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1581.1372985475623 38.84101616958933 L 1663.6181872466223 -91.61626395775346" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 930.2100603058536 2108.392454828961" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 93.02969270666127 1204.846017661676 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1007.8629383236038 -782.1184511209423 L 1330.711424599524 -919.8186877027462" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -589.5843003674073 -170.38729662903813 L -432.39547006872715 -559.4898742672021" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 289.4733200320561 974.5229605022777" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 151.22002893745403 -696.6574967475754 L 920.2866790899424 -1031.9471538083078" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1552.0659883815026 435.2072503297558 L 1581.1372985475623 38.84101616958933" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 480.9042168174192 61.59094512067531 L 530.0779656401091 205.15402061089583" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M -249.56323833145436 2495.0796487717553 L 153.98344131163773 1763.0283236913515" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M -54.873179739975335 -1500.9344958276236 L 151.22002893745403 -696.6574967475754" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -195.46540640931374 627.2757473906759 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 20.767429120434024 447.3195439571962 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1546.8033227238839 682.1360630786196 L 1648.2604531708505 408.84978873402196" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -1141.3322861835595 1806.4487812600403 L -740.7934034946849 1717.5977789295562" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 2245.7024901691675 747.7863664739338 L 2989.3902175194858 1116.9932050864973" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 917.5137027481912 -350.79064308419595 L 1105.630070260959 36.578503850693515" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1448.648572476159 644.5233818254201 L 1609.247653084373 991.0950948632261" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1521.5518611235268 -365.2313377031975 L 1581.1372985475623 38.84101616958933" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 153.98344131163773 1763.0283236913515 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -740.7934034946849 1717.5977789295562 L -640.0011929244481 1930.6989557152592" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 507.29931747091484 2696.204654724407 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 2245.7024901691675 747.7863664739338" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 401.8721180863277 2454.080264719064 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1671.1709219217587 79.24864078208876" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1893.747228782448 643.1235451569788" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 848.0479713064459 2827.8484573019596" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -118.09678831158453 869.6748049640008 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1433.5574803782313 990.0616932074604 L 1448.648572476159 644.5233818254201" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 634.1729779003621 867.9006607404593" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 964.3995519652225 2399.6667810329163" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 56.471812434022574 540.1844827575752 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1941.4839168742603 555.4334937537953" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 480.9042168174192 61.59094512067531 L 630.3328354306907 83.96933290237237" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 2603.1409995199197 1504.2956686132907 L 2734.9869724516634 1905.8490854403663" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -740.7934034946849 1717.5977789295562 L -650.0472842292702 2135.338713230581" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 585.4075186924197 1039.3537128321511" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 920.2866790899424 -1031.9471538083078 L 924.4632133127628 -690.9504659259446" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1448.648572476159 644.5233818254201 L 1664.122205308526 683.3455067429434" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 151.22002893745403 -696.6574967475754 L 480.9042168174192 61.59094512067531" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 146.2457412820868 1289.6109394323205 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 882.5580363618379 -114.5955739876544 L 917.5137027481912 -350.79064308419595" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -589.5843003674073 -170.38729662903813 L -533.6976111205005 130.06879518025724" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M -740.7934034946849 1717.5977789295562 L 153.98344131163773 1763.0283236913515" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 319.81885376337345 416.7193905541172" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 477.79715125190177 702.2477869378754" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 748.3438432567987 2046.6598764571497 L 1002.3642897567679 1712.104595015264" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -78.47857400889795 456.3764105632069 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 522.2142882115335 1115.583723220819" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1581.1372985475623 38.84101616958933 L 1625.094786749365 504.02665936037886" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 2048.253625513246 1547.1801910820186 L 2245.7024901691675 747.7863664739338" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -589.5843003674073 -170.38729662903813 L -445.05492200755714 -258.54755508413916" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1448.648572476159 644.5233818254201 L 1528.6769481902495 532.039919900839" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1422.080948174357 -365.4020837294383 L 1581.1372985475623 38.84101616958933" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 917.5137027481912 -350.79064308419595 L 1226.5996622394919 -477.73281181178515" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1007.8629383236038 -782.1184511209423 L 1417.7271952321141 -848.2685898043561" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1448.648572476159 644.5233818254201 L 1692.3539913376308 779.6873579915442" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 338.2172753624473 2597.7029176179717 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -748.7011896266065 225.80610777069938 L -589.5843003674073 -170.38729662903813" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1623.5996681334889 1254.4372217592813 L 1928.2880152987384 1458.9613538969381" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 917.5137027481912 -350.79064308419595 L 1005.8199880414562 29.856265990495245" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 1623.5996681334889 1254.4372217592813 L 2245.7024901691675 747.7863664739338" stroke="#ddd"></path><path stroke-opacity="0.6" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -143.95203360894365 541.0380309216818 L 199.3276464924289 848.3058901942002" stroke="grey"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 1037.5681101694922 2773.631732386059" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 1581.1372985475623 38.84101616958933 L 2245.7024901691675 747.7863664739338" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -610.163918442153 -868.0599969355995 L -534.5498792588605 -1189.1234752310581" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 536.0394214305531 846.4674554611242" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 153.98344131163773 1763.0283236913515 L 951.727672656035 1835.3189312880565" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1764.9501804039485 57.8342775643857" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -666.4750335482946 -1113.4300140898063 L -534.5498792588605 -1189.1234752310581" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M -672.2589605510454 -606.8321003623864 L 151.22002893745403 -696.6574967475754" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1007.8629383236038 -782.1184511209423 L 1281.4593646934825 -771.4753482961567" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 2068.6909649078952 240.01420147183546" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 2014.264575336529 157.75681194248656" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1623.5996681334889 1254.4372217592813 L 1957.5665563727448 1054.320131045418" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 134.39229251347618 390.56535176641654 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -534.5498792588605 -1189.1234752310581 L -272.55275305815894 -1412.455748116249" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 1123.6202272671107 2540.1631094047752" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 2245.7024901691675 747.7863664739338 L 2603.1409995199197 1504.2956686132907" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -249.56323833145436 2495.0796487717553 L -30.498962592214948 2156.7607069823475" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -54.873179739975335 -1500.9344958276236 L 94.79668693006624 -1503.5001673691952" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 929.2708868762747 619.923492484013" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 151.22002893745403 -696.6574967475754 L 511.9441666251061 -1435.8897754130812" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 2003.8644515691315 397.52870142971227" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 369.1489107254636 1155.5927077741726" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 930.2100603058536 2108.392454828961 L 1002.3642897567679 1712.104595015264" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1301.5683621745952 676.5752719792615 L 1448.648572476159 644.5233818254201" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 139.90780282895298 1116.7420142238193 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 69.27355398326743 804.4598732169289 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1834.6693050001015 125.76819676733872" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1581.1372985475623 38.84101616958933 L 1686.033741002507 -300.1861108947825" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1623.5996681334889 1254.4372217592813 L 2035.7707660017008 1152.8551370617774" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1007.8629383236038 -782.1184511209423 L 1157.1271069868742 -746.5130239628228" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 571.710543941573 2771.3841476572834 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 929.2708868762747 619.923492484013 L 1648.2604531708505 408.84978873402196" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -705.7030054205164 -333.2455856001431 L -589.5843003674073 -170.38729662903813" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -820.4956353139071 -1279.6091190618947 L -534.5498792588605 -1189.1234752310581" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 869.6817879204793 1309.2295865831732 L 1002.3642897567679 1712.104595015264" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 917.5137027481912 -350.79064308419595 L 1013.4278368069834 -233.21000090776215" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -647.4297969074754 -1291.2840796566932 L -534.5498792588605 -1189.1234752310581" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 193.22839630832297 999.0973573793382 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -534.5498792588605 -1189.1234752310581 L -161.15594887136697 -1271.5522460033446" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1002.3642897567679 1712.104595015264 L 1064.6472632731939 1295.8447891542617" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 1013.1801273684994 2163.4204923295383" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 337.10306551121647 886.5326516092393" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 916.9842037639718 2690.171247955061" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 1016.2976433637549 2675.828058686904" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1542.6279689892533 336.64646288123953 L 1581.1372985475623 38.84101616958933" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 114.24255906823942 716.9721904578329 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 480.9042168174192 61.59094512067531 L 662.3902340533716 -50.53151568361267" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 213.5154226055937 706.5144556813017" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -3.7751267558992976 1209.3442410286852 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 345.02871136261257 2275.575028827012 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -589.8458280936339 -319.74947904334255 L -589.5843003674073 -170.38729662903813" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1912.8486561946474 362.8817035377533" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 199.3276464924289 848.3058901942002 L 387.89938052838204 498.63963230544636" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 917.5137027481912 -350.79064308419595 L 924.4632133127628 -690.9504659259446" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="5" id="[object Object]_BELONGS_TO_[object Object]" d="M 153.98344131163773 1763.0283236913515 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 480.9042168174192 61.59094512067531 L 897.836545252236 162.691562719423" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -589.5843003674073 -170.38729662903813 L -385.071880872269 -413.5143131203454" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 193.9920070249352 1200.8960977972454 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 668.7204623106196 2789.671660991137 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -672.2589605510454 -606.8321003623864 L -270.77587610851054 -728.3405912848683" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 529.5926941254837 2598.4606400562648 L 733.1957700418926 2456.5777644807517" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -534.5498792588605 -1189.1234752310581 L -481.10193973797936 -1529.8241346227865" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 733.1957700418926 2456.5777644807517 L 938.4645753002301 2787.5703360135253" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -183.45453611664365 797.1855362847211 L 199.3276464924289 848.3058901942002" stroke="#ddd"></path><path stroke-opacity="0.3" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M 1648.2604531708505 408.84978873402196 L 1833.134184616373 421.94010441772343" stroke="#ddd"></path><path stroke-opacity="0.6" stroke-width="3" id="[object Object]_OWNED_BY_[object Object]" d="M -96.95794580595884 629.5022598594925 L 199.3276464924289 848.3058901942002" stroke="grey"></path></g><g stroke="black" stroke-width="1.5"><circle r="20" fill="#ddd" class="circle" cx="1686.033741002507" cy="-300.1861108947825"></circle><circle r="20" fill="#ddd" class="circle" cx="2030.868250594575" cy="59.98877452597288"></circle><circle r="40" fill="#ddd" class="circle" cx="-589.8458280936339" cy="-319.74947904334255"></circle><circle r="40" fill="#ddd" class="circle" cx="972.3879497060406" cy="-1175.19734476006"></circle><circle r="50" fill="#ddd" class="circle" cx="3005.168050481504" cy="117.32812078908913"></circle><circle r="20" fill="#ddd" class="circle" cx="1013.1801273684994" cy="2163.4204923295383"></circle><circle r="20" fill="#ddd" class="circle" cx="1473.67895098095" cy="258.4600243868364"></circle><circle r="20" fill="#ddd" class="circle" cx="-369.17455920099775" cy="-1483.4824587337591"></circle><circle r="50" fill="#ddd" class="circle" cx="114.24255906823942" cy="716.9721904578329"></circle><circle r="30" fill="#ddd" class="circle" cx="1834.6693050001015" cy="125.76819676733872"></circle><circle r="40" fill="#ddd" class="circle" cx="1663.6181872466223" cy="-91.61626395775346"></circle><circle r="30" fill="#ddd" class="circle" cx="1895.5745193378402" cy="268.5700670844268"></circle><circle r="20" fill="#ddd" class="circle" cx="407.89737545409713" cy="596.6653270890247"></circle><circle r="20" fill="#ddd" class="circle" cx="2068.6909649078952" cy="240.01420147183546"></circle><circle r="20" fill="#ddd" class="circle" cx="1107.5919616848414" cy="-653.1419430766363"></circle><circle r="20" fill="#ddd" class="circle" cx="1875.8052929766557" cy="922.012283426507"></circle><circle r="20" fill="#ddd" class="circle" cx="634.1729779003621" cy="867.9006607404593"></circle><circle r="20" fill="#ddd" class="circle" cx="1741.5480921288424" cy="380.6304333685223"></circle><circle r="20" fill="#ddd" class="circle" cx="522.2142882115335" cy="1115.583723220819"></circle><circle r="30" fill="#ddd" class="circle" cx="1986.9410010052263" cy="297.9628418270147"></circle><circle r="20" fill="#ddd" class="circle" cx="290.8621770871128" cy="1211.5720170800944"></circle><circle r="20" fill="#ddd" class="circle" cx="1226.5996622394919" cy="-477.73281181178515"></circle><circle r="30" fill="#ddd" class="circle" cx="2003.8644515691315" cy="397.52870142971227"></circle><circle r="20" fill="#ddd" class="circle" cx="3282.874769363731" cy="882.8387393284327"></circle><circle r="30" fill="#ddd" class="circle" cx="1925.918960503188" cy="459.24556679817795"></circle><circle r="20" fill="#ddd" class="circle" cx="-16.291027312192917" cy="1038.8267298528767"></circle><circle r="20" fill="#ddd" class="circle" cx="1060.7586409298563" cy="2426.131590381179"></circle><circle r="20" fill="#ddd" class="circle" cx="-272.55275305815894" cy="-1412.455748116249"></circle><circle r="40" fill="#ddd" class="circle" cx="193.22839630832297" cy="999.0973573793382"></circle><circle r="20" fill="#ddd" class="circle" cx="-650.0472842292702" cy="2135.338713230581"></circle><circle r="50" fill="#ddd" class="circle" cx="96.75207019908889" cy="978.1456661902037"></circle><circle r="30" fill="#ddd" class="circle" cx="3102.469615859188" cy="140.60070483933947"></circle><circle r="20" fill="#ddd" class="circle" cx="-161.15594887136697" cy="-1271.5522460033446"></circle><circle r="20" fill="#ddd" class="circle" cx="-271.0854730885869" cy="969.1150111476446"></circle><circle r="100" fill="#ddd" class="circle" cx="2245.7024901691675" cy="747.7863664739338"></circle><circle r="30" fill="#ddd" class="circle" cx="-118.09678831158453" cy="869.6748049640008"></circle><circle r="20" fill="rgb(220, 121, 145)" class="circle" cx="-143.95203360894365" cy="541.0380309216818"></circle><circle r="20" fill="#ddd" class="circle" cx="1720.3191993271637" cy="475.5073674289615"></circle><circle r="40" fill="#ddd" class="circle" cx="69.27355398326743" cy="804.4598732169289"></circle><circle r="20" fill="#ddd" class="circle" cx="138.09265258131305" cy="490.22079480952857"></circle><circle r="20" fill="#ddd" class="circle" cx="319.81885376337345" cy="416.7193905541172"></circle><circle r="20" fill="#ddd" class="circle" cx="-667.7548498705711" cy="-949.8550748920389"></circle><circle r="30" fill="#ddd" class="circle" cx="301.1925673431892" cy="658.4498387158574"></circle><circle r="30" fill="#ddd" class="circle" cx="2745.417362801572" cy="1251.1219360780835"></circle><circle r="20" fill="#ddd" class="circle" cx="2270.1163111677047" cy="1286.6424486661545"></circle><circle r="100" fill="#ddd" class="circle" cx="153.98344131163773" cy="1763.0283236913515"></circle><circle r="20" fill="#ddd" class="circle" cx="1893.747228782448" cy="643.1235451569788"></circle><circle r="20" fill="#ddd" class="circle" cx="589.604310301009" cy="762.2034937414494"></circle><circle r="20" fill="#ddd" class="circle" cx="566.611069761536" cy="941.1780514284817"></circle><circle r="30" fill="#ddd" class="circle" cx="2848.5913973471525" cy="1329.5240807095283"></circle><circle r="20" fill="rgb(225, 149, 167)" class="circle" cx="461.77944649165795" cy="1193.9035928974542"></circle><circle r="20" fill="#ddd" class="circle" cx="244.35224245921296" cy="1298.156883691671"></circle><circle r="30" fill="#ddd" class="circle" cx="-445.05492200755714" cy="-258.54755508413916"></circle><circle r="20" fill="#ddd" class="circle" cx="47.67482131883942" cy="1294.9719218846603"></circle><circle r="20" fill="#ddd" class="circle" cx="-145.97830296242446" cy="-1113.4710134011855"></circle><circle r="20" fill="#ddd" class="circle" cx="748.3438432567987" cy="2046.6598764571497"></circle><circle r="50" fill="#ddd" class="circle" cx="1528.6769481902495" cy="532.039919900839"></circle><circle r="30" fill="#ddd" class="circle" cx="1671.1709219217587" cy="79.24864078208876"></circle><circle r="20" fill="#ddd" class="circle" cx="-398.8810436812321" cy="1832.7738103065917"></circle><circle r="20" fill="#ddd" class="circle" cx="-169.39158552476584" cy="-988.1328985529125"></circle><circle r="20" fill="rgb(225, 149, 167)" class="circle" cx="651.841207729654" cy="-1763.7949790682535"></circle><circle r="20" fill="#ddd" class="circle" cx="-30.498962592214948" cy="2156.7607069823475"></circle><circle r="20" fill="#ddd" class="circle" cx="1957.5665563727448" cy="1054.320131045418"></circle><circle r="20" fill="#ddd" class="circle" cx="924.4632133127628" cy="-690.9504659259446"></circle><circle r="20" fill="#ddd" class="circle" cx="1123.6202272671107" cy="2540.1631094047752"></circle><circle r="20" fill="#ddd" class="circle" cx="1625.094786749365" cy="504.02665936037886"></circle><circle r="20" fill="#ddd" class="circle" cx="869.6817879204793" cy="1309.2295865831732"></circle><circle r="20" fill="#ddd" class="circle" cx="1155.5057822212084" cy="-1336.9631999483513"></circle><circle r="20" fill="#ddd" class="circle" cx="-3.7751267558992976" cy="1209.3442410286852"></circle><circle r="20" fill="#ddd" class="circle" cx="71.46972316782316" cy="-253.72989610806556"></circle><circle r="20" fill="#ddd" class="circle" cx="1109.0081183212376" cy="2638.755945337581"></circle><circle r="20" fill="#ddd" class="circle" cx="-104.9561416670817" cy="1214.7885558363475"></circle><circle r="20" fill="#ddd" class="circle" cx="-163.25191125606767" cy="1136.6675385444335"></circle><circle r="20" fill="#ddd" class="circle" cx="-216.3332150466662" cy="1051.1359196181495"></circle><circle r="20" fill="#ddd" class="circle" cx="969.3732685410777" cy="1335.2848803348281"></circle><circle r="20" fill="#ddd" class="circle" cx="2938.2406574611473" cy="1426.7710199152584"></circle><circle r="20" fill="#ddd" class="circle" cx="1339.5388107925971" cy="-309.30344364061096"></circle><circle r="20" fill="rgb(230, 177, 190)" class="circle" cx="-220.7930922788009" cy="885.2469024856002"></circle><circle r="20" fill="#ddd" class="circle" cx="2035.7707660017008" cy="1152.8551370617774"></circle><circle r="30" fill="#ddd" class="circle" cx="1664.122205308526" cy="683.3455067429434"></circle><circle r="40" fill="#ddd" class="circle" cx="36.57900363760882" cy="899.083014581157"></circle><circle r="100" fill="#ddd" class="circle" cx="151.22002893745403" cy="-696.6574967475754"></circle><circle r="20" fill="#ddd" class="circle" cx="1162.0948816591435" cy="1338.3642574471885"></circle><circle r="20" fill="#ddd" class="circle" cx="1064.6472632731939" cy="1295.8447891542617"></circle><circle r="20" fill="#ddd" class="circle" cx="1552.0659883815026" cy="435.2072503297558"></circle><circle r="20" fill="#ddd" class="circle" cx="-141.18183608398996" cy="711.9706670924581"></circle><circle r="30" fill="#ddd" class="circle" cx="1184.9035185760251" cy="-955.3419249431153"></circle><circle r="50" fill="#ddd" class="circle" cx="-474.8931780827981" cy="-1051.8654216834502"></circle><circle r="30" fill="#ddd" class="circle" cx="-342.5859352775476" cy="-210.97463422414987"></circle><circle r="20" fill="#ddd" class="circle" cx="139.63268077698126" cy="-1834.9361244605425"></circle><circle r="30" fill="#ddd" class="circle" cx="916.9842037639718" cy="2690.171247955061"></circle><circle r="40" fill="#ddd" class="circle" cx="1665.6935596566595" cy="214.7855729987107"></circle><circle r="30" fill="#ddd" class="circle" cx="3285.6573026780407" cy="1028.6788824466714"></circle><circle r="20" fill="#ddd" class="circle" cx="848.0479713064459" cy="2827.8484573019596"></circle><circle r="20" fill="rgb(225, 149, 167)" class="circle" cx="-96.95794580595884" cy="629.5022598594925"></circle><circle r="20" fill="#ddd" class="circle" cx="-42.97434603317128" cy="549.2911486774304"></circle><circle r="20" fill="#ddd" class="circle" cx="20.767429120434024" cy="447.3195439571962"></circle><circle r="20" fill="#ddd" class="circle" cx="1856.659810375236" cy="19.60659553225977"></circle><circle r="20" fill="#ddd" class="circle" cx="214.3071221768354" cy="-1697.51499530993"></circle><circle r="20" fill="#ddd" class="circle" cx="2383.222843012085" cy="1281.8116682440616"></circle><circle r="20" fill="#ddd" class="circle" cx="-430.90161713712644" cy="1998.7212415949396"></circle><circle r="40" fill="#ddd" class="circle" cx="2754.0907443288165" cy="1502.3897510650797"></circle><circle r="30" fill="#ddd" class="circle" cx="1739.5308724258923" cy="152.62328933563109"></circle><circle r="20" fill="#ddd" class="circle" cx="571.710543941573" cy="2771.3841476572834"></circle><circle r="30" fill="#ddd" class="circle" cx="38.931785256358275" cy="638.0281766505583"></circle><circle r="20" fill="#ddd" class="circle" cx="-610.163918442153" cy="-868.0599969355995"></circle><circle r="30" fill="#ddd" class="circle" cx="154.2194602445921" cy="625.8763098124441"></circle><circle r="20" fill="#ddd" class="circle" cx="795.2878280326294" cy="-1759.5780129658017"></circle><circle r="20" fill="#ddd" class="circle" cx="474.67536792987926" cy="2794.2725370153544"></circle><circle r="30" fill="#ddd" class="circle" cx="1692.3539913376308" cy="779.6873579915442"></circle><circle r="20" fill="#ddd" class="circle" cx="313.52149354637174" cy="2501.000879991067"></circle><circle r="20" fill="#ddd" class="circle" cx="1258.9284656669822" cy="-114.28822850737207"></circle><circle r="30" fill="#ddd" class="circle" cx="1542.6279689892533" cy="336.64646288123953"></circle><circle r="20" fill="#ddd" class="circle" cx="1934.257268741037" cy="78.83124329232912"></circle><circle r="40" fill="#ddd" class="circle" cx="213.5154226055937" cy="706.5144556813017"></circle><circle r="20" fill="#ddd" class="circle" cx="-389.1507936882505" cy="-920.5577673104762"></circle><circle r="30" fill="#ddd" class="circle" cx="561.9538505731799" cy="2503.9764652878903"></circle><circle r="30" fill="#ddd" class="circle" cx="435.7488781796656" cy="870.7423773492396"></circle><circle r="30" fill="#ddd" class="circle" cx="451.93001898927446" cy="2322.6148372784683"></circle><circle r="20" fill="#ddd" class="circle" cx="506.82109060337825" cy="581.7035668101901"></circle><circle r="20" fill="#ddd" class="circle" cx="1330.711424599524" cy="-919.8186877027462"></circle><circle r="20" fill="#ddd" class="circle" cx="2014.264575336529" cy="157.75681194248656"></circle><circle r="20" fill="#ddd" class="circle" cx="335.50512842359586" cy="-1627.8585728995254"></circle><circle r="20" fill="#ddd" class="circle" cx="585.4075186924197" cy="1039.3537128321511"></circle><circle r="20" fill="#ddd" class="circle" cx="595.8636699055396" cy="2063.770676839093"></circle><circle r="20" fill="#ddd" class="circle" cx="-206.1849738490393" cy="-141.93067510267994"></circle><circle r="50" fill="#ddd" class="circle" cx="1534.6272797870383" cy="781.4516540883128"></circle><circle r="20" fill="#ddd" class="circle" cx="1346.1151055624857" cy="396.8908726466175"></circle><circle r="20" fill="#ddd" class="circle" cx="488.5790403595405" cy="1003.1046986354646"></circle><circle r="50" fill="#ddd" class="circle" cx="-666.4750335482946" cy="-1113.4300140898063"></circle><circle r="30" fill="#ddd" class="circle" cx="662.3902340533716" cy="-50.53151568361267"></circle><circle r="30" fill="#ddd" class="circle" cx="-640.0011929244481" cy="1930.6989557152592"></circle><circle r="30" fill="#ddd" class="circle" cx="254.2038185133275" cy="1077.8685498807133"></circle><circle r="20" fill="#ddd" class="circle" cx="380.919199700297" cy="1254.305585119856"></circle><circle r="20" fill="#ddd" class="circle" cx="1609.247653084373" cy="991.0950948632261"></circle><circle r="20" fill="#ddd" class="circle" cx="193.9920070249352" cy="1200.8960977972454"></circle><circle r="20" fill="rgb(225, 149, 167)" class="circle" cx="40.063328544261424" cy="1120.5861212370924"></circle><circle r="40" fill="#ddd" class="circle" cx="289.4733200320561" cy="974.5229605022777"></circle><circle r="20" fill="#ddd" class="circle" cx="-939.2674542402477" cy="-1079.8549934494783"></circle><circle r="40" fill="#ddd" class="circle" cx="2196.896865499676" cy="1566.1060591578757"></circle><circle r="50" fill="#ddd" class="circle" cx="630.3328354306907" cy="83.96933290237237"></circle><circle r="20" fill="#ddd" class="circle" cx="-261.0681204113299" cy="72.19098712192248"></circle><circle r="30" fill="#ddd" class="circle" cx="248.71336707157278" cy="-1478.7826110397248"></circle><circle r="20" fill="#ddd" class="circle" cx="1417.7271952321141" cy="-848.2685898043561"></circle><circle r="20" fill="#ddd" class="circle" cx="-50.94556014470042" cy="1295.7194947922387"></circle><circle r="30" fill="#ddd" class="circle" cx="990.1579262904208" cy="2260.799053446895"></circle><circle r="30" fill="#ddd" class="circle" cx="1916.1922082188198" cy="177.71993751716886"></circle><circle r="30" fill="#ddd" class="circle" cx="1810.6633148509122" cy="222.1031149116158"></circle><circle r="40" fill="#ddd" class="circle" cx="1013.4278368069834" cy="-233.21000090776215"></circle><circle r="40" fill="#ddd" class="circle" cx="1732.0339374811235" cy="284.5953011806358"></circle><circle r="20" fill="#ddd" class="circle" cx="1077.4089068091516" cy="2327.6490802836033"></circle><circle r="20" fill="#ddd" class="circle" cx="1942.6956491745884" cy="1316.243547258722"></circle><circle r="30" fill="#ddd" class="circle" cx="964.3995519652225" cy="2399.6667810329163"></circle><circle r="20" fill="#ddd" class="circle" cx="-58.579969776129694" cy="1127.3077873220257"></circle><circle r="50" fill="#ddd" class="circle" cx="1820.5159655759542" cy="322.2078103896379"></circle><circle r="30" fill="#ddd" class="circle" cx="952.7645586997572" cy="1558.518514207754"></circle><circle r="20" fill="#ddd" class="circle" cx="1163.8022774596848" cy="-44.846557440910786"></circle><circle r="30" fill="#ddd" class="circle" cx="-820.4956353139071" cy="-1279.6091190618947"></circle><circle r="20" fill="#ddd" class="circle" cx="1105.630070260959" cy="36.578503850693515"></circle><circle r="30" fill="#ddd" class="circle" cx="-533.6976111205005" cy="130.06879518025724"></circle><circle r="30" fill="#ddd" class="circle" cx="-68.11659084851489" cy="956.2331215250691"></circle><circle r="30" fill="#ddd" class="circle" cx="2743.767108881195" cy="1643.491069905305"></circle><circle r="40" fill="#ddd" class="circle" cx="-581.3401636521537" cy="-723.8341727261005"></circle><circle r="20" fill="#ddd" class="circle" cx="1158.7156079656627" cy="2446.7195000121746"></circle><circle r="20" fill="#ddd" class="circle" cx="-748.7011896266065" cy="225.80610777069938"></circle><circle r="20" fill="#ddd" class="circle" cx="-115.30731231085089" cy="1047.7395464535955"></circle><circle r="20" fill="#ddd" class="circle" cx="-927.6758488857629" cy="61.418025266080534"></circle><circle r="20" fill="#ddd" class="circle" cx="2080.102422107353" cy="337.57828703101603"></circle><circle r="20" fill="#ddd" class="circle" cx="1187.4061520154512" cy="-1236.2206150198404"></circle><circle r="20" fill="#ddd" class="circle" cx="2860.5259640578984" cy="1830.05886734207"></circle><circle r="20" fill="#ddd" class="circle" cx="-169.07489029821235" cy="963.3419916193023"></circle><circle r="20" fill="#ddd" class="circle" cx="-283.274712229886" cy="808.2576623363267"></circle><circle r="20" fill="#ddd" class="circle" cx="-241.89107307277675" cy="715.9232154859657"></circle><circle r="30" fill="#ddd" class="circle" cx="-761.8375402697609" cy="-112.33636474745931"></circle><circle r="40" fill="#ddd" class="circle" cx="1495.2540954629296" cy="-89.66066816284288"></circle><circle r="30" fill="#ddd" class="circle" cx="954.4341761389975" cy="2598.0811299406873"></circle><circle r="20" fill="#ddd" class="circle" cx="897.836545252236" cy="162.691562719423"></circle><circle r="20" fill="#ddd" class="circle" cx="1918.0713734756487" cy="-121.51114186507867"></circle><circle r="20" fill="#ddd" class="circle" cx="-183.45453611664365" cy="797.1855362847211"></circle><circle r="20" fill="#ddd" class="circle" cx="-1007.2965462755541" cy="-208.58072008395783"></circle><circle r="30" fill="#ddd" class="circle" cx="-29.910894127531268" cy="824.6366732139935"></circle><circle r="20" fill="#ddd" class="circle" cx="1422.080948174357" cy="-365.4020837294383"></circle><circle r="20" fill="#ddd" class="circle" cx="1016.2976433637549" cy="2675.828058686904"></circle><circle r="20" fill="#ddd" class="circle" cx="-899.0984874466527" cy="-396.2350938702419"></circle><circle r="20" fill="#ddd" class="circle" cx="-195.46540640931374" cy="627.2757473906759"></circle><circle r="20" fill="#ddd" class="circle" cx="1037.5681101694922" cy="2773.631732386059"></circle><circle r="40" fill="#ddd" class="circle" cx="94.79668693006624" cy="-1503.5001673691952"></circle><circle r="30" fill="#ddd" class="circle" cx="1281.4593646934825" cy="-771.4753482961567"></circle><circle r="20" fill="#ddd" class="circle" cx="1318.4880655815189" cy="-1200.4623342703796"></circle><circle r="20" fill="#ddd" class="circle" cx="-562.947530980472" cy="2070.1130256914203"></circle><circle r="20" fill="#ddd" class="circle" cx="1433.5574803782313" cy="990.0616932074604"></circle><circle r="20" fill="#ddd" class="circle" cx="938.4645753002301" cy="2787.5703360135253"></circle><circle r="20" fill="#ddd" class="circle" cx="1521.5518611235268" cy="-365.2313377031975"></circle><circle r="30" fill="#ddd" class="circle" cx="1912.8486561946474" cy="362.8817035377533"></circle><circle r="30" fill="#ddd" class="circle" cx="-705.7030054205164" cy="-333.2455856001431"></circle><circle r="20" fill="#ddd" class="circle" cx="775.9027446851047" cy="286.49168701853654"></circle><circle r="20" fill="#ddd" class="circle" cx="751.0150139367863" cy="2846.536852962378"></circle><circle r="50" fill="#ddd" class="circle" cx="1833.134184616373" cy="421.94010441772343"></circle><circle r="20" fill="#ddd" class="circle" cx="668.7204623106196" cy="2789.671660991137"></circle><circle r="20" fill="#ddd" class="circle" cx="1331.4377165414305" cy="-542.8937556827202"></circle><circle r="20" fill="#ddd" class="circle" cx="1587.5511842086958" cy="-290.07046412720337"></circle><circle r="20" fill="#ddd" class="circle" cx="-78.47857400889795" cy="456.3764105632069"></circle><circle r="20" fill="#ddd" class="circle" cx="3282.5216268990284" cy="34.43707607049739"></circle><circle r="20" fill="#ddd" class="circle" cx="3404.479470795938" cy="1101.066867742836"></circle><circle r="20" fill="#ddd" class="circle" cx="-760.0888463648521" cy="2127.4792596544667"></circle><circle r="40" fill="#ddd" class="circle" cx="-647.4297969074754" cy="-1291.2840796566932"></circle><circle r="20" fill="#ddd" class="circle" cx="1777.922302575867" cy="-263.3676427255727"></circle><circle r="20" fill="#ddd" class="circle" cx="507.29931747091484" cy="2696.204654724407"></circle><circle r="30" fill="#ddd" class="circle" cx="673.4990658908898" cy="300.6449441695511"></circle><circle r="20" fill="#ddd" class="circle" cx="260.778237695258" cy="-1251.5940449416503"></circle><circle r="30" fill="#ddd" class="circle" cx="929.2708868762747" cy="619.923492484013"></circle><circle r="20" fill="#ddd" class="circle" cx="433.0457760634204" cy="2629.575736063753"></circle><circle r="20" fill="#ddd" class="circle" cx="2411.407512581139" cy="1564.1332843410876"></circle><circle r="20" fill="#ddd" class="circle" cx="1005.8199880414562" cy="29.856265990495245"></circle><circle r="30" fill="#ddd" class="circle" cx="882.5580363618379" cy="-114.5955739876544"></circle><circle r="20" fill="#ddd" class="circle" cx="593.7232936698894" cy="-193.0943959936327"></circle><circle r="20" fill="#ddd" class="circle" cx="-863.1749674501184" cy="2117.3612260736895"></circle><circle r="20" fill="#ddd" class="circle" cx="-432.39547006872715" cy="-559.4898742672021"></circle><circle r="20" fill="#ddd" class="circle" cx="875.3399122414288" cy="-1665.2617594737824"></circle><circle r="20" fill="#ddd" class="circle" cx="2021.022915711912" cy="494.67058228630003"></circle><circle r="30" fill="#ddd" class="circle" cx="2.67776965277496" cy="730.0330229591659"></circle><circle r="20" fill="#ddd" class="circle" cx="338.2172753624473" cy="2597.7029176179717"></circle><circle r="20" fill="#ddd" class="circle" cx="3355.061821989302" cy="1266.3624625212121"></circle><circle r="50" fill="#ddd" class="circle" cx="1157.1271069868742" cy="-746.5130239628228"></circle><circle r="30" fill="#ddd" class="circle" cx="529.5926941254837" cy="2598.4606400562648"></circle><circle r="30" fill="#ddd" class="circle" cx="1941.4839168742603" cy="555.4334937537953"></circle><circle r="30" fill="#ddd" class="circle" cx="-385.071880872269" cy="-413.5143131203454"></circle><circle r="20" fill="#ddd" class="circle" cx="115.49098985340522" cy="2338.749679128511"></circle><circle r="20" fill="#ddd" class="circle" cx="2734.9869724516634" cy="1905.8490854403663"></circle><circle r="20" fill="#ddd" class="circle" cx="401.8721180863277" cy="2454.080264719064"></circle><circle r="20" fill="#ddd" class="circle" cx="650.0907378106963" cy="415.2315207955285"></circle><circle r="20" fill="#ddd" class="circle" cx="345.02871136261257" cy="2275.575028827012"></circle><circle r="20" fill="#ddd" class="circle" cx="56.471812434022574" cy="540.1844827575752"></circle><circle r="30" fill="#ddd" class="circle" cx="-589.2734037235664" cy="-1408.0777612106624"></circle><circle r="20" fill="#ddd" class="circle" cx="930.2100603058536" cy="2108.392454828961"></circle><circle r="20" fill="#ddd" class="circle" cx="-481.10193973797936" cy="-1529.8241346227865"></circle><circle r="20" fill="#ddd" class="circle" cx="134.39229251347618" cy="390.56535176641654"></circle><circle r="20" fill="#ddd" class="circle" cx="221.76009630442877" cy="438.4585114703805"></circle><circle r="30" fill="#ddd" class="circle" cx="1546.8033227238839" cy="682.1360630786196"></circle><circle r="20" fill="#ddd" class="circle" cx="288.79503872412806" cy="512.5383387135905"></circle><circle r="50" fill="#ddd" class="circle" cx="1808.8731103745706" cy="519.0437210941676"></circle><circle r="50" fill="#ddd" class="circle" cx="530.0779656401091" cy="205.15402061089583"></circle><circle r="20" fill="#ddd" class="circle" cx="-966.7442543624286" cy="2082.643749810686"></circle><circle r="40" fill="#ddd" class="circle" cx="1570.1110897884164" cy="239.97241459300852"></circle><circle r="20" fill="#ddd" class="circle" cx="387.89938052838204" cy="498.63963230544636"></circle><circle r="30" fill="#ddd" class="circle" cx="477.79715125190177" cy="702.2477869378754"></circle><circle r="20" fill="#ddd" class="circle" cx="1928.2880152987384" cy="1458.9613538969381"></circle><circle r="20" fill="#ddd" class="circle" cx="570.9002040842693" cy="664.0670510767218"></circle><circle r="20" fill="#ddd" class="circle" cx="-270.77587610851054" cy="-728.3405912848683"></circle><circle r="20" fill="#ddd" class="circle" cx="536.0394214305531" cy="846.4674554611242"></circle><circle r="20" fill="#ddd" class="circle" cx="479.428848933397" cy="2139.641839404959"></circle><circle r="50" fill="#ddd" class="circle" cx="1394.4074407851695" cy="783.5681894889398"></circle><circle r="20" fill="#ddd" class="circle" cx="547.2923278713502" cy="-403.66232712846437"></circle><circle r="40" fill="#ddd" class="circle" cx="337.10306551121647" cy="886.5326516092393"></circle><circle r="20" fill="#ddd" class="circle" cx="-250.99074884477196" cy="-407.37176020436345"></circle><circle r="30" fill="#ddd" class="circle" cx="410.45025930558904" cy="1064.459090689024"></circle><circle r="20" fill="#ddd" class="circle" cx="847.9811457859173" cy="2051.4275610966392"></circle><circle r="20" fill="#ddd" class="circle" cx="369.1489107254636" cy="1155.5927077741726"></circle><circle r="20" fill="#ddd" class="circle" cx="2355.5166121203206" cy="1743.2864450704153"></circle><circle r="30" fill="#ddd" class="circle" cx="-428.46628819582344" cy="-1374.5206187173828"></circle><circle r="20" fill="#ddd" class="circle" cx="1778.0302681314438" cy="-41.360704693573176"></circle><circle r="30" fill="#ddd" class="circle" cx="752.2978002298548" cy="2297.8844421051654"></circle><circle r="20" fill="#ddd" class="circle" cx="-239.64314038340106" cy="-281.8611843234601"></circle><circle r="30" fill="#ddd" class="circle" cx="-277.44339970295056" cy="-1290.2774602284615"></circle><circle r="30" fill="#ddd" class="circle" cx="139.90780282895298" cy="1116.7420142238193"></circle><circle r="20" fill="#ddd" class="circle" cx="93.02969270666127" cy="1204.846017661676"></circle><circle r="20" fill="#ddd" class="circle" cx="1845.8603180840714" cy="-189.9511638300889"></circle><circle r="20" fill="#ddd" class="circle" cx="1089.0801224503848" cy="2228.290732333723"></circle><circle r="20" fill="#ddd" class="circle" cx="1764.9501804039485" cy="57.8342775643857"></circle><circle r="20" fill="#ddd" class="circle" cx="-1048.033285210805" cy="1997.9899789334793"></circle><circle r="20" fill="#ddd" class="circle" cx="-1060.0345050062801" cy="1876.467824008285"></circle><circle r="30" fill="#ddd" class="circle" cx="1638.8855867376446" cy="309.2205555878848"></circle><circle r="30" fill="#ddd" class="circle" cx="887.2094106831164" cy="2336.1514883144355"></circle><circle r="50" fill="#ddd" class="circle" cx="1301.5683621745952" cy="676.5752719792615"></circle><circle r="30" fill="#ddd" class="circle" cx="950.1431139065238" cy="2498.3587758904637"></circle><circle r="30" fill="#ddd" class="circle" cx="89.30054005832869" cy="-1253.8292292919293"></circle><circle r="30" fill="#ddd" class="circle" cx="156.66043778185158" cy="-114.50462251502049"></circle><circle r="20" fill="#ddd" class="circle" cx="146.2457412820868" cy="1289.6109394323205"></circle><circle r="20" fill="#ddd" class="circle" cx="-1141.3322861835595" cy="1806.4487812600403"></circle><circle r="70" fill="#ddd" class="circle" cx="1007.8629383236038" cy="-782.1184511209423"></circle><circle r="70" fill="#ddd" class="circle" cx="917.5137027481912" cy="-350.79064308419595"></circle><circle r="70" fill="#ddd" class="circle" cx="480.9042168174192" cy="61.59094512067531"></circle><circle r="70" fill="#ddd" class="circle" cx="-92.29682826608037" cy="67.7893623839605"></circle><circle r="70" fill="#ddd" class="circle" cx="-589.5843003674073" cy="-170.38729662903813"></circle><circle r="70" fill="#ddd" class="circle" cx="-672.2589605510454" cy="-606.8321003623864"></circle><circle r="70" fill="#ddd" class="circle" cx="-534.5498792588605" cy="-1189.1234752310581"></circle><circle r="70" fill="#ddd" class="circle" cx="-54.873179739975335" cy="-1500.9344958276236"></circle><circle r="70" fill="rgb(191, 225, 215)" class="circle" cx="511.9441666251061" cy="-1435.8897754130812"></circle><circle r="70" fill="#ddd" class="circle" cx="951.727672656035" cy="1835.3189312880565"></circle><circle r="70" fill="#ddd" class="circle" cx="733.1957700418926" cy="2456.5777644807517"></circle><circle r="70" fill="#ddd" class="circle" cx="-249.56323833145436" cy="2495.0796487717553"></circle><circle r="70" fill="#ddd" class="circle" cx="-740.7934034946849" cy="1717.5977789295562"></circle><circle r="70" fill="rgb(0, 127, 94)" class="circle" cx="199.3276464924289" cy="848.3058901942002"></circle><circle r="70" fill="#ddd" class="circle" cx="1002.3642897567679" cy="1712.104595015264"></circle><circle r="70" fill="#ddd" class="circle" cx="2989.3902175194858" cy="1116.9932050864973"></circle><circle r="70" fill="#ddd" class="circle" cx="920.2866790899424" cy="-1031.9471538083078"></circle><circle r="70" fill="#ddd" class="circle" cx="2603.1409995199197" cy="1504.2956686132907"></circle><circle r="70" fill="#ddd" class="circle" cx="2048.253625513246" cy="1547.1801910820186"></circle><circle r="70" fill="#ddd" class="circle" cx="1623.5996681334889" cy="1254.4372217592813"></circle><circle r="70" fill="#ddd" class="circle" cx="1448.648572476159" cy="644.5233818254201"></circle><circle r="70" fill="#ddd" class="circle" cx="1581.1372985475623" cy="38.84101616958933"></circle><circle r="70" fill="#ddd" class="circle" cx="1598.417970955727" cy="144.62316887382227"></circle><circle r="70" fill="#ddd" class="circle" cx="1648.2604531708505" cy="408.84978873402196"></circle><circle r="70" fill="#ddd" class="circle" cx="2923.707290494584" cy="249.47615785684576"></circle></g><g><text dy="10" fill="black" font-size="20px" dx="0" x="1686.033741002507" y="-300.1861108947825"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2030.868250594575" y="59.98877452597288"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-589.8458280936339" y="-319.74947904334255"></text><text dy="10" fill="black" font-size="20px" dx="0" x="972.3879497060406" y="-1175.19734476006"></text><text dy="10" fill="black" font-size="20px" dx="0" x="3005.168050481504" y="117.32812078908913"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1013.1801273684994" y="2163.4204923295383"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1473.67895098095" y="258.4600243868364"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-369.17455920099775" y="-1483.4824587337591"></text><text dy="10" fill="black" font-size="20px" dx="0" x="114.24255906823942" y="716.9721904578329"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1834.6693050001015" y="125.76819676733872"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1663.6181872466223" y="-91.61626395775346"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1895.5745193378402" y="268.5700670844268"></text><text dy="10" fill="black" font-size="20px" dx="0" x="407.89737545409713" y="596.6653270890247"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2068.6909649078952" y="240.01420147183546"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1107.5919616848414" y="-653.1419430766363"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1875.8052929766557" y="922.012283426507"></text><text dy="10" fill="black" font-size="20px" dx="0" x="634.1729779003621" y="867.9006607404593"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1741.5480921288424" y="380.6304333685223"></text><text dy="10" fill="black" font-size="20px" dx="0" x="522.2142882115335" y="1115.583723220819"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1986.9410010052263" y="297.9628418270147"></text><text dy="10" fill="black" font-size="20px" dx="0" x="290.8621770871128" y="1211.5720170800944"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1226.5996622394919" y="-477.73281181178515"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2003.8644515691315" y="397.52870142971227"></text><text dy="10" fill="black" font-size="20px" dx="0" x="3282.874769363731" y="882.8387393284327"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1925.918960503188" y="459.24556679817795"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-16.291027312192917" y="1038.8267298528767"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1060.7586409298563" y="2426.131590381179"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-272.55275305815894" y="-1412.455748116249"></text><text dy="10" fill="black" font-size="20px" dx="0" x="193.22839630832297" y="999.0973573793382"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-650.0472842292702" y="2135.338713230581"></text><text dy="10" fill="black" font-size="20px" dx="0" x="96.75207019908889" y="978.1456661902037"></text><text dy="10" fill="black" font-size="20px" dx="0" x="3102.469615859188" y="140.60070483933947"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-161.15594887136697" y="-1271.5522460033446"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-271.0854730885869" y="969.1150111476446"></text><text dy="15" fill="black" font-size="40px" dx="-40.84410095214844" x="2245.7024901691675" y="747.7863664739338">DSA</text><text dy="10" fill="black" font-size="20px" dx="0" x="-118.09678831158453" y="869.6748049640008"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-143.95203360894365" y="541.0380309216818"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1720.3191993271637" y="475.5073674289615"></text><text dy="10" fill="black" font-size="20px" dx="0" x="69.27355398326743" y="804.4598732169289"></text><text dy="10" fill="black" font-size="20px" dx="0" x="138.09265258131305" y="490.22079480952857"></text><text dy="10" fill="black" font-size="20px" dx="0" x="319.81885376337345" y="416.7193905541172"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-667.7548498705711" y="-949.8550748920389"></text><text dy="10" fill="black" font-size="20px" dx="0" x="301.1925673431892" y="658.4498387158574"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2745.417362801572" y="1251.1219360780835"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2270.1163111677047" y="1286.6424486661545"></text><text dy="15" fill="black" font-size="40px" dx="-46.984779357910156" x="153.98344131163773" y="1763.0283236913515">CMA</text><text dy="10" fill="black" font-size="20px" dx="0" x="1893.747228782448" y="643.1235451569788"></text><text dy="10" fill="black" font-size="20px" dx="0" x="589.604310301009" y="762.2034937414494"></text><text dy="10" fill="black" font-size="20px" dx="0" x="566.611069761536" y="941.1780514284817"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2848.5913973471525" y="1329.5240807095283"></text><text dy="10" fill="black" font-size="20px" dx="0" x="461.77944649165795" y="1193.9035928974542"></text><text dy="10" fill="black" font-size="20px" dx="0" x="244.35224245921296" y="1298.156883691671"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-445.05492200755714" y="-258.54755508413916"></text><text dy="10" fill="black" font-size="20px" dx="0" x="47.67482131883942" y="1294.9719218846603"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-145.97830296242446" y="-1113.4710134011855"></text><text dy="10" fill="black" font-size="20px" dx="0" x="748.3438432567987" y="2046.6598764571497"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1528.6769481902495" y="532.039919900839"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1671.1709219217587" y="79.24864078208876"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-398.8810436812321" y="1832.7738103065917"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-169.39158552476584" y="-988.1328985529125"></text><text dy="10" fill="black" font-size="20px" dx="0" x="651.841207729654" y="-1763.7949790682535"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-30.498962592214948" y="2156.7607069823475"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1957.5665563727448" y="1054.320131045418"></text><text dy="10" fill="black" font-size="20px" dx="0" x="924.4632133127628" y="-690.9504659259446"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1123.6202272671107" y="2540.1631094047752"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1625.094786749365" y="504.02665936037886"></text><text dy="10" fill="black" font-size="20px" dx="0" x="869.6817879204793" y="1309.2295865831732"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1155.5057822212084" y="-1336.9631999483513"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-3.7751267558992976" y="1209.3442410286852"></text><text dy="10" fill="black" font-size="20px" dx="0" x="71.46972316782316" y="-253.72989610806556"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1109.0081183212376" y="2638.755945337581"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-104.9561416670817" y="1214.7885558363475"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-163.25191125606767" y="1136.6675385444335"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-216.3332150466662" y="1051.1359196181495"></text><text dy="10" fill="black" font-size="20px" dx="0" x="969.3732685410777" y="1335.2848803348281"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2938.2406574611473" y="1426.7710199152584"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1339.5388107925971" y="-309.30344364061096"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-220.7930922788009" y="885.2469024856002"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2035.7707660017008" y="1152.8551370617774"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1664.122205308526" y="683.3455067429434"></text><text dy="10" fill="black" font-size="20px" dx="0" x="36.57900363760882" y="899.083014581157"></text><text dy="15" fill="black" font-size="40px" dx="-19.948087692260742" x="151.22002893745403" y="-696.6574967475754">AI</text><text dy="10" fill="black" font-size="20px" dx="0" x="1162.0948816591435" y="1338.3642574471885"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1064.6472632731939" y="1295.8447891542617"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1552.0659883815026" y="435.2072503297558"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-141.18183608398996" y="711.9706670924581"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1184.9035185760251" y="-955.3419249431153"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-474.8931780827981" y="-1051.8654216834502"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-342.5859352775476" y="-210.97463422414987"></text><text dy="10" fill="black" font-size="20px" dx="0" x="139.63268077698126" y="-1834.9361244605425"></text><text dy="10" fill="black" font-size="20px" dx="0" x="916.9842037639718" y="2690.171247955061"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1665.6935596566595" y="214.7855729987107"></text><text dy="10" fill="black" font-size="20px" dx="0" x="3285.6573026780407" y="1028.6788824466714"></text><text dy="10" fill="black" font-size="20px" dx="0" x="848.0479713064459" y="2827.8484573019596"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-96.95794580595884" y="629.5022598594925"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-42.97434603317128" y="549.2911486774304"></text><text dy="10" fill="black" font-size="20px" dx="0" x="20.767429120434024" y="447.3195439571962"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1856.659810375236" y="19.60659553225977"></text><text dy="10" fill="black" font-size="20px" dx="0" x="214.3071221768354" y="-1697.51499530993"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2383.222843012085" y="1281.8116682440616"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-430.90161713712644" y="1998.7212415949396"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2754.0907443288165" y="1502.3897510650797"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1739.5308724258923" y="152.62328933563109"></text><text dy="10" fill="black" font-size="20px" dx="0" x="571.710543941573" y="2771.3841476572834"></text><text dy="10" fill="black" font-size="20px" dx="0" x="38.931785256358275" y="638.0281766505583"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-610.163918442153" y="-868.0599969355995"></text><text dy="10" fill="black" font-size="20px" dx="0" x="154.2194602445921" y="625.8763098124441"></text><text dy="10" fill="black" font-size="20px" dx="0" x="795.2878280326294" y="-1759.5780129658017"></text><text dy="10" fill="black" font-size="20px" dx="0" x="474.67536792987926" y="2794.2725370153544"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1692.3539913376308" y="779.6873579915442"></text><text dy="10" fill="black" font-size="20px" dx="0" x="313.52149354637174" y="2501.000879991067"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1258.9284656669822" y="-114.28822850737207"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1542.6279689892533" y="336.64646288123953"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1934.257268741037" y="78.83124329232912"></text><text dy="10" fill="black" font-size="20px" dx="0" x="213.5154226055937" y="706.5144556813017"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-389.1507936882505" y="-920.5577673104762"></text><text dy="10" fill="black" font-size="20px" dx="0" x="561.9538505731799" y="2503.9764652878903"></text><text dy="10" fill="black" font-size="20px" dx="0" x="435.7488781796656" y="870.7423773492396"></text><text dy="10" fill="black" font-size="20px" dx="0" x="451.93001898927446" y="2322.6148372784683"></text><text dy="10" fill="black" font-size="20px" dx="0" x="506.82109060337825" y="581.7035668101901"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1330.711424599524" y="-919.8186877027462"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2014.264575336529" y="157.75681194248656"></text><text dy="10" fill="black" font-size="20px" dx="0" x="335.50512842359586" y="-1627.8585728995254"></text><text dy="10" fill="black" font-size="20px" dx="0" x="585.4075186924197" y="1039.3537128321511"></text><text dy="10" fill="black" font-size="20px" dx="0" x="595.8636699055396" y="2063.770676839093"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-206.1849738490393" y="-141.93067510267994"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1534.6272797870383" y="781.4516540883128"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1346.1151055624857" y="396.8908726466175"></text><text dy="10" fill="black" font-size="20px" dx="0" x="488.5790403595405" y="1003.1046986354646"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-666.4750335482946" y="-1113.4300140898063"></text><text dy="10" fill="black" font-size="20px" dx="0" x="662.3902340533716" y="-50.53151568361267"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-640.0011929244481" y="1930.6989557152592"></text><text dy="10" fill="black" font-size="20px" dx="0" x="254.2038185133275" y="1077.8685498807133"></text><text dy="10" fill="black" font-size="20px" dx="0" x="380.919199700297" y="1254.305585119856"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1609.247653084373" y="991.0950948632261"></text><text dy="10" fill="black" font-size="20px" dx="0" x="193.9920070249352" y="1200.8960977972454"></text><text dy="10" fill="black" font-size="20px" dx="0" x="40.063328544261424" y="1120.5861212370924"></text><text dy="10" fill="black" font-size="20px" dx="0" x="289.4733200320561" y="974.5229605022777"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-939.2674542402477" y="-1079.8549934494783"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2196.896865499676" y="1566.1060591578757"></text><text dy="10" fill="black" font-size="20px" dx="0" x="630.3328354306907" y="83.96933290237237"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-261.0681204113299" y="72.19098712192248"></text><text dy="10" fill="black" font-size="20px" dx="0" x="248.71336707157278" y="-1478.7826110397248"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1417.7271952321141" y="-848.2685898043561"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-50.94556014470042" y="1295.7194947922387"></text><text dy="10" fill="black" font-size="20px" dx="0" x="990.1579262904208" y="2260.799053446895"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1916.1922082188198" y="177.71993751716886"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1810.6633148509122" y="222.1031149116158"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1013.4278368069834" y="-233.21000090776215"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1732.0339374811235" y="284.5953011806358"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1077.4089068091516" y="2327.6490802836033"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1942.6956491745884" y="1316.243547258722"></text><text dy="10" fill="black" font-size="20px" dx="0" x="964.3995519652225" y="2399.6667810329163"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-58.579969776129694" y="1127.3077873220257"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1820.5159655759542" y="322.2078103896379"></text><text dy="10" fill="black" font-size="20px" dx="0" x="952.7645586997572" y="1558.518514207754"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1163.8022774596848" y="-44.846557440910786"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-820.4956353139071" y="-1279.6091190618947"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1105.630070260959" y="36.578503850693515"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-533.6976111205005" y="130.06879518025724"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-68.11659084851489" y="956.2331215250691"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2743.767108881195" y="1643.491069905305"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-581.3401636521537" y="-723.8341727261005"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1158.7156079656627" y="2446.7195000121746"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-748.7011896266065" y="225.80610777069938"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-115.30731231085089" y="1047.7395464535955"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-927.6758488857629" y="61.418025266080534"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2080.102422107353" y="337.57828703101603"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1187.4061520154512" y="-1236.2206150198404"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2860.5259640578984" y="1830.05886734207"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-169.07489029821235" y="963.3419916193023"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-283.274712229886" y="808.2576623363267"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-241.89107307277675" y="715.9232154859657"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-761.8375402697609" y="-112.33636474745931"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1495.2540954629296" y="-89.66066816284288"></text><text dy="10" fill="black" font-size="20px" dx="0" x="954.4341761389975" y="2598.0811299406873"></text><text dy="10" fill="black" font-size="20px" dx="0" x="897.836545252236" y="162.691562719423"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1918.0713734756487" y="-121.51114186507867"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-183.45453611664365" y="797.1855362847211"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-1007.2965462755541" y="-208.58072008395783"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-29.910894127531268" y="824.6366732139935"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1422.080948174357" y="-365.4020837294383"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1016.2976433637549" y="2675.828058686904"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-899.0984874466527" y="-396.2350938702419"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-195.46540640931374" y="627.2757473906759"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1037.5681101694922" y="2773.631732386059"></text><text dy="10" fill="black" font-size="20px" dx="0" x="94.79668693006624" y="-1503.5001673691952"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1281.4593646934825" y="-771.4753482961567"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1318.4880655815189" y="-1200.4623342703796"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-562.947530980472" y="2070.1130256914203"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1433.5574803782313" y="990.0616932074604"></text><text dy="10" fill="black" font-size="20px" dx="0" x="938.4645753002301" y="2787.5703360135253"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1521.5518611235268" y="-365.2313377031975"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1912.8486561946474" y="362.8817035377533"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-705.7030054205164" y="-333.2455856001431"></text><text dy="10" fill="black" font-size="20px" dx="0" x="775.9027446851047" y="286.49168701853654"></text><text dy="10" fill="black" font-size="20px" dx="0" x="751.0150139367863" y="2846.536852962378"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1833.134184616373" y="421.94010441772343"></text><text dy="10" fill="black" font-size="20px" dx="0" x="668.7204623106196" y="2789.671660991137"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1331.4377165414305" y="-542.8937556827202"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1587.5511842086958" y="-290.07046412720337"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-78.47857400889795" y="456.3764105632069"></text><text dy="10" fill="black" font-size="20px" dx="0" x="3282.5216268990284" y="34.43707607049739"></text><text dy="10" fill="black" font-size="20px" dx="0" x="3404.479470795938" y="1101.066867742836"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-760.0888463648521" y="2127.4792596544667"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-647.4297969074754" y="-1291.2840796566932"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1777.922302575867" y="-263.3676427255727"></text><text dy="10" fill="black" font-size="20px" dx="0" x="507.29931747091484" y="2696.204654724407"></text><text dy="10" fill="black" font-size="20px" dx="0" x="673.4990658908898" y="300.6449441695511"></text><text dy="10" fill="black" font-size="20px" dx="0" x="260.778237695258" y="-1251.5940449416503"></text><text dy="10" fill="black" font-size="20px" dx="0" x="929.2708868762747" y="619.923492484013"></text><text dy="10" fill="black" font-size="20px" dx="0" x="433.0457760634204" y="2629.575736063753"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2411.407512581139" y="1564.1332843410876"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1005.8199880414562" y="29.856265990495245"></text><text dy="10" fill="black" font-size="20px" dx="0" x="882.5580363618379" y="-114.5955739876544"></text><text dy="10" fill="black" font-size="20px" dx="0" x="593.7232936698894" y="-193.0943959936327"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-863.1749674501184" y="2117.3612260736895"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-432.39547006872715" y="-559.4898742672021"></text><text dy="10" fill="black" font-size="20px" dx="0" x="875.3399122414288" y="-1665.2617594737824"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2021.022915711912" y="494.67058228630003"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2.67776965277496" y="730.0330229591659"></text><text dy="10" fill="black" font-size="20px" dx="0" x="338.2172753624473" y="2597.7029176179717"></text><text dy="10" fill="black" font-size="20px" dx="0" x="3355.061821989302" y="1266.3624625212121"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1157.1271069868742" y="-746.5130239628228"></text><text dy="10" fill="black" font-size="20px" dx="0" x="529.5926941254837" y="2598.4606400562648"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1941.4839168742603" y="555.4334937537953"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-385.071880872269" y="-413.5143131203454"></text><text dy="10" fill="black" font-size="20px" dx="0" x="115.49098985340522" y="2338.749679128511"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2734.9869724516634" y="1905.8490854403663"></text><text dy="10" fill="black" font-size="20px" dx="0" x="401.8721180863277" y="2454.080264719064"></text><text dy="10" fill="black" font-size="20px" dx="0" x="650.0907378106963" y="415.2315207955285"></text><text dy="10" fill="black" font-size="20px" dx="0" x="345.02871136261257" y="2275.575028827012"></text><text dy="10" fill="black" font-size="20px" dx="0" x="56.471812434022574" y="540.1844827575752"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-589.2734037235664" y="-1408.0777612106624"></text><text dy="10" fill="black" font-size="20px" dx="0" x="930.2100603058536" y="2108.392454828961"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-481.10193973797936" y="-1529.8241346227865"></text><text dy="10" fill="black" font-size="20px" dx="0" x="134.39229251347618" y="390.56535176641654"></text><text dy="10" fill="black" font-size="20px" dx="0" x="221.76009630442877" y="438.4585114703805"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1546.8033227238839" y="682.1360630786196"></text><text dy="10" fill="black" font-size="20px" dx="0" x="288.79503872412806" y="512.5383387135905"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1808.8731103745706" y="519.0437210941676"></text><text dy="10" fill="black" font-size="20px" dx="0" x="530.0779656401091" y="205.15402061089583"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-966.7442543624286" y="2082.643749810686"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1570.1110897884164" y="239.97241459300852"></text><text dy="10" fill="black" font-size="20px" dx="0" x="387.89938052838204" y="498.63963230544636"></text><text dy="10" fill="black" font-size="20px" dx="0" x="477.79715125190177" y="702.2477869378754"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1928.2880152987384" y="1458.9613538969381"></text><text dy="10" fill="black" font-size="20px" dx="0" x="570.9002040842693" y="664.0670510767218"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-270.77587610851054" y="-728.3405912848683"></text><text dy="10" fill="black" font-size="20px" dx="0" x="536.0394214305531" y="846.4674554611242"></text><text dy="10" fill="black" font-size="20px" dx="0" x="479.428848933397" y="2139.641839404959"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1394.4074407851695" y="783.5681894889398"></text><text dy="10" fill="black" font-size="20px" dx="0" x="547.2923278713502" y="-403.66232712846437"></text><text dy="10" fill="black" font-size="20px" dx="0" x="337.10306551121647" y="886.5326516092393"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-250.99074884477196" y="-407.37176020436345"></text><text dy="10" fill="black" font-size="20px" dx="0" x="410.45025930558904" y="1064.459090689024"></text><text dy="10" fill="black" font-size="20px" dx="0" x="847.9811457859173" y="2051.4275610966392"></text><text dy="10" fill="black" font-size="20px" dx="0" x="369.1489107254636" y="1155.5927077741726"></text><text dy="10" fill="black" font-size="20px" dx="0" x="2355.5166121203206" y="1743.2864450704153"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-428.46628819582344" y="-1374.5206187173828"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1778.0302681314438" y="-41.360704693573176"></text><text dy="10" fill="black" font-size="20px" dx="0" x="752.2978002298548" y="2297.8844421051654"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-239.64314038340106" y="-281.8611843234601"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-277.44339970295056" y="-1290.2774602284615"></text><text dy="10" fill="black" font-size="20px" dx="0" x="139.90780282895298" y="1116.7420142238193"></text><text dy="10" fill="black" font-size="20px" dx="0" x="93.02969270666127" y="1204.846017661676"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1845.8603180840714" y="-189.9511638300889"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1089.0801224503848" y="2228.290732333723"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1764.9501804039485" y="57.8342775643857"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-1048.033285210805" y="1997.9899789334793"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-1060.0345050062801" y="1876.467824008285"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1638.8855867376446" y="309.2205555878848"></text><text dy="10" fill="black" font-size="20px" dx="0" x="887.2094106831164" y="2336.1514883144355"></text><text dy="10" fill="black" font-size="20px" dx="0" x="1301.5683621745952" y="676.5752719792615"></text><text dy="10" fill="black" font-size="20px" dx="0" x="950.1431139065238" y="2498.3587758904637"></text><text dy="10" fill="black" font-size="20px" dx="0" x="89.30054005832869" y="-1253.8292292919293"></text><text dy="10" fill="black" font-size="20px" dx="0" x="156.66043778185158" y="-114.50462251502049"></text><text dy="10" fill="black" font-size="20px" dx="0" x="146.2457412820868" y="1289.6109394323205"></text><text dy="10" fill="black" font-size="20px" dx="0" x="-1141.3322861835595" y="1806.4487812600403"></text><text dy="10" fill="black" font-size="20px" dx="-61.281776428222656" x="1007.8629383236038" y="-782.1184511209423">Junwei Liang</text><text dy="10" fill="black" font-size="20px" dx="-24.703338623046875" x="917.5137027481912" y="-350.79064308419595">Li Liu</text><text dy="10" fill="black" font-size="20px" dx="-38.062828063964844" x="480.9042168174192" y="61.59094512067531">Qian Xu</text><text dy="10" fill="black" font-size="20px" dx="-51.23481750488281" x="-92.29682826608037" y="67.7893623839605">Sihong Xie</text><text dy="10" fill="black" font-size="20px" dx="-54.04213333129883" x="-589.5843003674073" y="-170.38729662903813">Xuming Hu</text><text dy="10" fill="black" font-size="20px" dx="-42.630577087402344" x="-672.2589605510454" y="-606.8321003623864">Ying Sun</text><text dy="10" fill="black" font-size="20px" dx="-73.1412582397461" x="-534.5498792588605" y="-1189.1234752310581">Yingcong Chen</text><text dy="10" fill="black" font-size="20px" dx="-40.510765075683594" x="-54.873179739975335" y="-1500.9344958276236">Zeke Xie</text><text dy="10" fill="black" font-size="20px" dx="-54.13588333129883" x="511.9441666251061" y="-1435.8897754130812">Zeyu Wang</text><text dy="10" fill="black" font-size="20px" dx="-45.479557037353516" x="951.727672656035" y="1835.3189312880565">David Yip</text><text dy="10" fill="black" font-size="20px" dx="-54.87026596069336" x="733.1957700418926" y="2456.5777644807517">Huamin Qu</text><text dy="10" fill="black" font-size="20px" dx="-57.818206787109375" x="-249.56323833145436" y="2495.0796487717553">Kang Zhang</text><text dy="10" fill="black" font-size="20px" dx="-69.1203842163086" x="-740.7934034946849" y="1717.5977789295562">Mingming Fan</text><text dy="10" fill="black" font-size="20px" dx="-36.96906661987305" x="199.3276464924289" y="848.3058901942002">Pan Hui</text><text dy="10" fill="black" font-size="20px" dx="-45.63059997558594" x="1002.3642897567679" y="1712.104595015264">Wei Zeng</text><text dy="10" fill="black" font-size="20px" dx="-60.43281173706055" x="2989.3902175194858" y="1116.9932050864973">Fugee Tsung</text><text dy="10" fill="black" font-size="20px" dx="-50.42751693725586" x="920.2866790899424" y="-1031.9471538083078">Hao Wang</text><text dy="10" fill="black" font-size="20px" dx="-22.89603042602539" x="2603.1409995199197" y="1504.2956686132907">Jia Li</text><text dy="10" fill="black" font-size="20px" dx="-44.802467346191406" x="2048.253625513246" y="1547.1801910820186">Jing Tang</text><text dy="10" fill="black" font-size="20px" dx="-24.2137508392334" x="1623.5996681334889" y="1254.4372217592813">Lei Li</text><text dy="10" fill="black" font-size="20px" dx="-42.385780334472656" x="1448.648572476159" y="644.5233818254201">Lionel Ni</text><text dy="10" fill="black" font-size="20px" dx="-49.05771255493164" x="1581.1372985475623" y="38.84101616958933">Wei Wang</text><text dy="10" fill="black" font-size="20px" dx="-63.41200637817383" x="1598.417970955727" y="144.62316887382227">Wenjia Wang</text><text dy="10" fill="black" font-size="20px" dx="-62.62553787231445" x="1648.2604531708505" y="408.84978873402196">Xiaowen Chu</text><text dy="10" fill="black" font-size="20px" dx="-44.53163528442383" x="2923.707290494584" y="249.47615785684576">Zeyi Wen</text></g></g></svg></div>
    
    <script src="/static/js/jquery-3.7.1.js"></script>
    <script src="/static/plugins/d3/d3.v7.js"></script>
    
    
    <script>
    
        // Specify the dimensions of the chart.
        const width = d3.select('.kg_container').node().getBoundingClientRect().width
        const height = d3.select('.kg_container').node().getBoundingClientRect().height
    
        // Specify the color scale.
        let color = ['#f2a7da', '#71b7ed', '#f8dc4c', 'grey', '#84c3b7', 'black']
        let color_key = '#f8dc4c'
        const colorScale_keyword = d3.scaleLinear()
            .domain([1, 20])
            .range(["#FACA2E", "#b85e14"]);
        // 定义颜色比例尺，根据citation的范围调整颜色的深浅
        const colorScale = d3.scaleLinear()
            .domain([2020, 2024])
            .range(["#e6b1be", "#d14163"]);
    
        const colorScale_auther = d3.scaleLinear()
            .domain([18, 249])
            .range(["#b9ded3", "#007f5f"]);
    
        // Create the SVG container.     preserveAspectRatio="xMinYMin meet"
        const svg = d3.select('#container_kg').append("svg")
            .attr('id', 'graph_svg')
            .style("width", '100%')
            .style("height", 'auto')
            .attr("viewBox", [0, 0, width, height])
            .on('click', function (e) {
                if (e.target.tagName === 'svg') {
                    resetNodeColors();
                }
            })
    
    
        function createMarker(id, d, fill, opacity, refX, refY) {
            refX = 0
            refY = 0
            return svg.append('marker')
                .attr('id', id)
                .attr('orient', 'auto')
                .attr('stroke-width', 2)
                .attr('markerUnits', 'strokeWidth')
                .attr('markerUnits', 'userSpaceOnUse')
                .attr('viewBox', '0 -5 10 10')
                .attr('refX', refX)
                .attr('refY', refY)
                .attr('markerWidth', 12)
                .attr('markerHeight', 12)
                .attr('orient', 'auto')
                .append('path')
                .attr('d', d)
                .attr('fill', fill)
                .attr('stroke-opacity', opacity);
        }
    
        const positiveMarker = createMarker('positiveMarker', 'M 0 -5 L 10 0 L 0 5', color[3], 0.1, 25, 0);
        const negativeMarker = createMarker('negativeMarker', 'M 10 -5 L 0 0 L 10 5', color[3], 0.1, -15, 0);
    
    
        
    
        const g = svg.append('g').attr('id', 'graph_svg_g')
    
        const zoom = d3.zoom().scaleExtent([0.1, 10]).on('zoom', function (event) {
            g.attr('transform', event.transform)
        })
        svg.call(zoom)
    
    
        let link
        let link_name
        let node
        let entity_data
        let simulation
        let nodeNameText
        let nodes, links;
    
        // Reheat the simulation when drag starts, and fix the subject position.
        function dragstarted(event) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            event.subject.fx = event.subject.x;
            event.subject.fy = event.subject.y;
        }
    
        function dragged(event) {
            const draggedNode = event.subject;
    
            // 更新作者节点的位置
            draggedNode.fx = event.x;
            draggedNode.fy = event.y;
    
    
            // 更新与作者节点连接的 paper 节点的位置
            if (draggedNode.group === 4) {
                // 过滤出与拖动节点相关的 paper 节点
                const relatedPapers = nodes.filter(node =>
                    links.some(link =>
                        link.source.name === draggedNode.name && link.target.name === node.name
                    )
                );
                relatedPapers.forEach(paper => {
                    // 计算拖动的方向
                    const dx = event.x - draggedNode.x;
                    const dy = event.y - draggedNode.y;
    
                    // 添加阻尼系数，使得 paper 节点具有滞后效果
                    const damping = 1; // 可以根据需要调整这个值
    
                    // 将 paper 节点设置为跟随拖动方向，但有滞后效果
                    paper.fx = paper.x + dx * damping;
                    paper.fy = paper.y + dy * damping;
                });
            }
    
            simulation.alphaTarget(0.1).restart();  // 重新启动模拟
        }
    
        function dragended(event) {
            const draggedNode = event.subject;
    
            // 还原拖动后的节点位置
            draggedNode.fx = null;
            draggedNode.fy = null;
    
            draggedNode.fx = event.x;
            draggedNode.fy = event.y;
    
            // 还原与作者节点连接的 paper 节点的位置
            if (draggedNode.group === 4) {
                const relatedPapers = nodes.filter(node =>
                    links.some(link =>
                        link.source.name === draggedNode.name && link.target.name === node.name)
                );
    
                relatedPapers.forEach(paper => {
                    // 移除纸节点的力中心
                    simulation.force("center" + paper.name, null);
                    paper.fx = null;
                    paper.fy = null;
                });
            }
    
            simulation.alphaTarget(0.03);  // 停止模拟加速
        }
    
        // 创建tooltip
    
    
    </script>
    
    <script>
        $(document).ready(function () {
            LoadData2()
        });
    
        function filterNode(data) {
            let filter_node = data.nodes.filter(node => node.citation > min_citation || node.group === 4 || node.group === 1);
            let filter_node_names = new Set(filter_node.map(node => node.name));
    
            // 筛选链接
            let filter_link = data.links.filter(link =>
                filter_node_names.has(link.source) && filter_node_names.has(link.target)
            );
            updateGraph({'nodes': filter_node, 'links': filter_link})
        }
    
        function removeNode(data) {
            let filter_node = data.nodes.filter(node => node.citation > min_citation || node.group === 4 || node.group === 1);
            let filter_node_names = new Set(filter_node.map(node => node.name));
    
            // 筛选链接
            let filter_link = data.links.filter(link =>
                filter_node_names.has(link.source) && filter_node_names.has(link.target)
            );
            InitGraph({'nodes': filter_node, 'links': filter_link})
        }
    
        function LoadData2() {
            $.ajax({
                url: 'http://127.0.0.1:8000/graph/query_all/',
                type: 'get',
                data: {'name': ''},
                success: function (res) {
                    entity_data = JSON.parse(res)
                    removeNode(entity_data)
                }
            })
        }
    
        function LoadData() {
            $.ajax({
                url: 'http://127.0.0.1:8000/graph/query/',
                type: 'get',
                data: {'name': ''},
                success: function (res) {
                    let request = JSON.parse(res)
                    entity_data = {
                        'nodes': request,
                        'links': []
                    }
                    InitGraph(entity_data)
                }
            })
        }
    
        function query_paper(name) {
            $.ajax({
                url: 'http://127.0.0.1:8000/graph/query_paper/',
                type: 'get',
                data: {'name': name},
                success: function (res) {
                    let request = JSON.parse(res)['results']
                    let count = JSON.parse(res)['count']
    
                    for (let i = 0; i < request.length; i++) {
                        let flag = true
                        for (let j = 0; j < entity_data.nodes.length; j++) {
                            if (entity_data.nodes[j].name === request[i].name) {
                                flag = false
                                break
                            }
                        }
                        if (flag) {
                            entity_data.nodes.push(request[i])
                        }
    
                        entity_data.links.push({
                            'source': name,
                            'target': request[i].name,
                            'value': 3,
                            'relationship': 'OWNED BY'
                        })
                    }
                    entity_data.links = Array.from(new Set(entity_data.links.map(JSON.stringify))).map(JSON.parse);
                    filterNode(entity_data)
                    
                }
            })
        }
    
        let already_click_author = []
    
        function updateGraph(data) {
    
            nodes = data.nodes.map(d => ({...d}))
            links = data.links.map(d => ({...d}))
    
            // 通过 ID 找到现有节点
            const existingNodes = new Map(node.data().map(d => [d.name, d]));
    
            // 将已有节点的位置保持不变
            nodes.forEach(node => {
                if (existingNodes.has(node.name)) {
                    // 保持现有节点的位置不变
                    node.x = existingNodes.get(node.name).x;
                    node.y = existingNodes.get(node.name).y;
                }
            });
    
    
            const authorNodes = nodes.filter(node => node.group === 4);
            const paperNodes = nodes.filter(node => node.group === 0);
    
            authorNodes.forEach((author) => {
    
                const papers = paperNodes.filter(paper => links.some(link => link.source === author.name && link.target === paper.name));
                let radius = 50;
                let currentCircleNodeCount = 0;
                let angleStep;
    
                // 计算每个paper节点的位置
                papers.forEach(paper => {
                    // 找到与当前paper节点连接的所有author节点
                    const connectedAuthors = nodes.filter(node =>
                        links.some(link => (link.source === node.name && link.target === paper.name) ||
                            (link.target === node.name && link.source === paper.name))
                    );
    
                    if (connectedAuthors.length > 1) {
                        // 计算所有连接的author节点的中心位置
                        const sum = connectedAuthors.reduce((acc, author) => {
                            acc.x += author.x;
                            acc.y += author.y;
                            return acc;
                        }, {x: 0, y: 0});
    
                        paper.x = sum.x / connectedAuthors.length;
                        paper.y = sum.y / connectedAuthors.length;
                    } else {
                        // 如果没有连接的author节点，按原来的方式计算
                        if (currentCircleNodeCount === 0 || currentCircleNodeCount === Math.floor(2 * Math.PI * radius / 50)) {
                            radius += 50;
                            currentCircleNodeCount = 0;
                            angleStep = 2 * Math.PI / Math.floor(2 * Math.PI * radius / 50);
                        }
                        const currentAngle = currentCircleNodeCount * angleStep + 5;
                        paper.x = author.x + radius * Math.cos(currentAngle);
                        paper.y = author.y + radius * Math.sin(currentAngle);
                        currentCircleNodeCount++;
                    }
                });
    
            });
    
            // 找到有多个作者连接的 paper 节点
            const paperLinkCount = {};
            links.forEach(link => {
                if (link.target in paperLinkCount) {
                    paperLinkCount[link.target]++;
                } else {
                    paperLinkCount[link.target] = 1;
                }
            });
    
            links.forEach(link => {
                const sourceNode = nodes.find(node => node.name === link.source);
                const targetNode = nodes.find(node => node.name === link.target);
                if (sourceNode && targetNode) {
                    if (targetNode.group === 0) { // 如果目标节点是论文节点
                        // 使用引用次数作为半径，设定最大半径为150
                        let paperRadius = Math.min(targetNode.citation, 150);
                        // 将引用次数线性映射到距离范围内
                        let maxDistance = 500;  // 最大距离
                        let minDistance = 150;  // 最小距离
                        link.distance = Math.max(minDistance, maxDistance - paperRadius * (maxDistance - minDistance) / 100);
                    } else {
                        // 对于非论文节点，保持原来的距离计算方式
                        const dx = sourceNode.x - targetNode.x;
                        const dy = sourceNode.y - targetNode.y;
                        link.distance = Math.sqrt(dx * dx + dy * dy);
                    }
                }
            });
    
    
            link = link.data(links, d => `${d.source.name}_${d.target.name}`)
            link.exit().remove();
            link = link
                .enter()
                .append("path")
                .attr("stroke", color[3])
                .attr("stroke-opacity", (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 1
                    } else {
                        return 0.6
                    }
                })
                .attr('marker-end', 'url(#direction)')
                .attr('id', d => d.source + '_' + d.relationship + '_' + d.target)
                .attr("stroke-width", (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 5
                    } else {
                        return 3
                    }
                })
                .merge(link);
    
    
            node = node.data(nodes, d => d.name);
            node.exit().remove();
            node = node.enter().append("circle")
                .attr("r", (d) => {
                    if (d.group === 1) {
                        return 100
                    }
                    if (d.group === 4) {
                        return 70
                    }
                    if (d.group === 0) {
                        if (d.citation < 21) {
                            return 10
                        } else if (d.citation > 20 && d.citation < 51) {
                            return 20
                        } else if (d.citation > 50 && d.citation < 101) {
                            return 30
                        } else if (d.citation > 100 && d.citation < 151) {
                            return 40
                        } else {
                            return 50
                        }
                    }
                })
                .attr("fill", (d) => {
                    if (d.group === 0) {
                        return colorScale(parseInt(d.released));
                    } else if (d.group === 4) {
                        return colorScale_auther(d.count)
                    } else {
                        if (d.name === "AI") {
                            return '#98abc5'
                        } else if (d.name === "CMA") {
                            return '#8a89a6'
                        } else if (d.name === 'DSA') {
                            return '#7b6888'
                        }
                    }
                })
                .attr('class', 'circle')
                .merge(node)
                .on('click', function (e, d) {
                    // Set the clicked node as the selected node
                    selectedNode = d;
                    if (d.group === 1) {
                        // Call the function to highlight the neighborhood
                        highlightNeighborhood_2(selectedNode);
                    } else {
                        highlightNeighborhood(selectedNode)
                    }
                });
    
            node.on('mouseover', function (event, d) {
                tooltip.transition().duration(200).style("opacity", .9);
                tooltip.html(
                    () => {
                        if (d.group === 4) {
                            return '<div class="publication-card" style="text-align: left">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.count + ' papers</p>' +
                                '<br>' +
                                '</div>'
                        } else if (d.group === 1) {
                            return d.name
                        } else {
                            let temp_path = '/static/img/' + d.id + '.png'
                            return '<div class="publication-card" style="width: 600px; text-align: left">' +
                                '<div class="entry_img">' +
                                '<img class="thumb" src="' + temp_path + '" alt="">' +
                                '</div>' +
                                '<div class="entry_main">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.authors + '</p>' +
                                '<br>' +
                                '<p>Published:' + d.released + '</p>' +
                                '<p>Venue:' + d.venue + '</p>' +
                                '</div>' +
                                '</div>'
                        }
                    })
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px")
                ;
            })
                .on('mouseout', function (d) {
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
    
            nodeNameText = nodeNameText.data(nodes, d => d.name)
            nodeNameText.exit().remove()
            nodeNameText.enter().append('text')
                .merge(nodeNameText)
    
            simulation.nodes(nodes);
            simulation.force('link').links(links);
    
            simulation.alpha(0.2).restart();
    
    
            // Add a drag behavior.
            node.call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
    
            setTimeout(fitViewBox, 1000)
        }
    
        function InitGraph(data) {
            // 图例折叠功能
            d3.select(".legend-title").on("click", function () {
                const content = d3.select(".legend-content");
                if (content.style("display") === "none") {
                    content.style("display", "block");
                    d3.select(this).text("Legend ▲");
                } else {
                    content.style("display", "none");
                    d3.select(this).text("Legend ▼");
                }
            });
    
            // so that re-evaluating this cell produces the same result.
            links = data.links.map(d => ({...d}));
            nodes = data.nodes.map(d => ({...d}));
    
            const departmentNodes = nodes.filter(node => node.group === 1)
            const authorNodes = nodes.filter(node => node.group === 4);
            const paperNodes = nodes.filter(node => node.group === 0);
    
            // 给每个节点一个初始位置，避免重叠
            departmentNodes.forEach((node, index) => {
                node.x = width / 2 + 1200 * Math.cos(index * 2 * Math.PI / departmentNodes.length);
                node.y = height / 2 + 1200 * Math.sin(index * 2 * Math.PI / departmentNodes.length);
            });
    
            
            
            
            
            
            //});
    
            departmentNodes.forEach((department) => {
                const authors = authorNodes.filter(
                    author => links.some(link => link.source === department.name && link.target === author.name));
                authors.forEach((node, index) => {
                    node.x = department.x + 800 * Math.cos(index * 2 * Math.PI / authors.length);
                    node.y = department.y + 800 * Math.sin(index * 2 * Math.PI / authors.length);
                });
    
            });
    
            authorNodes.forEach((author) => {
    
                const papers = paperNodes.filter(paper => links.some(link => link.source === author.name && link.target === paper.name));
                let radius = 50;
                let currentCircleNodeCount = 0;
                let angleStep;
    
                // 计算每个paper节点的位置
                papers.forEach(paper => {
                    // 找到与当前paper节点连接的所有author节点
                    const connectedAuthors = nodes.filter(node =>
                        links.some(link => (link.source === node.name && link.target === paper.name) ||
                            (link.target === node.name && link.source === paper.name))
                    );
    
                    if (connectedAuthors.length > 1) {
                        // 计算所有连接的author节点的中心位置
                        const sum = connectedAuthors.reduce((acc, author) => {
                            acc.x += author.x;
                            acc.y += author.y;
                            return acc;
                        }, {x: 0, y: 0});
    
                        paper.x = sum.x / connectedAuthors.length;
                        paper.y = sum.y / connectedAuthors.length;
                    } else {
                        // 如果没有连接的author节点，按原来的方式计算
                        if (currentCircleNodeCount === 0 || currentCircleNodeCount === Math.floor(2 * Math.PI * radius / 50)) {
                            radius += 50;
                            currentCircleNodeCount = 0;
                            angleStep = 2 * Math.PI / Math.floor(2 * Math.PI * radius / 50);
                        }
                        const currentAngle = currentCircleNodeCount * angleStep + 5;
                        paper.x = author.x + radius * Math.cos(currentAngle);
                        paper.y = author.y + radius * Math.sin(currentAngle);
                        currentCircleNodeCount++;
                    }
                });
    
            });
    
            // 找到有多个作者连接的 paper 节点
            const paperLinkCount = {};
            links.forEach(link => {
                if (link.target in paperLinkCount) {
                    paperLinkCount[link.target]++;
                } else {
                    paperLinkCount[link.target] = 1;
                }
            });
    
            links.forEach(link => {
                const sourceNode = nodes.find(node => node.name === link.source);
                const targetNode = nodes.find(node => node.name === link.target);
                if (sourceNode && targetNode) {
                    if (targetNode.group === 0) { // 如果目标节点是论文节点
                        // 使用引用次数作为半径，设定最大半径为150
                        let paperRadius = Math.min(targetNode.citation, 150);
                        // 将引用次数线性映射到距离范围内
                        let maxDistance = 500;  // 最大距离
                        let minDistance = 150;  // 最小距离
                        link.distance = Math.max(minDistance, maxDistance - paperRadius * (maxDistance - minDistance) / 100);
                    } else {
                        // 对于非论文节点，保持原来的距离计算方式
                        const dx = sourceNode.x - targetNode.x;
                        const dy = sourceNode.y - targetNode.y;
                        link.distance = Math.sqrt(dx * dx + dy * dy);
                    }
                }
            });
    
    
            simulation = d3.forceSimulation(nodes)
                .force("link", d3.forceLink(links).id(d => d.name).distance(function (d) {
                    return d.distance
                }))
    
                .force('collision', d3.forceCollide().radius(50))
                .force("charge", d3.forceManyBody().strength(-50))
                .force("center", d3.forceCenter(width / 2, height / 2))
                .alphaMin(0.05)
                .on("tick", ticked);
    
    
            // Add a line for each link, and a circle for each node.
            link = g.append("g")
                .attr("stroke", color[3])
                .selectAll()
                .data(links)
                .join("path")
                .attr("stroke-opacity", (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 1
                    } else {
                        return 0.6
                    }
                })
                .attr('stroke-width', (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 5
                    } else {
                        return 3
                    }
    
                })
                .attr('id', d => d.source + '_' + d.relationship + '_' + d.target);
    
            node = g.append("g")
                .attr("stroke", '#ffffff')
                .attr("stroke", color[5])
                .attr("stroke-width", 1.5)
                .selectAll()
                .data(nodes)
                .join("circle")
                .attr("r", (d) => {
                    if (d.group === 1) {
                        return 100
                    }
                    if (d.group === 4) {
                        return 70
                    }
                    if (d.group === 0) {
                        if (d.citation < 21) {
                            return 10
                        } else if (d.citation > 20 && d.citation < 51) {
                            return 20
                        } else if (d.citation > 50 && d.citation < 101) {
                            return 30
                        } else if (d.citation > 100 && d.citation < 151) {
                            return 40
                        } else {
                            return 50
                        }
                    }
                })
                .attr("fill", (d) => {
                    if (d.group === 0) {
                        return colorScale(parseInt(d.released));
                    } else if (d.group === 4) {
                        return colorScale_auther(d.count)
                    } else {
                        if (d.name === "AI") {
                            return '#247181'
                        } else if (d.name === "CMA") {
                            return '#619ea9'
                        } else if (d.name === 'DSA') {
                            return '#224659'
                        }
                    }
                })
                .attr('class', 'circle')
                .on('click', function (e, d) {
                    // Set the clicked node as the selected node
                    selectedNode = d;
                    console.log(d)
                    if (d.group === 1) {
                        // Call the function to highlight the neighborhood
                        highlightNeighborhood_2(selectedNode);
                    } else {
                        highlightNeighborhood(selectedNode)
                    }
    
                })
    
            node.on('mouseover', function (event, d) {
                tooltip.transition().duration(200).style("opacity", .9);
                tooltip.html(
                    () => {
                        if (d.group === 4) {
                            return '<div class="publication-card" style="text-align: left">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.count + ' papers</p>' +
                                '<br>' +
                                '</div>'
                        } else if (d.group === 1) {
                            return d.name
                        } else {
                            let temp_path = '/static/img/' + d.id + '.png'
                            return '<div class="publication-card" style="width: 600px; text-align: left">' +
                                '<div class="entry_img">' +
                                '<img class="thumb" src="' + temp_path + '" alt="">' +
                                '</div>' +
                                '<div class="entry_main">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.authors + '</p>' +
                                '<br>' +
                                '<p>Citation:' + d.citation + '</p>' +
                                '<p>Published:' + d.released + '</p>' +
                                '<p>Venue:' + d.venue + '</p>' +
                                '</div>' +
                                '</div>'
                        }
                    })
                    .style("left", (event.pageX + 50) + "px")
                    .style("top", (event.pageY - 140) + "px")
                ;
            })
                .on('mouseout', function (d) {
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            nodeNameText = g.append('g').selectAll().data(nodes).join('text')
                .text((d) => {
                    if (d.group === 4 || d.group === 1) {
                        return d.name
                    }
                })
                .attr('dy', (d) => {
                    if (d.group === 1) {
                        return 15
                    } else {
                        return 10
                    }
                })
                .attr('fill', color[5])
                .attr('font-size', (d) => {
                    if (d.group === 1) {
                        return '40px';  // 对于 group 1 的字体大小
                    } else {
                        return '20px';  // 对于其他组的字体大小
                    }
                });
    
            // 然后通过 each 方法调整 dx 属性
            nodeNameText.each(function (d) {
                const bbox = this.getBBox();
                d3.select(this).attr('dx', -bbox.width / 2);
            });
    
            // Add a drag behavior.
            node.call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
    
            // Set the position attributes of links and nodes each time the simulation ticks.
            function ticked() {
                link
                    .attr('d', function (d) {
                        if (d.source.x < d.target.x) {
                            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y
                        } else {
                            return 'M ' + d.target.x + ' ' + d.target.y + ' L ' + d.source.x + ' ' + d.source.y
                        }
                    })
    
                node.attr("cx", d => d.x).attr("cy", d => d.y);
    
                nodeNameText.attr("x", d => d.x).attr("y", d => d.y);
            }
    
    
            setTimeout(fitViewBox, 1000)
    
    
        }
    
        function InitGraphByQA(data) {
            // so that re-evaluating this cell produces the same result.
            links = data.links.map(d => ({...d}));
            nodes = data.nodes.map(d => ({...d}));
    
    
            const deptNodes = nodes.filter(node => node.group === 1);
            const authorNodes = nodes.filter(node => node.group === 4);
            const paperNodes = nodes.filter(node => node.group === 0);
            const keywordNodes = nodes.filter(node => node.group === 2);
    
            deptNodes.forEach((node, index) => {
                node.x = width / 2 + 600 * Math.cos(index * 2 * Math.PI / deptNodes.length);
                node.y = height / 2 + 600 * Math.sin(index * 2 * Math.PI / deptNodes.length);
            })
    
            deptNodes.forEach((dept) => {
                const authors = authorNodes.filter(
                    author => links.some(link => link.source === author.name && link.target === dept.name))
                authors.forEach((node, index) => {
                    node.x = dept.x + 600 * Math.cos(index * 2 * Math.PI / authors.length);
                    node.y = dept.y + 600 * Math.sin(index * 2 * Math.PI / authors.length);
                });
            })
    
            authorNodes.forEach((author, index) => {
    
                const papers = paperNodes.filter(paper => links.some(link => link.source === author.name && link.target === paper.name));
    
                // 计算每个paper节点的位置
                papers.forEach(paper => {
                    // 找到与当前paper节点连接的所有author节点
                    const connectedAuthors = authorNodes.filter(node =>
                        links.some(link => (link.source === node.name && link.target === paper.name) ||
                            (link.target === node.name && link.source === paper.name))
                    );
    
                    if (connectedAuthors.length > 1) {
                        // 计算所有连接的author节点的中心位置
                        const sum = connectedAuthors.reduce((acc, author) => {
                            acc.x += author.x;
                            acc.y += author.y;
                            return acc;
                        }, {x: 0, y: 0});
    
                        paper.x = sum.x / connectedAuthors.length;
                        paper.y = sum.y / connectedAuthors.length;
                    } else {
                        paper.x = author.x + 400 * Math.cos(index * 2 * Math.PI / papers.length);
                        paper.y = author.y + 400 * Math.sin(index * 2 * Math.PI / papers.length);
                    }
                });
    
            });
    
            paperNodes.forEach((paper, index) => {
                const keywords = keywordNodes.filter(
                    keyword => links.some(link => link.source === paper.name && link.target === keyword.name));
                keywords.forEach(keyword => {
                    const connectedPapers = paperNodes.filter(node =>
                        links.some(link => (link.source === node.name && link.target === keyword.name) ||
                            (link.target === node.name && link.source === keyword.name))
                    )
    
                    if (connectedPapers.length > 1) {
                        const sum = connectedPapers.reduce((acc, paper) => {
                            acc.x += paper.x;
                            acc.y += paper.y;
                            return acc
                        }, {x: 0, y: 0})
                        keyword.x = sum.x / connectedPapers.length;
                        keyword.y = sum.y / connectedPapers.length;
                    } else {
                        keyword.x = paper.x + 200 * Math.cos(index * 2 * Math.PI / keywords.length);
                        keyword.y = paper.y + 200 * Math.sin(index * 2 * Math.PI / keywords.length);
                    }
    
                })
            });
    
    
            console.log(deptNodes)
            console.log(authorNodes)
            console.log(paperNodes)
            console.log(keywordNodes)
    
            links.forEach(link => {
                const sourceNode = nodes.find(node => node.name === link.source);
                const targetNode = nodes.find(node => node.name === link.target);
                if (sourceNode && targetNode) {
                    // 对于非论文节点，保持原来的距离计算方式
                    const dx = sourceNode.x - targetNode.x;
                    const dy = sourceNode.y - targetNode.y;
                    link.distance = Math.sqrt(dx * dx + dy * dy);
                }
            });
    
    
            simulation = d3.forceSimulation(nodes)
                .force("link", d3.forceLink(links).id(d => d.name).distance(function (d) {
                    return d.distance
                }))
    
                .force('collision', d3.forceCollide().radius(50))
                .force("charge", d3.forceManyBody().strength(-50))
                .force("center", d3.forceCenter(width / 2, height / 2))
                .alphaMin(0.05)
                .on("tick", ticked);
    
            // Add a line for each link, and a circle for each node.
            link = g.append("g")
                .attr("stroke", color[3])
                .selectAll()
                .data(links)
                .join("path")
                .attr("stroke-opacity", (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 1
                    } else {
                        return 0.6
                    }
                })
                .attr('stroke-width', (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 5
                    } else {
                        return 3
                    }
    
                })
                .attr('id', d => d.source + '_' + d.relationship + '_' + d.target);
    
            node = g.append("g")
                .attr("stroke", color[5])
                .attr("stroke-width", 1.5)
                .selectAll()
                .data(nodes)
                .join("circle")
                .attr("r", (d) => {
                    if (d.group === 1) {
                        return 100
                    }
                    if (d.group === 4) {
                        return 70
                    }
                    if (d.group === 0) {
                        if (d.citation < 21) {
                            return 20
                        } else if (d.citation > 20 && d.citation < 51) {
                            return 20
                        } else if (d.citation > 50 && d.citation < 101) {
                            return 30
                        } else if (d.citation > 100 && d.citation < 151) {
                            return 40
                        } else {
                            return 50
                        }
                    }
                    if (d.group === 2) {
                        return 20
                    }
                })
                .attr("fill", (d) => {
                    if (d.group === 0) {
                        return colorScale(parseInt(d.released));
                    } else if (d.group === 4) {
                        return colorScale_auther(d.count)
                    } else if (d.group === 2) {
                        return colorScale_keyword(d.citation)
                    } else {
                        if (d.name === "AI") {
                            return '#247181'
                        } else if (d.name === "CMA") {
                            return '#619ea9'
                        } else if (d.name === 'DSA') {
                            return '#224659'
                        }
                    }
                })
                .attr('class', 'circle')
                .on('click', function (e, d) {
                    // Set the clicked node as the selected node
                    selectedNode = d;
                    console.log(d)
                    if (d.group === 1 || d.group === 4) {
                        // Call the function to highlight the neighborhood
                        highlightNeighborhood_2(selectedNode);
                    } else {
                        highlightNeighborhood(selectedNode)
                    }
                })
    
            node.on('mouseover', function (event, d) {
                tooltip.transition().duration(200).style("opacity", .9);
                
                tooltip.html(
                    () => {
                        if (d.group === 4) {
                            return '<div class="publication-card" style="text-align: left">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.count + ' papers</p>' +
                                '<br>' +
                                '</div>'
                        } else if (d.group === 1 || d.group === 2) {
                            return d.name
                        } else {
                            let temp_path = '/static/img/' + d.id + '.png'
                            return '<div class="publication-card" style="width: 600px; text-align: left">' +
                                '<div class="entry_img">' +
                                '<img class="thumb" src="' + temp_path + '" alt="">' +
                                '</div>' +
                                '<div class="entry_main">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.authors + '</p>' +
                                '<br>' +
                                '<p>Citation:' + d.citation + '</p>' +
                                '<p>Published:' + d.released + '</p>' +
                                '<p>Venue:' + d.venue + '</p>' +
                                '</div>' +
                                '</div>'
                        }
                    })
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
                .on('mouseout', function (d) {
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            nodeNameText = g.append('g').selectAll().data(nodes).join('text')
                .text((d) => {
                    if (d.group === 4 || d.group === 1 || d.group === 2) {
                        return d.name
                    }
                })
                .attr('dy', (d) => {
                    if (d.group === 1) {
                        return 15
                    } else if (d.group === 2) {
                        return 45
                    } else {
                        return 10
                    }
                })
                .attr('fill', color[5])
                .attr('font-size', (d) => {
                    if (d.group === 1) {
                        return '40px';  // 对于 group 1 的字体大小
                    } else {
                        return '20px';  // 对于其他组的字体大小
                    }
                });
    
            // 然后通过 each 方法调整 dx 属性
            nodeNameText.each(function (d) {
                const bbox = this.getBBox();
                d3.select(this).attr('dx', -bbox.width / 2);
            });
    
            // Add a drag behavior.
            node.call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
    
    
            // Set the position attributes of links and nodes each time the simulation ticks.
            function ticked() {
                link
                    .attr('d', function (d) {
                        if (d.source.x < d.target.x) {
                            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y
                        } else {
                            return 'M ' + d.target.x + ' ' + d.target.y + ' L ' + d.source.x + ' ' + d.source.y
                        }
                    })
    
                node.attr("cx", d => d.x).attr("cy", d => d.y);
    
                nodeNameText.attr("x", d => d.x).attr("y", d => d.y);
            }
    
    
            setTimeout(fitViewBox, 1000)
    
        }
    
        function removeGraphNode() {
            enableComponent()
            let clear = {
                'nodes': [],
                'links': [],
            }
    
            updateGraph(clear)
            removeNode(entity_data)
        }
    
        function fitViewBox() {
            // 获取当前的变换
            const transform = d3.zoomTransform(svg.node());
            // 计算节点的边界框
            const xExtent = d3.extent(nodes, d => d.x);
            const yExtent = d3.extent(nodes, d => d.y);
            // 计算节点的中心点
            const xCenter = (xExtent[0] + xExtent[1]) / 2;
            const yCenter = (yExtent[0] + yExtent[1]) / 2;
    
            // 计算边界框的宽度和高度
            const widthExtent = xExtent[1] - xExtent[0];
            const heightExtent = yExtent[1] - yExtent[0];
    
    
            // 计算缩放比例，使节点完全显示在视图中
            const scale = Math.min(
                (width - 50) / widthExtent,
                (height - 50) / heightExtent
            );
    
    
            // 计算平移量以使节点居中
            const tx = xCenter - width / scale / 2
            const ty = yCenter - height / scale / 2
    
    
            // 应用缩放和平移变换
            svg.transition()
                .call(zoom.transform, d3.zoomIdentity)
                .on('end', () => {
                    svg.transition().duration(750)
                        .attr("viewBox", `${tx} ${ty} ${width / scale} ${height / scale}`)
                        .on('end', () => {
                            svg.attr("viewBox", `${tx} ${ty} ${width / scale} ${height / scale}`);
                        });
                });
        }
    
    
        let selectedNode = null;
    
        // Function to highlight the selected node and its first-order neighbors
        function highlightNeighborhood(selectedNode) {
            const neighbors = new Set();
    
            // Find the neighbors (first-order connections)
            links.forEach(link => {
                if (link.source.name === selectedNode.name) {
                    neighbors.add(link.target.name);
                } else if (link.target.name === selectedNode.name) {
                    neighbors.add(link.source.name);
                }
            });
            neighbors.add(selectedNode.name); // Also include the selected node itself
    
            // Update the color of nodes
            node.attr('fill', (n) => {
                if (neighbors.has(n.name)) {
                    // Original color for the selected node and its neighbors
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else if (n.group === 2) {
                        return colorScale_keyword(n.citation)
                    } else {
                        if (n.name === "AI") {
                            return '#247181';
                        } else if (n.name === "CMA") {
                            return '#619ea9';
                        } else if (n.name === 'DSA') {
                            return '#224659';
                        }
                    }
                } else {
                    // Lighten color for other nodes
                    return "#ddd"; // or use a different light color
                }
            });
    
            // Update the color of links
            link.attr("stroke", (l) => {
                if (neighbors.has(l.source.name) && neighbors.has(l.target.name)) {
                    return color[3]; // Original color for links between selected node and its neighbors
                } else {
                    return "#ddd"; // Lighten color for other links
                }
            }).attr("stroke-opacity", (l) => {
                if (neighbors.has(l.source.name) && neighbors.has(l.target.name)) {
                    if (l.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                } else {
                    return 0.3; // Reduce opacity for other links
                }
            });
        }
    
        function highlightNeighborhood_2(selectedNode) {
            const neighbors = new Set();
            const secondNeighbors = new Set();
    
            // Find the first-order neighbors (direct connections)
            links.forEach(link => {
                if (link.source.name === selectedNode.name) {
                    neighbors.add(link.target.name);
                } else if (link.target.name === selectedNode.name) {
                    neighbors.add(link.source.name);
                }
            });
    
            // Find the second-order neighbors (neighbors of first-order neighbors)
            links.forEach(link => {
                if (neighbors.has(link.source.name)) {
                    secondNeighbors.add(link.target.name);
                } else if (neighbors.has(link.target.name)) {
                    secondNeighbors.add(link.source.name);
                }
            });
    
            neighbors.add(selectedNode.name); // Include the selected node itself
            secondNeighbors.delete(selectedNode.name); // Avoid re-adding the selected node
    
            // Update the color of nodes
            node.attr('fill', (n) => {
                if (neighbors.has(n.name)) {
                    console.log(n.group)
                    // Original color for the selected node and its first-order neighbors
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else if (n.group === 2) {
                        return colorScale_keyword(n.citation)
                    } else {
                        if (n.name === "AI") {
                            return '#247181';
                        } else if (n.name === "CMA") {
                            return '#619ea9';
                        } else if (n.name === 'DSA') {
                            return '#234559';
                        }
                    }
                } else if (secondNeighbors.has(n.name)) {
                    // Original color for the selected node and its first-order neighbors
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else if (n.group === 2) {
                        return colorScale_keyword(n.citation)
                    } else {
                        if (n.name === "AI") {
                            return '#e3716e';
                        } else if (n.name === "CMA") {
                            return '#7ac7e2';
                        } else if (n.name === 'DSA') {
                            return '#f7df87';
                        }
                    }
                } else {
                    // Lighten color for other nodes
                    return "#ddd"; // or use a different light color
                }
            });
    
            // Update the color of links
            link.attr("stroke", (l) => {
                if (neighbors.has(l.source.name) && neighbors.has(l.target.name)) {
                    return color[3]; // Original color for links between selected node and its first-order neighbors
                } else if (secondNeighbors.has(l.source.name) || secondNeighbors.has(l.target.name)) {
                    return "#aaa"; // Slightly different color for links to second-order neighbors
                } else {
                    return "#ddd"; // Lighten color for other links
                }
            }).attr("stroke-opacity", (l) => {
                if (neighbors.has(l.source.name) && neighbors.has(l.target.name)) {
                    if (l.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                } else if (secondNeighbors.has(l.source.name) || secondNeighbors.has(l.target.name)) {
                    return 0.5; // Reduce opacity for second-order links
                } else {
                    return 0.3; // Reduce opacity for other links
                }
            });
        }
    
        // Function to reset all nodes to their original colors
        function resetNodeColors() {
            node.attr('fill', (n) => {
                if (n.group === 0) {
                    return colorScale(parseInt(n.released));
                } else if (n.group === 4) {
                    return colorScale_auther(n.count);
                } else if (n.group === 2) {
                    return colorScale_keyword(n.citation)
                } else {
                    if (n.name === "AI") {
                        return '#247181';
                    } else if (n.name === "CMA") {
                        return '#619ea9';
                    } else if (n.name === 'DSA') {
                        return '#224659';
                    }
                }
            });
    
            link.attr("stroke", color[3])
                .attr("stroke-opacity", (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                });
    
    
            selectedNode = null; // Clear the selection
        }
    
        // Function to highlight papers published in a specific year and their neighbors
        function highlightPapersByYear(year) {
            const papers = nodes.filter(n => n.group === 0 && n.released === year);
            const neighbors = new Set();
            const relatedLinks = new Set();
    
            papers.forEach(paper => {
                neighbors.add(paper.name);
                links.forEach(link => {
                    if (link.source.name === paper.name || link.target.name === paper.name) {
                        neighbors.add(link.source.name);
                        neighbors.add(link.target.name);
                        relatedLinks.add(link);
                    }
                });
            });
    
            // Update the color of nodes
            node.attr('fill', (n) => {
                if (neighbors.has(n.name)) {
                    // Original color for the paper and its neighbors
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else {
                        if (n.name === "AI") {
                            return '#247181';
                        } else if (n.name === "CMA") {
                            return '#619ea9';
                        } else if (n.name === 'DSA') {
                            return '#224659';
                        }
                    }
                } else {
                    // Lighten color for other nodes
                    return "#ddd"; // or use a different light color
                }
            });
    
            // Update the color of links
            link.attr("stroke", (l) => {
                if (relatedLinks.has(l)) {
                    return color[3]; // Original color for links between papers and their neighbors
                } else {
                    return "#ddd"; // Lighten color for other links
                }
            }).attr("stroke-opacity", (l) => {
                if (relatedLinks.has(l)) {
                    if (l.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                } else {
                    return 0.3; // Reduce opacity for other links
                }
            });
        }
    
        // Function to highlight nodes based on department and year
        function highlightByDepartmentAndYear(departmentName, year) {
            // Find the selected department
            const department = nodes.find(n => n.group === 1 && n.name === departmentName);
            if (!department) return;
    
            // Find authors belonging to this department
            const authors = nodes.filter(n => n.group === 4 &&
                links.some(l => l.source.name === department.name && l.target.name === n.name));
    
            const papers = [];
            const neighbors = new Set();
            const relatedLinks = new Set();
    
            authors.forEach(author => {
                // Add the author as a neighbor
                neighbors.add(author.name);
    
                // Find papers by this author in the selected year
                const authorPapers = nodes.filter(n => n.group === 0 && n.released === year &&
                    links.some(l => l.source.name === author.name && l.target.name === n.name));
                papers.push(...authorPapers);
    
                // Add the paper as a neighbor
                authorPapers.forEach(paper => {
                    neighbors.add(paper.name);
    
                    // Add links related to this author and paper
                    links.forEach(link => {
                        if ((link.source.name === author.name && link.target.name === paper.name) ||
                            (link.target.name === author.name && link.source.name === paper.name)) {
                            relatedLinks.add(link);
                        }
                    });
                });
            });
    
    
            // Update the color of nodes
            node.attr('fill', (n) => {
                if (n.name === department.name || neighbors.has(n.name)) {
                    // Original color for the department, authors, and papers
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else {
                        if (n.name === "AI") {
                            return '#247181';
                        } else if (n.name === "CMA") {
                            return '#619ea9';
                        } else if (n.name === 'DSA') {
                            return '#224659';
                        }
                    }
                } else {
                    // Lighten color for other nodes
                    return "#ddd"; // or use a different light color
                }
            });
    
            // Update the color of links
            link.attr("stroke", (l) => {
                if (relatedLinks.has(l) || (l.source.name === department.name && neighbors.has(l.target.name))) {
                    return color[3]; // Original color for links between the department, authors, and papers
                } else {
                    return "#ddd"; // Lighten color for other links
                }
            }).attr("stroke-opacity", (l) => {
                if (relatedLinks.has(l) || (l.source.name === department.name && neighbors.has(l.target.name))) {
                    if (l.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                } else {
                    return 0.3; // Reduce opacity for other links
                }
            });
        }
    
        function highlightNodesByNameList(nameList) {
            const nodesToHighlight = new Set(nameList);
            const neighbors = new Set();
            const relatedLinks = new Set();
    
            // Identify all nodes and links to be highlighted
            nodes.forEach(node => {
                if (nodesToHighlight.has(node.name)) {
                    neighbors.add(node.name);
                    links.forEach(link => {
                        if (link.source.name === node.name || link.target.name === node.name) {
                            neighbors.add(link.source.name);
                            neighbors.add(link.target.name);
                            relatedLinks.add(link);
                        }
                    });
                }
            });
    
            // Update the color of nodes
            node.attr('fill', (n) => {
                if (neighbors.has(n.name)) {
                    // Original color for the highlighted nodes and their neighbors
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else {
                        if (n.name === "AI") {
                            return '#247181';
                        } else if (n.name === "CMA") {
                            return '#619ea9';
                        } else if (n.name === 'DSA') {
                            return '#234559';
                        }
                    }
                } else {
                    // Lighten color for other nodes
                    return "#ddd"; // or use a different light color
                }
            });
    
            // Update the color and opacity of links
            link.attr("stroke", (l) => {
                if (relatedLinks.has(l)) {
                    return color[3]; // Original color for links involving highlighted nodes
                } else {
                    return "#ddd"; // Lighten color for other links
                }
            }).attr("stroke-opacity", (l) => {
                if (relatedLinks.has(l)) {
                    if (l.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                } else {
                    return 0.3; // Reduce opacity for other links
                }
            });
        }
    
    
    </script>
    
    
    
    </div>
            </div>
    
            <div class="right-container">
    
                <div class="top-container">
                    <div class="title-box" id="publicationTitle">Word Cloud</div>
                    <div class="content-box" style="height: calc(100% - 30px)">
                        <div id="wordCloud_container" style="height: 100%;width: 100%">
                        <svg width="505.72918701171875" height="469.72918701171875"><g transform="translate(257.6744689941406,236.53126525878906)"><text text-anchor="middle" transform="translate(93,-91)rotate(0)" style="font-size: 50px; fill: rgb(115, 132, 106); cursor: pointer;">deep learning</text><text text-anchor="middle" transform="translate(-55,-45)rotate(0)" style="font-size: 41px; fill: rgb(79, 97, 87); cursor: pointer;">federated learning</text><text text-anchor="middle" transform="translate(-60,30)rotate(0)" style="font-size: 38px; fill: rgb(124, 78, 76); cursor: pointer;">large language models</text><text text-anchor="middle" transform="translate(88,-164)rotate(0)" style="font-size: 35px; fill: rgb(124, 78, 76); cursor: pointer;">machine learning</text><text text-anchor="middle" transform="translate(-118,73)rotate(0)" style="font-size: 34px; fill: rgb(222, 185, 174); cursor: pointer;">virtual reality</text><text text-anchor="middle" transform="translate(-125,-200)rotate(0)" style="font-size: 33px; fill: rgb(199, 140, 80); cursor: pointer;">visual analytics</text><text text-anchor="middle" transform="translate(40,131)rotate(0)" style="font-size: 30px; fill: rgb(222, 185, 174); cursor: pointer;">graph neural networks</text><text text-anchor="middle" transform="translate(110,64)rotate(0)" style="font-size: 28px; fill: rgb(124, 78, 76); cursor: pointer;">augmented reality</text><text text-anchor="middle" transform="translate(-132,-122)rotate(0)" style="font-size: 24px; fill: rgb(222, 185, 174); cursor: pointer;">visualization</text><text text-anchor="middle" transform="translate(-13,-18)rotate(0)" style="font-size: 18px; fill: rgb(79, 97, 87); cursor: pointer;">metaverse</text><text text-anchor="middle" transform="translate(102,-15)rotate(0)" style="font-size: 18px; fill: rgb(184, 190, 193); cursor: pointer;">edge computing</text><text text-anchor="middle" transform="translate(88,-214)rotate(0)" style="font-size: 16px; fill: rgb(142, 152, 152); cursor: pointer;">reinforcement learning</text><text text-anchor="middle" transform="translate(8,-143)rotate(0)" style="font-size: 14px; fill: rgb(130, 116, 115); cursor: pointer;">benchmark</text><text text-anchor="middle" transform="translate(-174,-25)rotate(0)" style="font-size: 14px; fill: rgb(130, 116, 115); cursor: pointer;">data visualization</text><text text-anchor="middle" transform="translate(-77,-20)rotate(0)" style="font-size: 14px; fill: rgb(124, 78, 76); cursor: pointer;">gpu</text><text text-anchor="middle" transform="translate(-120,-160)rotate(0)" style="font-size: 14px; fill: rgb(51, 51, 51); cursor: pointer;">transformer</text><text text-anchor="middle" transform="translate(192,11)rotate(0)" style="font-size: 13px; fill: rgb(142, 152, 152); cursor: pointer;">covid-19</text><text text-anchor="middle" transform="translate(-120,94)rotate(0)" style="font-size: 12px; fill: rgb(130, 116, 115); cursor: pointer;">artificial intelligence</text><text text-anchor="middle" transform="translate(-172,118)rotate(0)" style="font-size: 12px; fill: rgb(142, 152, 152); cursor: pointer;">contrastive learning</text><text text-anchor="middle" transform="translate(-162,144)rotate(0)" style="font-size: 12px; fill: rgb(158, 147, 138); cursor: pointer;">accessibility</text><text text-anchor="middle" transform="translate(-170,167)rotate(0)" style="font-size: 11px; fill: rgb(142, 152, 152); cursor: pointer;">anomaly detection</text><text text-anchor="middle" transform="translate(198,-12)rotate(0)" style="font-size: 11px; fill: rgb(115, 132, 106); cursor: pointer;">blockchain</text><text text-anchor="middle" transform="translate(-63,172)rotate(0)" style="font-size: 11px; fill: rgb(114, 152, 197); cursor: pointer;">older adults</text><text text-anchor="middle" transform="translate(85,-147)rotate(0)" style="font-size: 10px; fill: rgb(130, 116, 115); cursor: pointer;">interview</text><text text-anchor="middle" transform="translate(33,174)rotate(0)" style="font-size: 10px; fill: rgb(199, 140, 80); cursor: pointer;">large language model</text><text text-anchor="middle" transform="translate(-81,-95)rotate(0)" style="font-size: 10px; fill: rgb(222, 185, 174); cursor: pointer;">survey</text><text text-anchor="middle" transform="translate(-132,-105)rotate(0)" style="font-size: 10px; fill: rgb(158, 147, 138); cursor: pointer;">storytelling</text><text text-anchor="middle" transform="translate(-155,189)rotate(0)" style="font-size: 9px; fill: rgb(115, 132, 106); cursor: pointer;">relation extraction</text><text text-anchor="middle" transform="translate(164,173)rotate(0)" style="font-size: 9px; fill: rgb(79, 97, 87); cursor: pointer;">distributed deep learning</text><text text-anchor="middle" transform="translate(-143,-184)rotate(0)" style="font-size: 9px; fill: rgb(142, 152, 152); cursor: pointer;">computer vision</text><text text-anchor="middle" transform="translate(-123,-87)rotate(0)" style="font-size: 8px; fill: rgb(142, 152, 152); cursor: pointer;">privacy</text><text text-anchor="middle" transform="translate(-6,193)rotate(0)" style="font-size: 8px; fill: rgb(184, 190, 193); cursor: pointer;">transfer learning</text><text text-anchor="middle" transform="translate(75,192)rotate(0)" style="font-size: 8px; fill: rgb(104, 170, 182); cursor: pointer;">self-supervised learning</text><text text-anchor="middle" transform="translate(145,-76)rotate(0)" style="font-size: 8px; fill: rgb(184, 190, 193); cursor: pointer;">road network</text><text text-anchor="middle" transform="translate(-99,205)rotate(0)" style="font-size: 8px; fill: rgb(115, 132, 106); cursor: pointer;">graph neural network</text><text text-anchor="middle" transform="translate(180,-144)rotate(0)" style="font-size: 8px; fill: rgb(79, 97, 87); cursor: pointer;">visualization recommendation</text><text text-anchor="middle" transform="translate(29,209)rotate(0)" style="font-size: 8px; fill: rgb(222, 185, 174); cursor: pointer;">human-centered computing</text><text text-anchor="middle" transform="translate(133,210)rotate(0)" style="font-size: 8px; fill: rgb(184, 190, 193); cursor: pointer;">action recognition</text><text text-anchor="middle" transform="translate(202,-33)rotate(0)" style="font-size: 7px; fill: rgb(79, 97, 87); cursor: pointer;">multi-task learning</text><text text-anchor="middle" transform="translate(17,99)rotate(0)" style="font-size: 7px; fill: rgb(104, 170, 182); cursor: pointer;">time series</text><text text-anchor="middle" transform="translate(-26,146)rotate(0)" style="font-size: 7px; fill: rgb(79, 97, 87); cursor: pointer;">cinematic arts</text><text text-anchor="middle" transform="translate(8,78)rotate(0)" style="font-size: 7px; fill: rgb(184, 190, 193); cursor: pointer;">gan</text><text text-anchor="middle" transform="translate(-72,190)rotate(0)" style="font-size: 7px; fill: rgb(51, 51, 51); cursor: pointer;">state-of-the-art</text><text text-anchor="middle" transform="translate(-69,219)rotate(0)" style="font-size: 7px; fill: rgb(222, 185, 174); cursor: pointer;">diffusion model</text><text text-anchor="middle" transform="translate(210,-224)rotate(0)" style="font-size: 7px; fill: rgb(115, 132, 106); cursor: pointer;">mobile computing</text><text text-anchor="middle" transform="translate(-140,223)rotate(0)" style="font-size: 7px; fill: rgb(79, 97, 87); cursor: pointer;">urban computing</text><text text-anchor="middle" transform="translate(196,189)rotate(0)" style="font-size: 7px; fill: rgb(51, 51, 51); cursor: pointer;">mobile augmented reality</text><text text-anchor="middle" transform="translate(-198,-92)rotate(0)" style="font-size: 7px; fill: rgb(158, 147, 138); cursor: pointer;">user experience</text><text text-anchor="middle" transform="translate(220,98)rotate(0)" style="font-size: 7px; fill: rgb(51, 51, 51); cursor: pointer;">social networks</text><text text-anchor="middle" transform="translate(209,-206)rotate(0)" style="font-size: 6px; fill: rgb(184, 190, 193); cursor: pointer;">neural networks</text><text text-anchor="middle" transform="translate(-218,-160)rotate(0)" style="font-size: 6px; fill: rgb(130, 116, 115); cursor: pointer;">extended reality</text><text text-anchor="middle" transform="translate(-180,205)rotate(0)" style="font-size: 6px; fill: rgb(51, 51, 51); cursor: pointer;">authentication</text><text text-anchor="middle" transform="translate(96,76)rotate(0)" style="font-size: 6px; fill: rgb(158, 147, 138); cursor: pointer;">generative ai</text><text text-anchor="middle" transform="translate(23,224)rotate(0)" style="font-size: 6px; fill: rgb(142, 152, 152); cursor: pointer;">human-computer interaction</text><text text-anchor="middle" transform="translate(118,228)rotate(0)" style="font-size: 6px; fill: rgb(130, 116, 115); cursor: pointer;">submodular maximization</text><text text-anchor="middle" transform="translate(209,-71)rotate(0)" style="font-size: 6px; fill: rgb(142, 152, 152); cursor: pointer;">cued speech</text><text text-anchor="middle" transform="translate(221,215)rotate(0)" style="font-size: 6px; fill: rgb(158, 147, 138); cursor: pointer;">deep neural network</text><text text-anchor="middle" transform="translate(209,148)rotate(0)" style="font-size: 6px; fill: rgb(158, 147, 138); cursor: pointer;">assistive technology</text><text text-anchor="middle" transform="translate(216,202)rotate(0)" style="font-size: 6px; fill: rgb(142, 152, 152); cursor: pointer;">attention mechanism</text><text text-anchor="middle" transform="translate(213,229)rotate(0)" style="font-size: 6px; fill: rgb(114, 152, 197); cursor: pointer;">digital humanities</text><text text-anchor="middle" transform="translate(144,-53)rotate(0)" style="font-size: 6px; fill: rgb(115, 132, 106); cursor: pointer;">interaction</text><text text-anchor="middle" transform="translate(195,30)rotate(0)" style="font-size: 5px; fill: rgb(158, 147, 138); cursor: pointer;">knowledge graph</text><text text-anchor="middle" transform="translate(123,-39)rotate(0)" style="font-size: 5px; fill: rgb(79, 97, 87); cursor: pointer;">vr</text><text text-anchor="middle" transform="translate(67,96)rotate(0)" style="font-size: 5px; fill: rgb(79, 97, 87); cursor: pointer;">dataset</text><text text-anchor="middle" transform="translate(-34,-5)rotate(0)" style="font-size: 5px; fill: rgb(158, 147, 138); cursor: pointer;">data video</text><text text-anchor="middle" transform="translate(-74,148)rotate(0)" style="font-size: 5px; fill: rgb(104, 170, 182); cursor: pointer;">creative arts</text><text text-anchor="middle" transform="translate(-82,-111)rotate(0)" style="font-size: 5px; fill: rgb(79, 97, 87); cursor: pointer;">graphs</text><text text-anchor="middle" transform="translate(-65,-149)rotate(0)" style="font-size: 5px; fill: rgb(199, 140, 80); cursor: pointer;">gamification</text><text text-anchor="middle" transform="translate(126,97)rotate(0)" style="font-size: 5px; fill: rgb(142, 152, 152); cursor: pointer;">cloud computing</text><text text-anchor="middle" transform="translate(-118,-12)rotate(0)" style="font-size: 5px; fill: rgb(79, 97, 87); cursor: pointer;">5g</text><text text-anchor="middle" transform="translate(149,-39)rotate(0)" style="font-size: 5px; fill: rgb(51, 51, 51); cursor: pointer;">smartphone</text><text text-anchor="middle" transform="translate(-78,-5)rotate(0)" style="font-size: 5px; fill: rgb(115, 132, 106); cursor: pointer;">active learning</text><text text-anchor="middle" transform="translate(-176,-6)rotate(0)" style="font-size: 5px; fill: rgb(114, 152, 197); cursor: pointer;">inference</text><text text-anchor="middle" transform="translate(-221,-13)rotate(0)" style="font-size: 5px; fill: rgb(124, 78, 76); cursor: pointer;">social media</text><text text-anchor="middle" transform="translate(137,-64)rotate(0)" style="font-size: 5px; fill: rgb(130, 116, 115); cursor: pointer;">paintings</text><text text-anchor="middle" transform="translate(-216,-105)rotate(0)" style="font-size: 5px; fill: rgb(130, 116, 115); cursor: pointer;">data mining</text><text text-anchor="middle" transform="translate(-76,230)rotate(0)" style="font-size: 4px; fill: rgb(199, 140, 80); cursor: pointer;">video understanding</text><text text-anchor="middle" transform="translate(-218,141)rotate(0)" style="font-size: 4px; fill: rgb(184, 190, 193); cursor: pointer;">interactive art</text><text text-anchor="middle" transform="translate(-7,-81)rotate(0)" style="font-size: 4px; fill: rgb(115, 132, 106); cursor: pointer;">chatgpt</text><text text-anchor="middle" transform="translate(-106,164)rotate(0)" style="font-size: 4px; fill: rgb(124, 78, 76); cursor: pointer;">aigc</text><text text-anchor="middle" transform="translate(117,-133)rotate(0)" style="font-size: 4px; fill: rgb(51, 51, 51); cursor: pointer;">semantic segmentation</text><text text-anchor="middle" transform="translate(-182,-150)rotate(0)" style="font-size: 4px; fill: rgb(130, 116, 115); cursor: pointer;">robustness</text><text text-anchor="middle" transform="translate(43,143)rotate(0)" style="font-size: 4px; fill: rgb(79, 97, 87); cursor: pointer;">collaboration</text><text text-anchor="middle" transform="translate(170,96)rotate(0)" style="font-size: 4px; fill: rgb(222, 185, 174); cursor: pointer;">big data</text><text text-anchor="middle" transform="translate(48,77)rotate(0)" style="font-size: 4px; fill: rgb(115, 132, 106); cursor: pointer;">text generation</text><text text-anchor="middle" transform="translate(217,135)rotate(0)" style="font-size: 4px; fill: rgb(130, 116, 115); cursor: pointer;">vision transformer</text><text text-anchor="middle" transform="translate(79,85)rotate(0)" style="font-size: 4px; fill: rgb(124, 78, 76); cursor: pointer;">route planning</text></g></svg></div>
                    </div>
                </div>
    
                <div class="bottom-container">
                    <div class="title-box">Q&amp;A</div>
                    <div class="content-box hidden" id="qa" style="height: calc(100% - 30px)">
    
    
    
        <meta charset="UTF-8">
        <title>Q&amp;A Dialog</title>
        <link rel="stylesheet" href="/static/css/for_qa.css">
    
    
    <div style="height: 100%; width: 100%;overflow: hidden">
        <div id="chat-container">
            <div id="chat-box">
                <div id="messages"></div>
                <div id="loading-spinner" class="spinner"></div>
            </div>
            <div id="input-area">
                <input type="text" id="user-input" placeholder="Type your question here...">
                <button id="send-button">Send</button>
            </div>
        </div>
    </div>
    
    
    <script>
        // script.js
        document.getElementById('send-button').addEventListener('click', function () {
            const userInput = document.getElementById('user-input').value;
            if (userInput.trim() !== "") {
                addMessage(userInput, 'user');
                document.getElementById('user-input').value = '';
                
                document.getElementById('loading-spinner').style.display = 'block';
                
                generateBotResponse(userInput)
    
                // Simulate bot response
                
                
                
                //}, 500);
    
                // openAI回应
                
                
                
                
                
                
                
                
                
                //})
            }
        });
    
        function addMessage(message, sender) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', sender + '-message');
            messageElement.textContent = message;
            document.getElementById('messages').appendChild(messageElement);
            messageElement.scrollIntoView({behavior: 'smooth'});
        }
    
        function generateBotResponse(userInput) {
            const waitingMessage = document.querySelector('#messages .bot-message');
    
            // This is a placeholder response.
            // In a real application, you would replace this with an API call to your backend or AI model.
            let botRes
            let entityRes
            $.ajax({
                url: 'http://127.0.0.1:8000/qa/chat',
                type: 'POST',
                contentType: 'application/json', // 发送信息至服务器时内容编码类型
                data: JSON.stringify({'message': userInput}),
                success: function (res) {
                    let request = JSON.parse(res)
                    botRes = request['response']
                    entityRes = request['entity']
    
                    // Hide the loading spinner
                    document.getElementById('loading-spinner').style.display = 'none';
    
    
                    controlGraph(botRes, entityRes)
                }
            })
            return botRes;
        }
        
    
        function controlGraph(botRes, entityRes) {
            console.log(entityRes)
            disableComponent()
            streamBotResponse(botRes)
            let clear = {
                'nodes': [],
                'links': [],
            }
            updateGraph(clear)
            InitGraphByQA(entityRes)
        }
    
    
    
        function streamBotResponse(message) {
            const messageContainer = document.getElementById('messages');
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', 'bot-message');
            messageContainer.appendChild(messageElement);
            messageElement.scrollIntoView({behavior: 'smooth'});
    
            let index = 0;
            const interval = setInterval(() => {
                if (index < message.length) {
                    messageElement.textContent += message[index];
                    index++;
                } else {
                    clearInterval(interval);
                }
                messageElement.scrollIntoView({behavior: 'smooth'});
            }, 5); // Adjust the interval time to control the speed of the typing effect
        }
        
    
        // Allow pressing Enter to send the message
        document.getElementById('user-input').addEventListener('keydown', function (event) {
            if (event.key === 'Enter') {
                document.getElementById('send-button').click();
            }
        });
    
    </script>
    
    </div>
                </div>
    
            </div>
    
    
        </div>
    </div>
    
    <script>
        // Function to fetch and execute scripts for a given URL and container ID
        function fetchAndExecute(url, containerId) {
            fetch(url)
                .then(response => response.text())
                .then(data => {
                    document.getElementById(containerId).innerHTML = data;
    
                    // Re-evaluate the scripts in the loaded content
                    const container = document.getElementById(containerId);
                    const scripts = container.querySelectorAll('script');
                    scripts.forEach(script => {
                        const newScript = document.createElement('script');
                        if (script.src) {
                            newScript.src = script.src;
                        } else {
                            newScript.textContent = script.textContent;
                        }
                        document.body.appendChild(newScript);
                    });
                })
                .catch(error => console.error('Error fetching data:', error));
        }
    
        // Fetch and execute scripts for both chart and knowledgeGraph
        // setTimeout(fetchAndExecute, 100)
        fetchAndExecute('chart/', 'chart');
        fetchAndExecute('KG/', 'knowledgeGraph');
        fetchAndExecute('qa/', 'qa');
    </script>
    
    <script>
        let words = []
        let colorMap = {};
    
        function initWordCloud() {
            d3.layout.cloud().size([d3.select('#wordCloud_container').node().getBoundingClientRect().width,
                d3.select('#wordCloud_container').node().getBoundingClientRect().height])
                .words(words.map(function (d) {
                    return {text: d.text, size: d.size};
                }))
                .padding(5)
                .rotate(0) // All words will be horizontal
                .font("Impact")
                .fontSize(function (d) {
                    return d.size;
                })
                .on("end", draw)
                .start();
    
        }
    
    
        function draw(words) {
            let width = d3.select('#wordCloud_container').node().getBoundingClientRect().width;
            let height = d3.select('#wordCloud_container').node().getBoundingClientRect().height;
    
            let svg = d3.select('#wordCloud_container').append("svg")
                .attr("width", width)
                .attr("height", height);
    
            let g = svg.append("g");
    
            // Append words to the g element
            let text = g.selectAll("text")
                .data(words)
                .enter().append("text")
                .style("font-size", function (d) {
                    return d.size + "px";
                })
                .style("fill", function (d) {
                    var color = randomColor();
                    colorMap[d.text] = color; // Store the color for each word
                    return color; // Initial color without transparency
                })
                .attr("text-anchor", "middle")
                .style('cursor', 'pointer')
                .attr("transform", function (d) {
                    return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                })
                .text(function (d) {
                    return d.text;
                })
                .on('click', function (e, d) {
                    FindPaperHasKeyword(d.text)
                });
    
            // Calculate the bounding box of the g element
            let bbox = g.node().getBBox();
            let xOffset = (width - bbox.width) / 2 - bbox.x;
            let yOffset = (height - bbox.height) / 2 - bbox.y;
    
            // Apply translation to center the g element within the svg
            g.attr("transform", "translate(" + xOffset + "," + yOffset + ")");
        }
    
        
        
        
        
        
        
        
        //}
    
        function randomColor() {
            let colors = ['#73846a', '#c78c50', '#4f6157', '#7298c5',
                '#9e938a', '#68aab6','#7c4e4c', '#333333',
            '#827473', '#8e9898','#deb9ae', '#b8bec1',]; // 这是你的颜色列表
            let randomIndex = Math.floor(Math.random() * colors.length);
            return colors[randomIndex];
        }
    </script>
    
    <script>
        window.onload = function () {
            LoadKeywords()
        }
    
        function FindPaperHasKeyword(keyword) {
            let data = {
                'keyword': keyword
            }
            $.ajax({
                url: 'http://127.0.0.1:8000/data_neo4j/keywordFindPaper',
                type: 'POST', // 发送信息至服务器时内容编码类型
                contentType: 'application/json', // 发送信息至服务器时内容编码类型
                data: JSON.stringify(data),
                success: function (res) {
                    let request = JSON.parse(res)
                    highlightNodesByNameList(request)
                }
            })
        }
    
        function LoadKeywords() {
            $.ajax({
                url: 'http://127.0.0.1:8000/data_neo4j/keyword',
                type: 'GET', // 发送信息至服务器时内容编码类型
                data: {},
                success: function (res) {
                    words = JSON.parse(res)
                    initWordCloud()
                }
            })
        }
    
        const tooltip = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);
    
        function text_collapse(obj) {
            if (obj.attr('class').includes('text-collapse') === true) {
                obj.attr('class', 'abstract')
            } else {
                obj.attr('class', 'abstract text-collapse')
            }
        }
    
        window.addEventListener('resize', function (event) {
            
            
        });
    
        // 查询 结果
        let query_list = []
        let query_author_list = []
        let query_year_list = []
        let query_dept_list = []
        let query_keyword_list = []
        let query_series_list = []
        let query_id_list = []
        let allId = []
    
        function QueryResults(check) {
            let data = {
                "author": query_author_list,
                "year": query_year_list,
                "keyword": query_keyword_list,
                "series": query_series_list,
                "dept": query_dept_list,
            }
            $.ajax({
                url: 'http://127.0.0.1:8000/query/result',
                type: 'POST',
                contentType: 'application/json', // 发送信息至服务器时内容编码类型
                data: JSON.stringify(data),
                success: function (res) {
                    let request = JSON.parse(res)
                    allId = request['all_IdName']
                    console.log(request['result_IdName'])
                    if (query_id_list.length !== 0) {
                        if (request['result_IdName'].length === 0) {
                            request['result_IdName'] = query_id_list
                        }
                        if (query_id_list.length > 1) {
                            request['result_IdName'] = []
                        }
    
                        // 获取两个列表中相同的元素
                        request['result_IdName'] = request['result_IdName'].filter(element => query_id_list.includes(element));
                    }
                    if (check === undefined) {
                        fixResults(request['all_IdName'], request['result_IdName'])
                    } else if (request['result_IdName'].length === 0 && query_list.length === 0) {
                        clearSelector()
                    } else {
                        for (let i of request['all_IdName']) {
                            d3.select('#' + i).style('display', 'block').style('border-color', 'rgb(200,200,200)')
                            fixResults(request['all_IdName'], request['result_IdName'])
                        }
                    }
    
                },
            })
        }
    
    
        function fixResults(all, obj) {
            for (let each in all) {
                if (obj.includes(all[each])) {
                    d3.select('#' + all[each]).style('border-color', 'black')
                } else {
                    d3.select('#' + all[each]).style('display', 'none')
                }
            }
    
        }
    
        // 
        let selectors = ['selector0', 'selector1', 'selector2', 'selector3', 'selector4', 'selector5']
    
        function clearSelector() {
            query_author_list = []
            query_year_list = []
            query_keyword_list = []
            query_list = []
            query_id_list = []
            query_dept_list = []
            for (let i in allId) {
                d3.select('#' + allId[i]).style('display', 'block').style('border-color', 'rgb(200,200,200)')
            }
            fixSelectors('clear')
        }
    
        function fixSelectors(obj) {
            if (obj === 'clear') {
                for (let j of selectors) {
                    let clear = d3.select('#' + j).attr('value', " ").style("border", '2px solid white')
                    clear.selectAll("*").remove()
                }
            } else {
                for (let j of selectors) {
                    if (d3.select('#' + j).attr('value') === ' ') {
                        let temp = d3.select('#' + j).attr('value', obj).style("border", '2px solid black')
                        temp.append("div").attr('class', 'text').text(obj)
                        temp.append('span').attr('class', 'glyphicon cross-icon')
                            .style('padding', '4px').style('margin-right', '2px')
                            .on("click", function () {
                                let value = d3.select('#' + j).attr('value')
                                let clear = d3.select('#' + j).attr('value', ' ').style("border", '2px solid white')
                                clear.selectAll("*").remove()
                                query_list.splice(query_list.indexOf(value), 1)
    
                                if (query_author_list.indexOf(value) !== -1) {
                                    query_author_list.splice(query_author_list.indexOf(value), 1)
                                }
                                if (query_keyword_list.indexOf(value) !== -1) {
                                    query_keyword_list.splice(query_keyword_list.indexOf(value), 1)
                                }
                                if (query_year_list.indexOf(value) !== -1) {
                                    query_year_list.splice(query_year_list.indexOf(value), 1)
                                }
                                if (query_series_list.indexOf(value) !== -1) {
                                    query_series_list.splice(query_series_list.indexOf(value), 1)
                                }
                                if (query_id_list.indexOf(value) !== -1) {
                                    query_id_list.splice(query_id_list.indexOf(value), 1)
                                }
                                if (query_dept_list.indexOf(value) !== -1) {
                                    query_dept_list.splice(query_dept_list.indexOf(value), 1)
                                }
                                QueryResults(1)
                            })
                        break
                    }
                }
            }
        }
    
    </script><div class="tooltip" style="opacity: 0; left: 1602px; top: 215px;"><div class="publication-card" style="width: 600px; text-align: left"><div class="entry_img"><img class="thumb" src="/static/img/shi2021towards.png" alt=""></div><div class="entry_main"><h4>Towards Scalable Distributed Training of Deep Learning on Public Cloud Clusters</h4><p>Shaohuai Shi, Xianhao Zhou, Shutao Song, Xingyao Wang, Zilin Zhu, Xue Huang, Xinan Jiang, Feihu Zhou, Zhenyu Guo, Liqiang Xie, Rui Lan, Xianbin Ouyang, Yan Zhang, Jieqian Wei, Jing Gong, Weiliang Lin, Ping Gao, Peng Meng, Xiaomin Xu, Chenyang Guo, Bo Yang, Zhibo Chen, Yongjian Wu, Xiaowen Chu</p><br><p>Citation:51</p><p>Published:2021</p><p>Venue:MLSys 2021</p></div></div></div>
    
    
    
    
    <script src="http://127.0.0.1:8000/static/js/jquery-3.7.1.js"></script><script src="http://127.0.0.1:8000/static/plugins/d3/d3.v7.js"></script><script>
    
        // Specify the dimensions of the chart.
        const width = d3.select('.kg_container').node().getBoundingClientRect().width
        const height = d3.select('.kg_container').node().getBoundingClientRect().height
    
        // Specify the color scale.
        let color = ['#f2a7da', '#71b7ed', '#f8dc4c', 'grey', '#84c3b7', 'black']
        let color_key = '#f8dc4c'
        const colorScale_keyword = d3.scaleLinear()
            .domain([1, 20])
            .range(["#FACA2E", "#b85e14"]);
        // 定义颜色比例尺，根据citation的范围调整颜色的深浅
        const colorScale = d3.scaleLinear()
            .domain([2020, 2024])
            .range(["#e6b1be", "#d14163"]);
    
        const colorScale_auther = d3.scaleLinear()
            .domain([18, 249])
            .range(["#b9ded3", "#007f5f"]);
    
        // Create the SVG container.     preserveAspectRatio="xMinYMin meet"
        const svg = d3.select('#container_kg').append("svg")
            .attr('id', 'graph_svg')
            .style("width", '100%')
            .style("height", 'auto')
            .attr("viewBox", [0, 0, width, height])
            .on('click', function (e) {
                if (e.target.tagName === 'svg') {
                    resetNodeColors();
                }
            })
    
    
        function createMarker(id, d, fill, opacity, refX, refY) {
            refX = 0
            refY = 0
            return svg.append('marker')
                .attr('id', id)
                .attr('orient', 'auto')
                .attr('stroke-width', 2)
                .attr('markerUnits', 'strokeWidth')
                .attr('markerUnits', 'userSpaceOnUse')
                .attr('viewBox', '0 -5 10 10')
                .attr('refX', refX)
                .attr('refY', refY)
                .attr('markerWidth', 12)
                .attr('markerHeight', 12)
                .attr('orient', 'auto')
                .append('path')
                .attr('d', d)
                .attr('fill', fill)
                .attr('stroke-opacity', opacity);
        }
    
        const positiveMarker = createMarker('positiveMarker', 'M 0 -5 L 10 0 L 0 5', color[3], 0.1, 25, 0);
        const negativeMarker = createMarker('negativeMarker', 'M 10 -5 L 0 0 L 10 5', color[3], 0.1, -15, 0);
    
    
        
    
        const g = svg.append('g').attr('id', 'graph_svg_g')
    
        const zoom = d3.zoom().scaleExtent([0.1, 10]).on('zoom', function (event) {
            g.attr('transform', event.transform)
        })
        svg.call(zoom)
    
    
        let link
        let link_name
        let node
        let entity_data
        let simulation
        let nodeNameText
        let nodes, links;
    
        // Reheat the simulation when drag starts, and fix the subject position.
        function dragstarted(event) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            event.subject.fx = event.subject.x;
            event.subject.fy = event.subject.y;
        }
    
        function dragged(event) {
            const draggedNode = event.subject;
    
            // 更新作者节点的位置
            draggedNode.fx = event.x;
            draggedNode.fy = event.y;
    
    
            // 更新与作者节点连接的 paper 节点的位置
            if (draggedNode.group === 4) {
                // 过滤出与拖动节点相关的 paper 节点
                const relatedPapers = nodes.filter(node =>
                    links.some(link =>
                        link.source.name === draggedNode.name && link.target.name === node.name
                    )
                );
                relatedPapers.forEach(paper => {
                    // 计算拖动的方向
                    const dx = event.x - draggedNode.x;
                    const dy = event.y - draggedNode.y;
    
                    // 添加阻尼系数，使得 paper 节点具有滞后效果
                    const damping = 1; // 可以根据需要调整这个值
    
                    // 将 paper 节点设置为跟随拖动方向，但有滞后效果
                    paper.fx = paper.x + dx * damping;
                    paper.fy = paper.y + dy * damping;
                });
            }
    
            simulation.alphaTarget(0.1).restart();  // 重新启动模拟
        }
    
        function dragended(event) {
            const draggedNode = event.subject;
    
            // 还原拖动后的节点位置
            draggedNode.fx = null;
            draggedNode.fy = null;
    
            draggedNode.fx = event.x;
            draggedNode.fy = event.y;
    
            // 还原与作者节点连接的 paper 节点的位置
            if (draggedNode.group === 4) {
                const relatedPapers = nodes.filter(node =>
                    links.some(link =>
                        link.source.name === draggedNode.name && link.target.name === node.name)
                );
    
                relatedPapers.forEach(paper => {
                    // 移除纸节点的力中心
                    simulation.force("center" + paper.name, null);
                    paper.fx = null;
                    paper.fy = null;
                });
            }
    
            simulation.alphaTarget(0.03);  // 停止模拟加速
        }
    
        // 创建tooltip
    
    
    </script><script>
        $(document).ready(function () {
            LoadData2()
        });
    
        function filterNode(data) {
            let filter_node = data.nodes.filter(node => node.citation > min_citation || node.group === 4 || node.group === 1);
            let filter_node_names = new Set(filter_node.map(node => node.name));
    
            // 筛选链接
            let filter_link = data.links.filter(link =>
                filter_node_names.has(link.source) && filter_node_names.has(link.target)
            );
            updateGraph({'nodes': filter_node, 'links': filter_link})
        }
    
        function removeNode(data) {
            let filter_node = data.nodes.filter(node => node.citation > min_citation || node.group === 4 || node.group === 1);
            let filter_node_names = new Set(filter_node.map(node => node.name));
    
            // 筛选链接
            let filter_link = data.links.filter(link =>
                filter_node_names.has(link.source) && filter_node_names.has(link.target)
            );
            InitGraph({'nodes': filter_node, 'links': filter_link})
        }
    
        function LoadData2() {
            $.ajax({
                url: 'http://127.0.0.1:8000/graph/query_all/',
                type: 'get',
                data: {'name': ''},
                success: function (res) {
                    entity_data = JSON.parse(res)
                    removeNode(entity_data)
                }
            })
        }
    
        function LoadData() {
            $.ajax({
                url: 'http://127.0.0.1:8000/graph/query/',
                type: 'get',
                data: {'name': ''},
                success: function (res) {
                    let request = JSON.parse(res)
                    entity_data = {
                        'nodes': request,
                        'links': []
                    }
                    InitGraph(entity_data)
                }
            })
        }
    
        function query_paper(name) {
            $.ajax({
                url: 'http://127.0.0.1:8000/graph/query_paper/',
                type: 'get',
                data: {'name': name},
                success: function (res) {
                    let request = JSON.parse(res)['results']
                    let count = JSON.parse(res)['count']
    
                    for (let i = 0; i < request.length; i++) {
                        let flag = true
                        for (let j = 0; j < entity_data.nodes.length; j++) {
                            if (entity_data.nodes[j].name === request[i].name) {
                                flag = false
                                break
                            }
                        }
                        if (flag) {
                            entity_data.nodes.push(request[i])
                        }
    
                        entity_data.links.push({
                            'source': name,
                            'target': request[i].name,
                            'value': 3,
                            'relationship': 'OWNED BY'
                        })
                    }
                    entity_data.links = Array.from(new Set(entity_data.links.map(JSON.stringify))).map(JSON.parse);
                    filterNode(entity_data)
                    
                }
            })
        }
    
        let already_click_author = []
    
        function updateGraph(data) {
    
            nodes = data.nodes.map(d => ({...d}))
            links = data.links.map(d => ({...d}))
    
            // 通过 ID 找到现有节点
            const existingNodes = new Map(node.data().map(d => [d.name, d]));
    
            // 将已有节点的位置保持不变
            nodes.forEach(node => {
                if (existingNodes.has(node.name)) {
                    // 保持现有节点的位置不变
                    node.x = existingNodes.get(node.name).x;
                    node.y = existingNodes.get(node.name).y;
                }
            });
    
    
            const authorNodes = nodes.filter(node => node.group === 4);
            const paperNodes = nodes.filter(node => node.group === 0);
    
            authorNodes.forEach((author) => {
    
                const papers = paperNodes.filter(paper => links.some(link => link.source === author.name && link.target === paper.name));
                let radius = 50;
                let currentCircleNodeCount = 0;
                let angleStep;
    
                // 计算每个paper节点的位置
                papers.forEach(paper => {
                    // 找到与当前paper节点连接的所有author节点
                    const connectedAuthors = nodes.filter(node =>
                        links.some(link => (link.source === node.name && link.target === paper.name) ||
                            (link.target === node.name && link.source === paper.name))
                    );
    
                    if (connectedAuthors.length > 1) {
                        // 计算所有连接的author节点的中心位置
                        const sum = connectedAuthors.reduce((acc, author) => {
                            acc.x += author.x;
                            acc.y += author.y;
                            return acc;
                        }, {x: 0, y: 0});
    
                        paper.x = sum.x / connectedAuthors.length;
                        paper.y = sum.y / connectedAuthors.length;
                    } else {
                        // 如果没有连接的author节点，按原来的方式计算
                        if (currentCircleNodeCount === 0 || currentCircleNodeCount === Math.floor(2 * Math.PI * radius / 50)) {
                            radius += 50;
                            currentCircleNodeCount = 0;
                            angleStep = 2 * Math.PI / Math.floor(2 * Math.PI * radius / 50);
                        }
                        const currentAngle = currentCircleNodeCount * angleStep + 5;
                        paper.x = author.x + radius * Math.cos(currentAngle);
                        paper.y = author.y + radius * Math.sin(currentAngle);
                        currentCircleNodeCount++;
                    }
                });
    
            });
    
            // 找到有多个作者连接的 paper 节点
            const paperLinkCount = {};
            links.forEach(link => {
                if (link.target in paperLinkCount) {
                    paperLinkCount[link.target]++;
                } else {
                    paperLinkCount[link.target] = 1;
                }
            });
    
            links.forEach(link => {
                const sourceNode = nodes.find(node => node.name === link.source);
                const targetNode = nodes.find(node => node.name === link.target);
                if (sourceNode && targetNode) {
                    if (targetNode.group === 0) { // 如果目标节点是论文节点
                        // 使用引用次数作为半径，设定最大半径为150
                        let paperRadius = Math.min(targetNode.citation, 150);
                        // 将引用次数线性映射到距离范围内
                        let maxDistance = 500;  // 最大距离
                        let minDistance = 150;  // 最小距离
                        link.distance = Math.max(minDistance, maxDistance - paperRadius * (maxDistance - minDistance) / 100);
                    } else {
                        // 对于非论文节点，保持原来的距离计算方式
                        const dx = sourceNode.x - targetNode.x;
                        const dy = sourceNode.y - targetNode.y;
                        link.distance = Math.sqrt(dx * dx + dy * dy);
                    }
                }
            });
    
    
            link = link.data(links, d => `${d.source.name}_${d.target.name}`)
            link.exit().remove();
            link = link
                .enter()
                .append("path")
                .attr("stroke", color[3])
                .attr("stroke-opacity", (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 1
                    } else {
                        return 0.6
                    }
                })
                .attr('marker-end', 'url(#direction)')
                .attr('id', d => d.source + '_' + d.relationship + '_' + d.target)
                .attr("stroke-width", (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 5
                    } else {
                        return 3
                    }
                })
                .merge(link);
    
    
            node = node.data(nodes, d => d.name);
            node.exit().remove();
            node = node.enter().append("circle")
                .attr("r", (d) => {
                    if (d.group === 1) {
                        return 100
                    }
                    if (d.group === 4) {
                        return 70
                    }
                    if (d.group === 0) {
                        if (d.citation < 21) {
                            return 10
                        } else if (d.citation > 20 && d.citation < 51) {
                            return 20
                        } else if (d.citation > 50 && d.citation < 101) {
                            return 30
                        } else if (d.citation > 100 && d.citation < 151) {
                            return 40
                        } else {
                            return 50
                        }
                    }
                })
                .attr("fill", (d) => {
                    if (d.group === 0) {
                        return colorScale(parseInt(d.released));
                    } else if (d.group === 4) {
                        return colorScale_auther(d.count)
                    } else {
                        if (d.name === "AI") {
                            return '#98abc5'
                        } else if (d.name === "CMA") {
                            return '#8a89a6'
                        } else if (d.name === 'DSA') {
                            return '#7b6888'
                        }
                    }
                })
                .attr('class', 'circle')
                .merge(node)
                .on('click', function (e, d) {
                    // Set the clicked node as the selected node
                    selectedNode = d;
                    if (d.group === 1) {
                        // Call the function to highlight the neighborhood
                        highlightNeighborhood_2(selectedNode);
                    } else {
                        highlightNeighborhood(selectedNode)
                    }
                });
    
            node.on('mouseover', function (event, d) {
                tooltip.transition().duration(200).style("opacity", .9);
                tooltip.html(
                    () => {
                        if (d.group === 4) {
                            return '<div class="publication-card" style="text-align: left">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.count + ' papers</p>' +
                                '<br>' +
                                '</div>'
                        } else if (d.group === 1) {
                            return d.name
                        } else {
                            let temp_path = '/static/img/' + d.id + '.png'
                            return '<div class="publication-card" style="width: 600px; text-align: left">' +
                                '<div class="entry_img">' +
                                '<img class="thumb" src="' + temp_path + '" alt="">' +
                                '</div>' +
                                '<div class="entry_main">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.authors + '</p>' +
                                '<br>' +
                                '<p>Published:' + d.released + '</p>' +
                                '<p>Venue:' + d.venue + '</p>' +
                                '</div>' +
                                '</div>'
                        }
                    })
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px")
                ;
            })
                .on('mouseout', function (d) {
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
    
            nodeNameText = nodeNameText.data(nodes, d => d.name)
            nodeNameText.exit().remove()
            nodeNameText.enter().append('text')
                .merge(nodeNameText)
    
            simulation.nodes(nodes);
            simulation.force('link').links(links);
    
            simulation.alpha(0.2).restart();
    
    
            // Add a drag behavior.
            node.call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
    
            setTimeout(fitViewBox, 1000)
        }
    
        function InitGraph(data) {
            // 图例折叠功能
            d3.select(".legend-title").on("click", function () {
                const content = d3.select(".legend-content");
                if (content.style("display") === "none") {
                    content.style("display", "block");
                    d3.select(this).text("Legend ▲");
                } else {
                    content.style("display", "none");
                    d3.select(this).text("Legend ▼");
                }
            });
    
            // so that re-evaluating this cell produces the same result.
            links = data.links.map(d => ({...d}));
            nodes = data.nodes.map(d => ({...d}));
    
            const departmentNodes = nodes.filter(node => node.group === 1)
            const authorNodes = nodes.filter(node => node.group === 4);
            const paperNodes = nodes.filter(node => node.group === 0);
    
            // 给每个节点一个初始位置，避免重叠
            departmentNodes.forEach((node, index) => {
                node.x = width / 2 + 1200 * Math.cos(index * 2 * Math.PI / departmentNodes.length);
                node.y = height / 2 + 1200 * Math.sin(index * 2 * Math.PI / departmentNodes.length);
            });
    
            
            
            
            
            
            //});
    
            departmentNodes.forEach((department) => {
                const authors = authorNodes.filter(
                    author => links.some(link => link.source === department.name && link.target === author.name));
                authors.forEach((node, index) => {
                    node.x = department.x + 800 * Math.cos(index * 2 * Math.PI / authors.length);
                    node.y = department.y + 800 * Math.sin(index * 2 * Math.PI / authors.length);
                });
    
            });
    
            authorNodes.forEach((author) => {
    
                const papers = paperNodes.filter(paper => links.some(link => link.source === author.name && link.target === paper.name));
                let radius = 50;
                let currentCircleNodeCount = 0;
                let angleStep;
    
                // 计算每个paper节点的位置
                papers.forEach(paper => {
                    // 找到与当前paper节点连接的所有author节点
                    const connectedAuthors = nodes.filter(node =>
                        links.some(link => (link.source === node.name && link.target === paper.name) ||
                            (link.target === node.name && link.source === paper.name))
                    );
    
                    if (connectedAuthors.length > 1) {
                        // 计算所有连接的author节点的中心位置
                        const sum = connectedAuthors.reduce((acc, author) => {
                            acc.x += author.x;
                            acc.y += author.y;
                            return acc;
                        }, {x: 0, y: 0});
    
                        paper.x = sum.x / connectedAuthors.length;
                        paper.y = sum.y / connectedAuthors.length;
                    } else {
                        // 如果没有连接的author节点，按原来的方式计算
                        if (currentCircleNodeCount === 0 || currentCircleNodeCount === Math.floor(2 * Math.PI * radius / 50)) {
                            radius += 50;
                            currentCircleNodeCount = 0;
                            angleStep = 2 * Math.PI / Math.floor(2 * Math.PI * radius / 50);
                        }
                        const currentAngle = currentCircleNodeCount * angleStep + 5;
                        paper.x = author.x + radius * Math.cos(currentAngle);
                        paper.y = author.y + radius * Math.sin(currentAngle);
                        currentCircleNodeCount++;
                    }
                });
    
            });
    
            // 找到有多个作者连接的 paper 节点
            const paperLinkCount = {};
            links.forEach(link => {
                if (link.target in paperLinkCount) {
                    paperLinkCount[link.target]++;
                } else {
                    paperLinkCount[link.target] = 1;
                }
            });
    
            links.forEach(link => {
                const sourceNode = nodes.find(node => node.name === link.source);
                const targetNode = nodes.find(node => node.name === link.target);
                if (sourceNode && targetNode) {
                    if (targetNode.group === 0) { // 如果目标节点是论文节点
                        // 使用引用次数作为半径，设定最大半径为150
                        let paperRadius = Math.min(targetNode.citation, 150);
                        // 将引用次数线性映射到距离范围内
                        let maxDistance = 500;  // 最大距离
                        let minDistance = 150;  // 最小距离
                        link.distance = Math.max(minDistance, maxDistance - paperRadius * (maxDistance - minDistance) / 100);
                    } else {
                        // 对于非论文节点，保持原来的距离计算方式
                        const dx = sourceNode.x - targetNode.x;
                        const dy = sourceNode.y - targetNode.y;
                        link.distance = Math.sqrt(dx * dx + dy * dy);
                    }
                }
            });
    
    
            simulation = d3.forceSimulation(nodes)
                .force("link", d3.forceLink(links).id(d => d.name).distance(function (d) {
                    return d.distance
                }))
    
                .force('collision', d3.forceCollide().radius(50))
                .force("charge", d3.forceManyBody().strength(-50))
                .force("center", d3.forceCenter(width / 2, height / 2))
                .alphaMin(0.05)
                .on("tick", ticked);
    
    
            // Add a line for each link, and a circle for each node.
            link = g.append("g")
                .attr("stroke", color[3])
                .selectAll()
                .data(links)
                .join("path")
                .attr("stroke-opacity", (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 1
                    } else {
                        return 0.6
                    }
                })
                .attr('stroke-width', (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 5
                    } else {
                        return 3
                    }
    
                })
                .attr('id', d => d.source + '_' + d.relationship + '_' + d.target);
    
            node = g.append("g")
                .attr("stroke", '#ffffff')
                .attr("stroke", color[5])
                .attr("stroke-width", 1.5)
                .selectAll()
                .data(nodes)
                .join("circle")
                .attr("r", (d) => {
                    if (d.group === 1) {
                        return 100
                    }
                    if (d.group === 4) {
                        return 70
                    }
                    if (d.group === 0) {
                        if (d.citation < 21) {
                            return 10
                        } else if (d.citation > 20 && d.citation < 51) {
                            return 20
                        } else if (d.citation > 50 && d.citation < 101) {
                            return 30
                        } else if (d.citation > 100 && d.citation < 151) {
                            return 40
                        } else {
                            return 50
                        }
                    }
                })
                .attr("fill", (d) => {
                    if (d.group === 0) {
                        return colorScale(parseInt(d.released));
                    } else if (d.group === 4) {
                        return colorScale_auther(d.count)
                    } else {
                        if (d.name === "AI") {
                            return '#247181'
                        } else if (d.name === "CMA") {
                            return '#619ea9'
                        } else if (d.name === 'DSA') {
                            return '#224659'
                        }
                    }
                })
                .attr('class', 'circle')
                .on('click', function (e, d) {
                    // Set the clicked node as the selected node
                    selectedNode = d;
                    console.log(d)
                    if (d.group === 1) {
                        // Call the function to highlight the neighborhood
                        highlightNeighborhood_2(selectedNode);
                    } else {
                        highlightNeighborhood(selectedNode)
                    }
    
                })
    
            node.on('mouseover', function (event, d) {
                tooltip.transition().duration(200).style("opacity", .9);
                tooltip.html(
                    () => {
                        if (d.group === 4) {
                            return '<div class="publication-card" style="text-align: left">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.count + ' papers</p>' +
                                '<br>' +
                                '</div>'
                        } else if (d.group === 1) {
                            return d.name
                        } else {
                            let temp_path = '/static/img/' + d.id + '.png'
                            return '<div class="publication-card" style="width: 600px; text-align: left">' +
                                '<div class="entry_img">' +
                                '<img class="thumb" src="' + temp_path + '" alt="">' +
                                '</div>' +
                                '<div class="entry_main">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.authors + '</p>' +
                                '<br>' +
                                '<p>Citation:' + d.citation + '</p>' +
                                '<p>Published:' + d.released + '</p>' +
                                '<p>Venue:' + d.venue + '</p>' +
                                '</div>' +
                                '</div>'
                        }
                    })
                    .style("left", (event.pageX + 50) + "px")
                    .style("top", (event.pageY - 140) + "px")
                ;
            })
                .on('mouseout', function (d) {
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            nodeNameText = g.append('g').selectAll().data(nodes).join('text')
                .text((d) => {
                    if (d.group === 4 || d.group === 1) {
                        return d.name
                    }
                })
                .attr('dy', (d) => {
                    if (d.group === 1) {
                        return 15
                    } else {
                        return 10
                    }
                })
                .attr('fill', color[5])
                .attr('font-size', (d) => {
                    if (d.group === 1) {
                        return '40px';  // 对于 group 1 的字体大小
                    } else {
                        return '20px';  // 对于其他组的字体大小
                    }
                });
    
            // 然后通过 each 方法调整 dx 属性
            nodeNameText.each(function (d) {
                const bbox = this.getBBox();
                d3.select(this).attr('dx', -bbox.width / 2);
            });
    
            // Add a drag behavior.
            node.call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
    
            // Set the position attributes of links and nodes each time the simulation ticks.
            function ticked() {
                link
                    .attr('d', function (d) {
                        if (d.source.x < d.target.x) {
                            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y
                        } else {
                            return 'M ' + d.target.x + ' ' + d.target.y + ' L ' + d.source.x + ' ' + d.source.y
                        }
                    })
    
                node.attr("cx", d => d.x).attr("cy", d => d.y);
    
                nodeNameText.attr("x", d => d.x).attr("y", d => d.y);
            }
    
    
            setTimeout(fitViewBox, 1000)
    
    
        }
    
        function InitGraphByQA(data) {
            // so that re-evaluating this cell produces the same result.
            links = data.links.map(d => ({...d}));
            nodes = data.nodes.map(d => ({...d}));
    
    
            const deptNodes = nodes.filter(node => node.group === 1);
            const authorNodes = nodes.filter(node => node.group === 4);
            const paperNodes = nodes.filter(node => node.group === 0);
            const keywordNodes = nodes.filter(node => node.group === 2);
    
            deptNodes.forEach((node, index) => {
                node.x = width / 2 + 600 * Math.cos(index * 2 * Math.PI / deptNodes.length);
                node.y = height / 2 + 600 * Math.sin(index * 2 * Math.PI / deptNodes.length);
            })
    
            deptNodes.forEach((dept) => {
                const authors = authorNodes.filter(
                    author => links.some(link => link.source === author.name && link.target === dept.name))
                authors.forEach((node, index) => {
                    node.x = dept.x + 600 * Math.cos(index * 2 * Math.PI / authors.length);
                    node.y = dept.y + 600 * Math.sin(index * 2 * Math.PI / authors.length);
                });
            })
    
            authorNodes.forEach((author, index) => {
    
                const papers = paperNodes.filter(paper => links.some(link => link.source === author.name && link.target === paper.name));
    
                // 计算每个paper节点的位置
                papers.forEach(paper => {
                    // 找到与当前paper节点连接的所有author节点
                    const connectedAuthors = authorNodes.filter(node =>
                        links.some(link => (link.source === node.name && link.target === paper.name) ||
                            (link.target === node.name && link.source === paper.name))
                    );
    
                    if (connectedAuthors.length > 1) {
                        // 计算所有连接的author节点的中心位置
                        const sum = connectedAuthors.reduce((acc, author) => {
                            acc.x += author.x;
                            acc.y += author.y;
                            return acc;
                        }, {x: 0, y: 0});
    
                        paper.x = sum.x / connectedAuthors.length;
                        paper.y = sum.y / connectedAuthors.length;
                    } else {
                        paper.x = author.x + 400 * Math.cos(index * 2 * Math.PI / papers.length);
                        paper.y = author.y + 400 * Math.sin(index * 2 * Math.PI / papers.length);
                    }
                });
    
            });
    
            paperNodes.forEach((paper, index) => {
                const keywords = keywordNodes.filter(
                    keyword => links.some(link => link.source === paper.name && link.target === keyword.name));
                keywords.forEach(keyword => {
                    const connectedPapers = paperNodes.filter(node =>
                        links.some(link => (link.source === node.name && link.target === keyword.name) ||
                            (link.target === node.name && link.source === keyword.name))
                    )
    
                    if (connectedPapers.length > 1) {
                        const sum = connectedPapers.reduce((acc, paper) => {
                            acc.x += paper.x;
                            acc.y += paper.y;
                            return acc
                        }, {x: 0, y: 0})
                        keyword.x = sum.x / connectedPapers.length;
                        keyword.y = sum.y / connectedPapers.length;
                    } else {
                        keyword.x = paper.x + 200 * Math.cos(index * 2 * Math.PI / keywords.length);
                        keyword.y = paper.y + 200 * Math.sin(index * 2 * Math.PI / keywords.length);
                    }
    
                })
            });
    
    
            console.log(deptNodes)
            console.log(authorNodes)
            console.log(paperNodes)
            console.log(keywordNodes)
    
            links.forEach(link => {
                const sourceNode = nodes.find(node => node.name === link.source);
                const targetNode = nodes.find(node => node.name === link.target);
                if (sourceNode && targetNode) {
                    // 对于非论文节点，保持原来的距离计算方式
                    const dx = sourceNode.x - targetNode.x;
                    const dy = sourceNode.y - targetNode.y;
                    link.distance = Math.sqrt(dx * dx + dy * dy);
                }
            });
    
    
            simulation = d3.forceSimulation(nodes)
                .force("link", d3.forceLink(links).id(d => d.name).distance(function (d) {
                    return d.distance
                }))
    
                .force('collision', d3.forceCollide().radius(50))
                .force("charge", d3.forceManyBody().strength(-50))
                .force("center", d3.forceCenter(width / 2, height / 2))
                .alphaMin(0.05)
                .on("tick", ticked);
    
            // Add a line for each link, and a circle for each node.
            link = g.append("g")
                .attr("stroke", color[3])
                .selectAll()
                .data(links)
                .join("path")
                .attr("stroke-opacity", (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 1
                    } else {
                        return 0.6
                    }
                })
                .attr('stroke-width', (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 5
                    } else {
                        return 3
                    }
    
                })
                .attr('id', d => d.source + '_' + d.relationship + '_' + d.target);
    
            node = g.append("g")
                .attr("stroke", color[5])
                .attr("stroke-width", 1.5)
                .selectAll()
                .data(nodes)
                .join("circle")
                .attr("r", (d) => {
                    if (d.group === 1) {
                        return 100
                    }
                    if (d.group === 4) {
                        return 70
                    }
                    if (d.group === 0) {
                        if (d.citation < 21) {
                            return 20
                        } else if (d.citation > 20 && d.citation < 51) {
                            return 20
                        } else if (d.citation > 50 && d.citation < 101) {
                            return 30
                        } else if (d.citation > 100 && d.citation < 151) {
                            return 40
                        } else {
                            return 50
                        }
                    }
                    if (d.group === 2) {
                        return 20
                    }
                })
                .attr("fill", (d) => {
                    if (d.group === 0) {
                        return colorScale(parseInt(d.released));
                    } else if (d.group === 4) {
                        return colorScale_auther(d.count)
                    } else if (d.group === 2) {
                        return colorScale_keyword(d.citation)
                    } else {
                        if (d.name === "AI") {
                            return '#247181'
                        } else if (d.name === "CMA") {
                            return '#619ea9'
                        } else if (d.name === 'DSA') {
                            return '#224659'
                        }
                    }
                })
                .attr('class', 'circle')
                .on('click', function (e, d) {
                    // Set the clicked node as the selected node
                    selectedNode = d;
                    console.log(d)
                    if (d.group === 1 || d.group === 4) {
                        // Call the function to highlight the neighborhood
                        highlightNeighborhood_2(selectedNode);
                    } else {
                        highlightNeighborhood(selectedNode)
                    }
                })
    
            node.on('mouseover', function (event, d) {
                tooltip.transition().duration(200).style("opacity", .9);
                
                tooltip.html(
                    () => {
                        if (d.group === 4) {
                            return '<div class="publication-card" style="text-align: left">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.count + ' papers</p>' +
                                '<br>' +
                                '</div>'
                        } else if (d.group === 1 || d.group === 2) {
                            return d.name
                        } else {
                            let temp_path = '/static/img/' + d.id + '.png'
                            return '<div class="publication-card" style="width: 600px; text-align: left">' +
                                '<div class="entry_img">' +
                                '<img class="thumb" src="' + temp_path + '" alt="">' +
                                '</div>' +
                                '<div class="entry_main">' +
                                '<h4>' + d.name + '</h4>' +
                                '<p>' + d.authors + '</p>' +
                                '<br>' +
                                '<p>Citation:' + d.citation + '</p>' +
                                '<p>Published:' + d.released + '</p>' +
                                '<p>Venue:' + d.venue + '</p>' +
                                '</div>' +
                                '</div>'
                        }
                    })
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
                .on('mouseout', function (d) {
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            nodeNameText = g.append('g').selectAll().data(nodes).join('text')
                .text((d) => {
                    if (d.group === 4 || d.group === 1 || d.group === 2) {
                        return d.name
                    }
                })
                .attr('dy', (d) => {
                    if (d.group === 1) {
                        return 15
                    } else if (d.group === 2) {
                        return 45
                    } else {
                        return 10
                    }
                })
                .attr('fill', color[5])
                .attr('font-size', (d) => {
                    if (d.group === 1) {
                        return '40px';  // 对于 group 1 的字体大小
                    } else {
                        return '20px';  // 对于其他组的字体大小
                    }
                });
    
            // 然后通过 each 方法调整 dx 属性
            nodeNameText.each(function (d) {
                const bbox = this.getBBox();
                d3.select(this).attr('dx', -bbox.width / 2);
            });
    
            // Add a drag behavior.
            node.call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
    
    
            // Set the position attributes of links and nodes each time the simulation ticks.
            function ticked() {
                link
                    .attr('d', function (d) {
                        if (d.source.x < d.target.x) {
                            return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y
                        } else {
                            return 'M ' + d.target.x + ' ' + d.target.y + ' L ' + d.source.x + ' ' + d.source.y
                        }
                    })
    
                node.attr("cx", d => d.x).attr("cy", d => d.y);
    
                nodeNameText.attr("x", d => d.x).attr("y", d => d.y);
            }
    
    
            setTimeout(fitViewBox, 1000)
    
        }
    
        function removeGraphNode() {
            enableComponent()
            let clear = {
                'nodes': [],
                'links': [],
            }
    
            updateGraph(clear)
            removeNode(entity_data)
        }
    
        function fitViewBox() {
            // 获取当前的变换
            const transform = d3.zoomTransform(svg.node());
            // 计算节点的边界框
            const xExtent = d3.extent(nodes, d => d.x);
            const yExtent = d3.extent(nodes, d => d.y);
            // 计算节点的中心点
            const xCenter = (xExtent[0] + xExtent[1]) / 2;
            const yCenter = (yExtent[0] + yExtent[1]) / 2;
    
            // 计算边界框的宽度和高度
            const widthExtent = xExtent[1] - xExtent[0];
            const heightExtent = yExtent[1] - yExtent[0];
    
    
            // 计算缩放比例，使节点完全显示在视图中
            const scale = Math.min(
                (width - 50) / widthExtent,
                (height - 50) / heightExtent
            );
    
    
            // 计算平移量以使节点居中
            const tx = xCenter - width / scale / 2
            const ty = yCenter - height / scale / 2
    
    
            // 应用缩放和平移变换
            svg.transition()
                .call(zoom.transform, d3.zoomIdentity)
                .on('end', () => {
                    svg.transition().duration(750)
                        .attr("viewBox", `${tx} ${ty} ${width / scale} ${height / scale}`)
                        .on('end', () => {
                            svg.attr("viewBox", `${tx} ${ty} ${width / scale} ${height / scale}`);
                        });
                });
        }
    
    
        let selectedNode = null;
    
        // Function to highlight the selected node and its first-order neighbors
        function highlightNeighborhood(selectedNode) {
            const neighbors = new Set();
    
            // Find the neighbors (first-order connections)
            links.forEach(link => {
                if (link.source.name === selectedNode.name) {
                    neighbors.add(link.target.name);
                } else if (link.target.name === selectedNode.name) {
                    neighbors.add(link.source.name);
                }
            });
            neighbors.add(selectedNode.name); // Also include the selected node itself
    
            // Update the color of nodes
            node.attr('fill', (n) => {
                if (neighbors.has(n.name)) {
                    // Original color for the selected node and its neighbors
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else if (n.group === 2) {
                        return colorScale_keyword(n.citation)
                    } else {
                        if (n.name === "AI") {
                            return '#247181';
                        } else if (n.name === "CMA") {
                            return '#619ea9';
                        } else if (n.name === 'DSA') {
                            return '#224659';
                        }
                    }
                } else {
                    // Lighten color for other nodes
                    return "#ddd"; // or use a different light color
                }
            });
    
            // Update the color of links
            link.attr("stroke", (l) => {
                if (neighbors.has(l.source.name) && neighbors.has(l.target.name)) {
                    return color[3]; // Original color for links between selected node and its neighbors
                } else {
                    return "#ddd"; // Lighten color for other links
                }
            }).attr("stroke-opacity", (l) => {
                if (neighbors.has(l.source.name) && neighbors.has(l.target.name)) {
                    if (l.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                } else {
                    return 0.3; // Reduce opacity for other links
                }
            });
        }
    
        function highlightNeighborhood_2(selectedNode) {
            const neighbors = new Set();
            const secondNeighbors = new Set();
    
            // Find the first-order neighbors (direct connections)
            links.forEach(link => {
                if (link.source.name === selectedNode.name) {
                    neighbors.add(link.target.name);
                } else if (link.target.name === selectedNode.name) {
                    neighbors.add(link.source.name);
                }
            });
    
            // Find the second-order neighbors (neighbors of first-order neighbors)
            links.forEach(link => {
                if (neighbors.has(link.source.name)) {
                    secondNeighbors.add(link.target.name);
                } else if (neighbors.has(link.target.name)) {
                    secondNeighbors.add(link.source.name);
                }
            });
    
            neighbors.add(selectedNode.name); // Include the selected node itself
            secondNeighbors.delete(selectedNode.name); // Avoid re-adding the selected node
    
            // Update the color of nodes
            node.attr('fill', (n) => {
                if (neighbors.has(n.name)) {
                    console.log(n.group)
                    // Original color for the selected node and its first-order neighbors
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else if (n.group === 2) {
                        return colorScale_keyword(n.citation)
                    } else {
                        if (n.name === "AI") {
                            return '#247181';
                        } else if (n.name === "CMA") {
                            return '#619ea9';
                        } else if (n.name === 'DSA') {
                            return '#234559';
                        }
                    }
                } else if (secondNeighbors.has(n.name)) {
                    // Original color for the selected node and its first-order neighbors
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else if (n.group === 2) {
                        return colorScale_keyword(n.citation)
                    } else {
                        if (n.name === "AI") {
                            return '#e3716e';
                        } else if (n.name === "CMA") {
                            return '#7ac7e2';
                        } else if (n.name === 'DSA') {
                            return '#f7df87';
                        }
                    }
                } else {
                    // Lighten color for other nodes
                    return "#ddd"; // or use a different light color
                }
            });
    
            // Update the color of links
            link.attr("stroke", (l) => {
                if (neighbors.has(l.source.name) && neighbors.has(l.target.name)) {
                    return color[3]; // Original color for links between selected node and its first-order neighbors
                } else if (secondNeighbors.has(l.source.name) || secondNeighbors.has(l.target.name)) {
                    return "#aaa"; // Slightly different color for links to second-order neighbors
                } else {
                    return "#ddd"; // Lighten color for other links
                }
            }).attr("stroke-opacity", (l) => {
                if (neighbors.has(l.source.name) && neighbors.has(l.target.name)) {
                    if (l.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                } else if (secondNeighbors.has(l.source.name) || secondNeighbors.has(l.target.name)) {
                    return 0.5; // Reduce opacity for second-order links
                } else {
                    return 0.3; // Reduce opacity for other links
                }
            });
        }
    
        // Function to reset all nodes to their original colors
        function resetNodeColors() {
            node.attr('fill', (n) => {
                if (n.group === 0) {
                    return colorScale(parseInt(n.released));
                } else if (n.group === 4) {
                    return colorScale_auther(n.count);
                } else if (n.group === 2) {
                    return colorScale_keyword(n.citation)
                } else {
                    if (n.name === "AI") {
                        return '#247181';
                    } else if (n.name === "CMA") {
                        return '#619ea9';
                    } else if (n.name === 'DSA') {
                        return '#224659';
                    }
                }
            });
    
            link.attr("stroke", color[3])
                .attr("stroke-opacity", (d) => {
                    if (d.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                });
    
    
            selectedNode = null; // Clear the selection
        }
    
        // Function to highlight papers published in a specific year and their neighbors
        function highlightPapersByYear(year) {
            const papers = nodes.filter(n => n.group === 0 && n.released === year);
            const neighbors = new Set();
            const relatedLinks = new Set();
    
            papers.forEach(paper => {
                neighbors.add(paper.name);
                links.forEach(link => {
                    if (link.source.name === paper.name || link.target.name === paper.name) {
                        neighbors.add(link.source.name);
                        neighbors.add(link.target.name);
                        relatedLinks.add(link);
                    }
                });
            });
    
            // Update the color of nodes
            node.attr('fill', (n) => {
                if (neighbors.has(n.name)) {
                    // Original color for the paper and its neighbors
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else {
                        if (n.name === "AI") {
                            return '#247181';
                        } else if (n.name === "CMA") {
                            return '#619ea9';
                        } else if (n.name === 'DSA') {
                            return '#224659';
                        }
                    }
                } else {
                    // Lighten color for other nodes
                    return "#ddd"; // or use a different light color
                }
            });
    
            // Update the color of links
            link.attr("stroke", (l) => {
                if (relatedLinks.has(l)) {
                    return color[3]; // Original color for links between papers and their neighbors
                } else {
                    return "#ddd"; // Lighten color for other links
                }
            }).attr("stroke-opacity", (l) => {
                if (relatedLinks.has(l)) {
                    if (l.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                } else {
                    return 0.3; // Reduce opacity for other links
                }
            });
        }
    
        // Function to highlight nodes based on department and year
        function highlightByDepartmentAndYear(departmentName, year) {
            // Find the selected department
            const department = nodes.find(n => n.group === 1 && n.name === departmentName);
            if (!department) return;
    
            // Find authors belonging to this department
            const authors = nodes.filter(n => n.group === 4 &&
                links.some(l => l.source.name === department.name && l.target.name === n.name));
    
            const papers = [];
            const neighbors = new Set();
            const relatedLinks = new Set();
    
            authors.forEach(author => {
                // Add the author as a neighbor
                neighbors.add(author.name);
    
                // Find papers by this author in the selected year
                const authorPapers = nodes.filter(n => n.group === 0 && n.released === year &&
                    links.some(l => l.source.name === author.name && l.target.name === n.name));
                papers.push(...authorPapers);
    
                // Add the paper as a neighbor
                authorPapers.forEach(paper => {
                    neighbors.add(paper.name);
    
                    // Add links related to this author and paper
                    links.forEach(link => {
                        if ((link.source.name === author.name && link.target.name === paper.name) ||
                            (link.target.name === author.name && link.source.name === paper.name)) {
                            relatedLinks.add(link);
                        }
                    });
                });
            });
    
    
            // Update the color of nodes
            node.attr('fill', (n) => {
                if (n.name === department.name || neighbors.has(n.name)) {
                    // Original color for the department, authors, and papers
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else {
                        if (n.name === "AI") {
                            return '#247181';
                        } else if (n.name === "CMA") {
                            return '#619ea9';
                        } else if (n.name === 'DSA') {
                            return '#224659';
                        }
                    }
                } else {
                    // Lighten color for other nodes
                    return "#ddd"; // or use a different light color
                }
            });
    
            // Update the color of links
            link.attr("stroke", (l) => {
                if (relatedLinks.has(l) || (l.source.name === department.name && neighbors.has(l.target.name))) {
                    return color[3]; // Original color for links between the department, authors, and papers
                } else {
                    return "#ddd"; // Lighten color for other links
                }
            }).attr("stroke-opacity", (l) => {
                if (relatedLinks.has(l) || (l.source.name === department.name && neighbors.has(l.target.name))) {
                    if (l.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                } else {
                    return 0.3; // Reduce opacity for other links
                }
            });
        }
    
        function highlightNodesByNameList(nameList) {
            const nodesToHighlight = new Set(nameList);
            const neighbors = new Set();
            const relatedLinks = new Set();
    
            // Identify all nodes and links to be highlighted
            nodes.forEach(node => {
                if (nodesToHighlight.has(node.name)) {
                    neighbors.add(node.name);
                    links.forEach(link => {
                        if (link.source.name === node.name || link.target.name === node.name) {
                            neighbors.add(link.source.name);
                            neighbors.add(link.target.name);
                            relatedLinks.add(link);
                        }
                    });
                }
            });
    
            // Update the color of nodes
            node.attr('fill', (n) => {
                if (neighbors.has(n.name)) {
                    // Original color for the highlighted nodes and their neighbors
                    if (n.group === 0) {
                        return colorScale(parseInt(n.released));
                    } else if (n.group === 4) {
                        return colorScale_auther(n.count);
                    } else {
                        if (n.name === "AI") {
                            return '#247181';
                        } else if (n.name === "CMA") {
                            return '#619ea9';
                        } else if (n.name === 'DSA') {
                            return '#234559';
                        }
                    }
                } else {
                    // Lighten color for other nodes
                    return "#ddd"; // or use a different light color
                }
            });
    
            // Update the color and opacity of links
            link.attr("stroke", (l) => {
                if (relatedLinks.has(l)) {
                    return color[3]; // Original color for links involving highlighted nodes
                } else {
                    return "#ddd"; // Lighten color for other links
                }
            }).attr("stroke-opacity", (l) => {
                if (relatedLinks.has(l)) {
                    if (l.relationship === 'BELONGS_TO') {
                        return 1;
                    } else {
                        return 0.6;
                    }
                } else {
                    return 0.3; // Reduce opacity for other links
                }
            });
        }
    
    
    </script><script>
        const containerWidth = d3.select('.chart_container').node().getBoundingClientRect().width;
        const containerHeight = d3.select('.chart_container').node().getBoundingClientRect().height;
        const chartWidth = containerWidth; // 每个图表宽度占容器的25%
        const chartHeight = containerHeight/4;
        const marginTop = 10;
        const marginRight = 10;
        const marginBottom = 20;
        const marginLeft = 30;
    
        // 通用的缩放功能
        function zoom_chart(svg, x, chartWidth, chartHeight) {
            const extent = [[marginLeft, marginTop], [chartWidth - marginRight, chartHeight - marginTop]];
    
            svg.call(d3.zoom()
                .scaleExtent([1, 8])
                .translateExtent(extent)
                .extent(extent)
                .on("zoom", zoomed));
    
            function zoomed(event) {
                const scale = event.transform.k;
                x.range([marginLeft, chartWidth - marginRight].map(d => event.transform.applyX(d)));
                svg.selectAll(".bars rect")
                    .attr("x", d => x(d.author))
                    .attr("width", x.bandwidth());
                const xAxisGroup = svg.selectAll(".x-axis");
                xAxisGroup.call(d3.axisBottom(x).tickFormat(scale < 3 ? '...' : d => d.split(' ')[1]));
                xAxisGroup.selectAll("text")
                    .style("text-anchor", "middle");
            }
        }
    
        // 单独的图表1绘制函数
        function createChart1(svg, data) {
            const colorScale_chart = d3.scaleLinear()
                .domain([2020, 2024])
            .range(["#e6b1be", "#d14163"]);
    
    
            const x = d3.scaleBand()
                .domain(data.map(d => d.year))
                .range([marginLeft, chartWidth - marginRight])
                .padding(0.1);
    
            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.papers)]).nice()
                .range([chartHeight - marginBottom, marginTop]);
    
            svg.attr("viewBox", [0, 0, chartWidth, chartHeight])
                .attr("style", "width: 100%; height: 100%;");
    
            svg.append("g")
                .attr("class", "bars")
                .selectAll("rect")
                .data(data)
                .join("rect")
                .attr("x", d => x(d.year))
                .attr("y", d => y(d.papers))
                .attr("height", d => y(0) - y(d.papers))
                .attr("width", x.bandwidth())
                .attr("fill", d => colorScale_chart(d.year))
                .on('click', function (e, d) {
                    highlightPapersByYear(d.year)
                })
                .on("mouseover", function (event, d) {
                    const currentColor = d3.select(this).attr("fill");
                    d3.select(this)
                        .attr("fill", d3.rgb(currentColor).darker(1.2));
                    tooltip.transition().duration(200).style("opacity", .9);
                    tooltip.html(
                        () => {
                            return d.papers
                        })
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY - 28) + "px");
                })
                .on("mouseout", function () {
                    const originalColor = d3.select(this).attr("fill");
                    d3.select(this).attr("fill", d3.rgb(originalColor).brighter(1.2));
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            svg.append("g")
                .attr("class", "x-axis")
                .attr("transform", `translate(0,${chartHeight - marginBottom})`)
                .call(d3.axisBottom(x).tickSizeOuter(0));
    
            svg.append("g")
                .attr("class", "y-axis")
                .attr("transform", `translate(${marginLeft},0)`)
                .call(d3.axisLeft(y).tickFormat(d3.format(".2s")))
                .call(g => g.select(".domain").remove());
    
            if (data.length > 10) {
                svg.selectAll(".x-axis text")
                    .text('...');
            }
        }
    
        // 单独的图表2绘制函数
        function createChart2(svg, data) {
    
            const x = d3.scaleBand()
                .domain(data.map(d => d.department))
                .range([marginLeft, chartWidth - marginRight])
                .padding(0.4);
    
            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.papers)]).nice()
                .range([chartHeight - marginBottom, marginTop]);
    
            svg.attr("viewBox", [0, 0, chartWidth, chartHeight])
                .attr("style", "width: 100%; height: 100%;");
    
            svg.append("g")
                .attr("class", "bars")
                .selectAll("rect")
                .data(data)
                .join("rect")
                .attr("fill", function (d) {
                    if (d.department === 'AI') {
                        return '#247485'
                    } else if (d.department === 'CMA') {
                        return '#64a4af'
                    } else if (d.department === 'DSA') {
                        return '#22465b'
                    }
                })
                .attr("x", d => x(d.department))
                .attr("y", d => y(d.papers))
                .attr("height", d => y(0) - y(d.papers))
                .attr("width", x.bandwidth())
                .on('click', function (e, d) {
                    const sNode = {'name': d.department}
                    highlightNeighborhood_2(sNode)
                })
                .on("mouseover", function (event, d) {
                    // 获取当前颜色并在鼠标悬浮时加深
                    const currentColor = d3.select(this).attr("fill");
                    d3.select(this)
                        .attr("fill", d3.rgb(currentColor).darker(1.2));
                    tooltip.transition().duration(200).style("opacity", .9);
                    tooltip.html(`${d.department}<br>${d.papers}`)
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY - 28) + "px");
                })
                .on("mouseout", function () {
                    // 恢复原来的颜色
                    const originalColor = d3.select(this).attr("fill");
                    d3.select(this).attr("fill", d3.rgb(originalColor).brighter(1.2));
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            svg.append("g")
                .attr("class", "x-axis")
                .attr("transform", `translate(0,${chartHeight - marginBottom})`)
                .call(d3.axisBottom(x).tickSizeOuter(0));
    
            svg.append("g")
                .attr("class", "y-axis")
                .attr("transform", `translate(${marginLeft},0)`)
                .call(d3.axisLeft(y).tickFormat(d3.format(".2s")))
                .call(g => g.select(".domain").remove());
    
        }
    
        // 单独的图表3绘制函数
        function createChart3(svg, data) {
    
            const keys = ["AI", "CMA", "DSA"];
    
            const x = d3.scaleBand()
                .domain(data.map(d => d.year))
                .range([marginLeft, chartWidth - marginRight])
                .padding(0.1);
    
            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.AI + d.CMA + d.DSA)]).nice()
                .range([chartHeight - marginBottom, marginTop]);
    
            const color = d3.scaleOrdinal()
                .domain(keys)
                .range(["#22788a", "#68aab6", "#22475d"]);
    
            const stack = d3.stack()
                .keys(keys)
                .order(d3.stackOrderNone)
                .offset(d3.stackOffsetNone);
    
            const series = stack(data);
    
            svg.attr("viewBox", [0, 0, chartWidth, chartHeight])
                .attr("style", "width: 100%; height: 100%;");
    
            svg.append("g")
                .attr("class", "bars")
                .selectAll("g")
                .data(series)
                .join("g")
                .attr("fill", d => color(d.key))
                .selectAll("rect")
                .data(d => d)
                .join("rect")
                .attr("x", d => x(d.data.year))
                .attr("y", d => y(d[1]))
                .attr("height", d => y(d[0]) - y(d[1]))
                .attr("width", x.bandwidth())
                .on('click', function (e, d) {
    
                    highlightByDepartmentAndYear(d3.select(this.parentNode).datum().key, String(d.data.year))
                })
                .on("mouseover", function (event, d) {
                    const key = d3.select(this.parentNode).datum().key;
                    const value = d[1] - d[0];
                    d3.select(this)
                        .attr("fill", d3.rgb(color(key)).darker(1.2));
                    tooltip.transition().duration(200).style("opacity", .9);
                    tooltip.html(`${key}<br>${value}`)
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY - 28) + "px");
                })
                .on("mouseout", function (event, d) {
                    const key = d3.select(this.parentNode).datum().key;
                    d3.select(this)
                        .attr("fill", color(key));
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            svg.append("g")
                .attr("class", "x-axis")
                .attr("transform", `translate(0,${chartHeight - marginBottom})`)
                .call(d3.axisBottom(x).tickSizeOuter(0));
    
            svg.append("g")
                .attr("class", "y-axis")
                .attr("transform", `translate(${marginLeft},0)`)
                .call(d3.axisLeft(y).tickFormat(d3.format(".2s")))
                .call(g => g.select(".domain").remove());
        }
    
        // 单独的图表4绘制函数
        function createChart4(svg, data) {
            const colorScale_auther_chart = d3.scaleLinear()
                .domain([18, 249])
                .range(["#e0f3e5", "#007f5f"]);
    
            const x = d3.scaleBand()
                .domain(data.map(d => d.author))
                .range([marginLeft, chartWidth - marginRight])
                .padding(0.1);
    
            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.papers)]).nice()
                .range([chartHeight - marginBottom, marginTop]);
    
            svg.attr("viewBox", [0, 0, chartWidth, chartHeight])
                .attr("style", "width: 100%; height: 100%;");
    
            svg.append("g")
                .attr("class", "bars")
                .selectAll("rect")
                .data(data)
                .join("rect")
                .attr("fill", d => colorScale_auther_chart(d.papers))
                .attr("x", d => x(d.author))
                .attr("y", d => y(d.papers))
                .attr("height", d => y(0) - y(d.papers))
                .attr("width", x.bandwidth())
                .on('click', function(e, d) {
                    const sNode = {'name': d.author}
                    highlightNeighborhood(sNode)
                })
                .on("mouseover", function (e, d) {
                    // 获取当前颜色并在鼠标悬浮时加深
                    const currentColor = d3.select(this).attr("fill");
                    d3.select(this)
                        .attr("fill", d3.rgb(currentColor).darker(1.2));
                    tooltip.transition().duration(200).style("opacity", .9);
                    tooltip.html(
                        () => {
                            return d.author + '<br>' + d.papers
                        })
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY - 28) + "px");
                })
                .on("mouseout", function () {
                    // 恢复原来的颜色
                    const originalColor = d3.select(this).attr("fill");
                    d3.select(this).attr("fill", d3.rgb(originalColor).brighter(1.2));
                    tooltip.transition().duration(500).style("opacity", 0);
                });
    
            svg.append("g")
                .attr("class", "x-axis")
                .attr("transform", `translate(0,${chartHeight - marginBottom})`)
                .call(d3.axisBottom(x).tickSizeOuter(0).tickFormat(d => data.length > 20 ? '...' : d.split(' ')[1]))
                .selectAll("text")
                .style("text-anchor", "middle")
                .attr("font-size", "10px");
    
            svg.append("g")
                .attr("class", "y-axis")
                .attr("transform", `translate(${marginLeft},0)`)
                .call(d3.axisLeft(y).tickFormat(d3.format(".2s")))
                .call(g => g.select(".domain").remove());
    
            if (data.length > 10) {
                svg.selectAll(".x-axis text")
                    .text('...');
            }
    
            if (data.length > 10) {
                zoom_chart(svg, x, chartWidth, chartHeight);
            }
        }
    
    
    </script><script>
        $(document).ready(function () {
            // 分别调用每个图表的绘制函数
            
            
            
            
            loadDataForChart()
        });
    
        function loadDataForChart() {
            $.ajax({
                url: 'http://127.0.0.1:8000/data_neo4j/forChart',
                type: 'get',
                data: {},
                success: function (res) {
                    let request = JSON.parse(res)
                    createChart1(d3.select("#chart1"), request['chart1'])
                    createChart2(d3.select("#chart2"), request['chart2'])
                    createChart3(d3.select("#chart3"), request['chart3'])
                    createChart4(d3.select("#chart4"), request['chart4'])
                }
            });
        }
    </script><script>
        // script.js
        document.getElementById('send-button').addEventListener('click', function () {
            const userInput = document.getElementById('user-input').value;
            if (userInput.trim() !== "") {
                addMessage(userInput, 'user');
                document.getElementById('user-input').value = '';
                
                document.getElementById('loading-spinner').style.display = 'block';
                
                generateBotResponse(userInput)
    
                // Simulate bot response
                
                
                
                //}, 500);
    
                // openAI回应
                
                
                
                
                
                
                
                
                
                //})
            }
        });
    
        function addMessage(message, sender) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', sender + '-message');
            messageElement.textContent = message;
            document.getElementById('messages').appendChild(messageElement);
            messageElement.scrollIntoView({behavior: 'smooth'});
        }
    
        function generateBotResponse(userInput) {
            const waitingMessage = document.querySelector('#messages .bot-message');
    
            // This is a placeholder response.
            // In a real application, you would replace this with an API call to your backend or AI model.
            let botRes
            let entityRes
            $.ajax({
                url: 'http://127.0.0.1:8000/qa/chat',
                type: 'POST',
                contentType: 'application/json', // 发送信息至服务器时内容编码类型
                data: JSON.stringify({'message': userInput}),
                success: function (res) {
                    let request = JSON.parse(res)
                    botRes = request['response']
                    entityRes = request['entity']
    
                    // Hide the loading spinner
                    document.getElementById('loading-spinner').style.display = 'none';
    
    
                    controlGraph(botRes, entityRes)
                }
            })
            return botRes;
        }
        
    
        function controlGraph(botRes, entityRes) {
            console.log(entityRes)
            disableComponent()
            streamBotResponse(botRes)
            let clear = {
                'nodes': [],
                'links': [],
            }
            updateGraph(clear)
            InitGraphByQA(entityRes)
        }
    
    
    
        function streamBotResponse(message) {
            const messageContainer = document.getElementById('messages');
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', 'bot-message');
            messageContainer.appendChild(messageElement);
            messageElement.scrollIntoView({behavior: 'smooth'});
    
            let index = 0;
            const interval = setInterval(() => {
                if (index < message.length) {
                    messageElement.textContent += message[index];
                    index++;
                } else {
                    clearInterval(interval);
                }
                messageElement.scrollIntoView({behavior: 'smooth'});
            }, 5); // Adjust the interval time to control the speed of the typing effect
        }
        
    
        // Allow pressing Enter to send the message
        document.getElementById('user-input').addEventListener('keydown', function (event) {
            if (event.key === 'Enter') {
                document.getElementById('send-button').click();
            }
        });
    
    </script></body>
    </html>